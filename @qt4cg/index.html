<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2023/">2023</a>, <a href="2022/">2022</a></p><div class="toots">
<div class="toot" id="agenda-01-10"><h2>QT4 CG meeting 017 draft agenda<span class="toot-id"> #agenda-01-10</span></h2><div class="pubdate">06 Jan at 16:02:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2023/01-10">https://qt4cg.org/meeting/agenda/2023/01-10</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-300"><h2>Issue #300 created<span class="toot-id"> #created-300</span></h2><div class="pubdate">06 Jan at 16:19:33 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/300">https://github.com/qt4cg/qtspecs/issues/300</a></div><details><summary>[F+O] Ambiguity regarding Unicode normalization (editorial)</summary><div class="markup"><p>In §1.7.1 the paragraph</p>
<blockquote>
<p>Unless explicitly stated, the xs:string values returned by the
functions in this document are not normalized in the sense of
[Character Model for the World Wide Web 1.0: Fundamentals].</p>
</blockquote>
<p>is a little bit ambiguous for my taste. By "are not normalized" it means "no action is taken to normalize the strings", it doesn't mean "the strings will not be in normalized form".</p>
<p>I suggest: "Unless explicitly stated, the functions in this document operate on strings as sequences of codepoints and do not attempt to convert input strings, or produce output strings, in Unicode normalized form. Unicode normalization occurs only when explicitly requested, for example by use of the <code>fn:normalize-unicode</code> function."</p>
<p>At the same time we might update the reference to point to "Character Model for the World Wide Web: String Matching", revised in 2021, though it is still only a Working Group Note. See https://www.w3.org/TR/charmod-norm/#unicodeNormalization</p>
</div></details></div>
<div class="toot" id="closed-281"><h2>Issue #281 closed<span class="toot-id"> #closed-281</span></h2><div class="pubdate">02 Jan at 18:12:42 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/281">https://github.com/qt4cg/qtspecs/issues/281</a></div><p>XPath: Short-circuiting Functions and Lazy Evaluation Hints</p></div>
<div class="toot" id="created-299"><h2>Issue #299 created<span class="toot-id"> #created-299</span></h2><div class="pubdate">02 Jan at 18:08:24 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/299">https://github.com/qt4cg/qtspecs/issues/299</a></div><details><summary>Short-circuiting functions, function-arity guards and lazy hints</summary><div class="markup"><h1><strong>I. Shortcutting and lazy hints</strong></h1>
<p>Let us have this expression:</p>
<pre><code class="language-xq">let $f := function($arg1 as item()*, $arg2 as item()*) as function(item()*) as item()*
             {  (: Some code here :) }
  return
    $f($x) ($y)
</code></pre>
<p>Evaluating&nbsp;<strong><code>$f($x)</code></strong>&nbsp;produces a function. The&nbsp;<strong>actual arity</strong>&nbsp;of this resulting function can be any number&nbsp;<strong><code>N &gt;= 0</code></strong> :</p>
<ul>
<li>
<p>If&nbsp;<strong><code>N &gt; 1</code></strong>&nbsp;there would be arity mismatch error, as only one argument&nbsp;<code>$y</code>&nbsp;is provided in the expression.</p>
</li>
<li>
<p>If&nbsp;<strong><code>N = 1</code></strong>&nbsp;the final function call can be evaluated, and the argument&nbsp;<code>$y</code>   must be evaluated,  or</p>
</li>
<li>
<p><strong>If <code>N = 0</code>, then  <code>$y</code> is unneeded and can safely be ignored</strong> according to the updated <strong>“<a href="https://qt4cg.org/pr/279/xquery-40/xpath-40.html#id-coercion-rules">Coercion Rules / Function Coercion</a>”</strong> in Xpath 4.0.</p>
</li>
</ul>
<p><strong>Because a possibility exists to be able to ignore the evaluation of&nbsp;<code>$y</code>, it is logical to delay the evaluation of&nbsp;<code>$y</code>&nbsp;until the actual arity of&nbsp;<code>$f($x)</code>&nbsp;is known</strong>.</p>
<p>The current XPath 4.0 evaluation rules do not require an implementation to base its decision whether or not to evaluate&nbsp;<code>$y</code> on the actual arity of the function produced by <code>$f($x)</code>, thus at present an implementation could decide to evaluate <code>$y</code> regardless of the actual arity of the function produced by <code>$f($x)</code>.</p>
<p><strong>This is where a&nbsp;<em>lazy</em>&nbsp;hint comes</strong>: it indicates to the XPath processor that <em><strong>it is logical to make the decision about evaluation of&nbsp;<code>$y</code>&nbsp;based on the actual arity of the function returned by&nbsp;<code>$f($x)</code></strong></em>.</p>
<p>A rewrite of the above expression using a <strong><em><em>lazy</em></em></strong>&nbsp;hint looks like this:</p>
<pre><code class="language-xq">let $f := function($arg1 as item()*, $arg2 as item()*) as function(item()*) as item()*
             {  (: Some code here :) }  
  return
    $f($x) (lazy $y)
</code></pre>
<p>Here is one example of a function with short-cutting and calling it with a <strong><em>lazy</em></strong> hint:</p>
<pre><code class="language-xq">let $fAnd := function($x as xs:boolean, $y as xs:boolean) as xs:boolean
             {
                let $partial := function($x as xs:boolean) as function(xs:boolean) as  xs:boolean
                                {
                                  if(not($x)) then -&gt;(){false()}
                                              else -&gt;($t) {$t}
                                }
                 return $partial($x)($y)
             }
  return
     $fAnd($x (: possibly false() :), lazy&nbsp;$SomeVeryComplexAndSlowComputedExpression)
</code></pre>
<p><strong>Without the <strong><em>lazy</em></strong>&nbsp;hint in the above example, it is perfectly possible that an XPath implementation, unrestricted by the current rules, would evaluate <em><code>$SomeVeryComplexAndSlowComputedExpression</code></em> - something that is unneeded and could be avoided completely</strong>.</p>
<h2>Formal syntax and semantics</h2>
<ol>
<li>
<p>The <strong><em>lazy</em></strong> keyword should immediately precede any argument in a function call. If specified, it means that <strong><em>it is logical to make the decision about evaluation of&nbsp;this argument&nbsp;based on the actual arity of the function in this function call</em></strong>.</p>
<p>Based on this definition, it follows that <strong><em><code>lazy $argK</code></em></strong> implies <strong><em>lazy</em></strong> for all arguments following <code>$argK</code> in the function call. Thus specifying more than one <strong><em>lazy</em></strong> hint within a given function call is redundant and an implementation may report this redundancy to the user.</p>
<p>The scope of a <strong><em>lazy</em></strong> keyword specified on an argument is this and all following arguments of (only) the current function call.</p>
</li>
<li>
<p>It is possible to specify a <strong><em>lazy</em></strong> keyword that is in force for the respective argument(s) of all function calls of the given function. To do this, the <strong><em>lazy</em></strong> keyword must  be  specified immediately preceding a parameter name in the function definition of that function.</p>
<p>For example, if the function <strong><code>$f</code></strong> is specified as:</p>
<pre><code class="language-xq">let $f := function($arg1 as item()*, lazy $arg2 as item()*, $arg3 as item()*, $arg4 as item()* ) 
          { (: some code here:) }
  return
     $someExpression
</code></pre>
<p>Then any call of <strong><code>$f</code></strong> in its definition scope that has the form:</p>
<pre><code class="language-xq">$f($x, $y, $z, $t)
</code></pre>
<p>is equivalent to:</p>
<pre><code class="language-xq">$f($x, lazy $y, $z, $t)
</code></pre>
</li>
</ol>
<h1><strong>II. A function's arity is a guard for its arguments</strong></h1>
<p>Let us have a  function <strong><code>$f</code></strong> defined as below:</p>
<pre><code class="language-xq">let $f := function($arg1 as item()*, $arg2 as item()*, …, $argN as item()*)
   as function(item()*, item()*, …, item()*) as item()*
     {
       if($cond0($arg1))       then -&gt; () { 123 }
        else if($cond1($arg1)) then -&gt; ($Z1 as item()*) {$Z1}
        else if($cond2($arg1)) then -&gt; ($Z1 as item()*, $Z2 as item()*) {$Z1 + $Z2}
        (:    .        .        .        .         .        .        .         .  :)
        else if($condK($arg1)) then -&gt; ($Z1 as item()*, $Z2 as item()*, …, $Zk as item()*)
                                       {$Z1 + $Z2 + … + $Zk}
        else ()
     }
  return
     $f($y1, $y2, …, $yN) ($z1, $z2, …, $zk)
</code></pre>
<p>A call to <strong><code>$f</code></strong> returns a function whose arity may be any of the numbers: 0, 1, …, K.</p>
<p>Depending on the arity of the returned function (0, 1, …, K), the last (K, K-1,  K-2, …, 2, 1, 0) arguments of the function call:</p>
<p><strong><em><code>$f($y1, $y2,  .  .  . , $yN) ($z1, $z2, .  .  . , $zk)</code></em></strong></p>
<p><strong>are unneeded and it is logical that they would not need to be evaluated</strong>.</p>
<p><strong>So, the actual arity of the result of calling <strong><code>$f</code></strong> is a guard for the arguments of a call to this function-result</strong>.</p>
<p>Thus, one more bullet needs to be added to [2.4.5 Guarded Expressions] https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-guarded-expressions), specifying an additional guard-type:</p>
<ul>
<li>In an expression of the type&nbsp;<code>E(A1, A2, ..., AN)</code>&nbsp;any of the arguments&nbsp;<code>A</code><sub>K</sub>&nbsp;is guarded by the condition&nbsp;
<code>actual-arity(E) ge K</code>. This rule has the consequence that if the actual arity of&nbsp;<code>E()</code>&nbsp;is less than&nbsp;<code>K</code>&nbsp;then if any argument&nbsp;<code>Am</code> (where <code>m &gt;= K</code>)&nbsp;is evaluated, this must not raise a dynamic error. An implementation may base on the actual arity of&nbsp;<code>E()</code> its decision for the evaluation of the arguments.</li>
</ul>
</div></details></div>
<div class="toot" id="created-298"><h2>Issue #298 created<span class="toot-id"> #created-298</span></h2><div class="pubdate">02 Jan at 15:36:58 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/298">https://github.com/qt4cg/qtspecs/issues/298</a></div><details><summary>Abstract supertype for map and array</summary><div class="markup"><p>I've been wondering whether there would be any mileage in introducing an abstract super type for map() and array(), perhaps called lookup(). This would basically treat an array as a map with integer keys.</p>
<p>This would allow a cleaner type signature for map:find() and any future functions such as xx:search() that work both on maps and arrays. It might simplify the description of the lookup operator "?". For functions that already exist in both the map and array namespaces, such as get(), we could introduce a unified function in the fn namespace with the cosmetic benefit of reducing the need for namespace prefixes and namespace declarations.</p>
<p>I'm still keen to find a better way of doing iteration, filtering, mapping, and construction of maps and arrays, and I think this might be a useful stepping stone.</p>
</div></details></div>
<div class="toot" id="created-297"><h2>Issue #297 created<span class="toot-id"> #created-297</span></h2><div class="pubdate">28 Dec at 23:51:51 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/297">https://github.com/qt4cg/qtspecs/issues/297</a></div><details><summary>Lookup in deeply nested JSON, an abbreviated syntax for map:find</summary><div class="markup"><p>In XML, you can select all X nodes with an abbreviated syntax //X</p>
<p>There is no abbreviated syntax for JSON</p>
<p>I propose to add a ?? syntax. Like / is doubled for //, it doubles the ? lookup operator.</p>
<p>The syntax is basically the same as for ?:</p>
<p>[200]  UnaryLookupRecursion  ::=  "??"  KeySpecifier
[143]  LookupRecursion ::=  "??"  KeySpecifier
[144]  KeySpecifier |::=  NCName  |  IntegerLiteral  |  StringLiteral  |  VarRef  |  ParenthesizedExpr  |  "*"</p>
<p>For the semantic it can call map:find, except for * and varref:</p>
<p>Unary variant:</p>
<pre><code>??"string"    becomes map:find(. , "string")
??NCName      becomes map:find( ., "NCName")
??123         becomes map:find(., 123)

??*           Recursively every member/value of every array/map underneath .
              E.g. for `[{"a": {"x": 123}}, 456]`: `{"a": {"x": 123}}, {"x": 123}, 123, 456`

??$varref     calls ?$varref on every nested array/map.
              Like (.,??*)?$varref   (except for type errors)
</code></pre>
<p>Postfix variant:</p>
<p><code>E??S</code>   would be <code>E!??S</code> if it is atomic, or <code>let $s := data(S) return E!??$s</code> if S is parenthesized</p>
<p>This probably conflicts with #171</p>
</div></details></div>
<div class="toot" id="created-296"><h2>Issue #296 created<span class="toot-id"> #created-296</span></h2><div class="pubdate">22 Dec at 10:44:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/296">https://github.com/qt4cg/qtspecs/issues/296</a></div><details><summary>Default namespace for elements; especially in the context of HTML</summary><div class="markup"><p>There can be little doubt that the fact that an unprefixed name in XPath fails to select an unprefixed element in the source document is one of the major gotcha's, causing massive bewilderment to all newbie users.</p>
<p>The XPath 2.0 solution of using a default element namespace in the static context is a partial solution; its main drawback is that it doesn't help the newbies who didn't know about the problem or its solution.</p>
<p>The HTML "living standard" introduces a "wilful violation" of the XPath 1.0 spec to address the issue. Given that most elements in an HTML DOM will be in the XHTML namespace, it states:</p>
<blockquote>
<p>If the QName has no prefix and the principal node type of the axis is element, then the default element namespace is used. Otherwise if the QName has no prefix, the namespace URI is null. The default element namespace is a member of the context for the XPath expression. The value of the default element namespace when executing an XPath expression through the DOM3 XPath API is determined in the following way:</p>
</blockquote>
<blockquote>
<p>If the context node is from an HTML DOM, the default element namespace is "http://www.w3.org/1999/xhtml".
Otherwise, the default element namespace URI is null.</p>
</blockquote>
<p>It then adds a note which is blatantly untrue:</p>
<blockquote>
<p>This is equivalent to adding the default element namespace feature of XPath 2.0 to XPath 1.0, and using the HTML namespace as the default element namespace for HTML documents. It is motivated by the desire to have implementations be compatible with legacy HTML content while still supporting the changes that this specification introduces to HTML regarding the namespace used for HTML elements, and by the desire to use XPath 1.0 rather than XPath 2.0.</p>
</blockquote>
<p>Since the XPath 2.0 facility picks up the default namespace from the static context, while the HTML "wilful violation" picks it up dynamically from a property of the context node (namely "being from an HTML DOM") there is no way these can be considered equivalent.</p>
<p>(Note also, there's a significant ambiguity in the "wilful violation" rules: what exactly is the "context node" that determines this behaviour? I think they're suggesting it is the context node at the point of XPath API invocation, not the context node for the specific axis step. This makes it rather unclear how the rule is supposed to apply to XSLT. And: if an XSLT stylesheet creates a temporary tree with nodes in the XHTML namespaces, do we consider those nodes as being "from an HTML DOM"?)</p>
<p>Nevertheless, the intent of the "violation" is worthy, and it would be nice if we can find a solution to this problem that works both for HTML and for other vocabularies.</p>
<p>Our current proposal for fn:parse-html is that HTML elements should go in the XHTML namespace and this means that users familiar with XPath 1.0 implementations in the browser will trip over this problem. A lot.</p>
</div></details></div>
<div class="toot" id="created-295"><h2>Issue #295 created<span class="toot-id"> #created-295</span></h2><div class="pubdate">20 Dec at 23:43:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/295">https://github.com/qt4cg/qtspecs/issues/295</a></div><details><summary>Extend support for self-reference in record types</summary><div class="markup"><p>We currently allow a field in a record to have type "..", that is, the same type as the containing record definition.</p>
<p>This isn't good enough for the fn:random-number-generator, where we need something like:</p>
<pre><code>random-number-generator-record:
record(
   number as&nbsp;xs:double,
   next as&nbsp;function() as #random-number-generator-record,
   permute as&nbsp;function(item()*) as item()*,
   *,
)

</code></pre>
<p>There are two ways we could tackle this. We could extend the syntax to allow ".." here, so it becomes
<code>next as&nbsp;function() as ..</code> Or we could allow named item types to refer to themselves:</p>
<pre><code>&lt;xsl:item-type name="random-number-generator-record"
   as="record(
   number as&nbsp;xs:double,
   next as&nbsp;function() as type(random-number-generator-record),
   permute as&nbsp;function(item()*) as item()*,
   *,
)"&gt;

</code></pre>
<p>We haven't really reviewed the proposal for named item types. It's easy enough to declare them in XQuery and XSLT (and not really very difficult to define the rules under which self-referential definitions are allowed). Free-standing XPath is a bit more of a problem.</p>
</div></details></div>
<div class="toot" id="minutes-12-20"><h2>QT4 CG meeting 016 draft minutes<span class="toot-id"> #minutes-12-20</span></h2><div class="pubdate">20 Dec at 17:26:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2022/12-20">https://qt4cg.org/meeting/minutes/2022/12-20</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="created-294"><h2>Issue #294 created<span class="toot-id"> #created-294</span></h2><div class="pubdate">20 Dec at 15:48:55 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/294">https://github.com/qt4cg/qtspecs/issues/294</a></div><details><summary>fn:remove removing multiple items</summary><div class="markup"><p><code>map:remove</code> and <code>array:remove</code> take a list of keys/positions to be removed; fn:remove only accepts one. I propose changing <code>fn:remove</code> to bring it into line.</p>
<p>Without this, removing multiple items is tricky because removing one item changes the positions of the others.</p>
<p>Example use case:</p>
<pre><code>let $p := index-where($persons -&gt;{@status='retired'))
return $persons =&gt; remove($p)
</code></pre>
<p>(Of course, this could always be done with a filter. But removing a small number of items from a large sequence might be more efficient than a filter)</p>
</div></details></div>
<div class="toot" id="created-293"><h2>Issue #293 created<span class="toot-id"> #created-293</span></h2><div class="pubdate">19 Dec at 20:14:27 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/293">https://github.com/qt4cg/qtspecs/issues/293</a></div><details><summary>Error in fn:doc-available specification</summary><div class="markup"><p>Observed on the XML.com slack (Oct 6 2022):</p>
<p>A rule in the XQFO 3.1 specification seems to be inconsistent. In the error summary, it’s stated that:</p>
<blockquote>
<p><code>err:FODC0005</code>, Invalid argument to fn:doc or fn:doc-available. Raised (optionally) by <code>fn:doc</code> and <code>fn:doc-available</code> if the argument is not a valid URI reference.</p>
</blockquote>
<p>The rules for <code>fn:doc-available</code> say: “[…] In all other cases this function returns false. This includes the case where an invalid URI is supplied, and also the case where a valid relative URI reference is supplied, and cannot be resolved, for example because the static base URI is absent.”</p>
</div></details></div>
<div class="toot" id="created-292"><h2>Pull request #292 created<span class="toot-id"> #created-292</span></h2><div class="pubdate">19 Dec at 18:43:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/292">https://github.com/qt4cg/qtspecs/pull/292</a></div><details><summary>Merge signatures with optional params</summary><div class="markup"><p>This addresses issue #291, concerned with the validity of function-catalog.xml against its XSD schema, and the validity of the intermediate file xpath-functions-40.xml against the xmlspec DTD (as amended for QT).</p>
<p>It also fixes the trivial error raised in issue #288, and addresses issue #70 by making each function have a single prototype with default values where appropriate. (This is not purely an editorial change, it enables you for example to supply () as the $length argument of fn:substring).</p>
<p>There's more work on issue #257 (editorial improvements to handling of named record types).</p>
<p>This commit is mainly for technical review by NDW. It combines changes to the stylesheets, schema, and content, and may therefore require picking apart before it can be applied.</p>
</div></details></div>
<div class="toot" id="created-291"><h2>Issue #291 created<span class="toot-id"> #created-291</span></h2><div class="pubdate">19 Dec at 11:31:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/291">https://github.com/qt4cg/qtspecs/issues/291</a></div><details><summary>DTD validity of F&amp;O spec</summary><div class="markup"><p>Despite PR #228, I'm still seeing a lot of validation errors when (using Oxygen) I apply DTD validation to build/expanded/xpath-functions-40/xpath-functions-40.xml</p>
<p>Many of these relate to style attributes not being allowed on table, td, and code elements.</p>
<p>The merge-function-specs.xsl explicitly creates elements with these attributes:</p>
<p>See</p>
<ul>
<li><code>&lt;xsl:template match="fos:options"&gt;</code> line 382</li>
<li><code>&lt;xsl:template match="fos:option"&gt;</code> line 408</li>
<li><code>&lt;xsl:template match="processing-instruction('local-function-index')"&gt;</code> line 347</li>
</ul>
<p>It all works because xmlspec-2016.xsl handles these attributes even though the DTD doesn't allow them: see <code>&lt;xsl:template name="style-attributes"&gt;</code> at line 2096.</p>
<p>There seem to be three possible options:</p>
<ul>
<li>Extend the DTD to allow these attributes</li>
<li>Change merge-function-specs.xsl to not generate these attributes, instead perhaps generating a role attribute which gets picked up in the final styling</li>
<li>Sweep the issue under the carpet; avoid validating the intermediate file.</li>
</ul>
<p>The main problem with the third approach is that it allows other errors to go unnoticed, for example putting text directly within an <code>&lt;item&gt;</code> without a containing <code>&lt;p&gt;</code>.</p>
</div></details></div>
<div class="toot" id="created-290"><h2>Pull request #290 created<span class="toot-id"> #created-290</span></h2><div class="pubdate">17 Dec at 19:21:51 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/290">https://github.com/qt4cg/qtspecs/pull/290</a></div><details><summary>Fix issue #18 (function type hierarchy)</summary><div class="markup"><p>Editorial change to fix a technical error in the data model spec (issue #18). Does not change the specification.</p>
</div></details></div>
<div class="toot" id="created-289"><h2>Pull request #289 created<span class="toot-id"> #created-289</span></h2><div class="pubdate">17 Dec at 18:45:49 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/289">https://github.com/qt4cg/qtspecs/pull/289</a></div><details><summary>Proposal to add fallback behaviour to map:get and array:get</summary><div class="markup"><p>Note: I got a build failure trying to build this, it's doing DTD validation but there are invalidities, unrelated to the changes I made.</p>
</div></details></div>
<div class="toot" id="agenda-12-20"><h2>QT4 CG meeting 016 draft agenda<span class="toot-id"> #agenda-12-20</span></h2><div class="pubdate">16 Dec at 09:41:30 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2022/12-20">https://qt4cg.org/meeting/agenda/2022/12-20</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-288"><h2>Issue #288 created<span class="toot-id"> #created-288</span></h2><div class="pubdate">15 Dec at 14:49:30 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/288">https://github.com/qt4cg/qtspecs/issues/288</a></div><details><summary>Error in fn:path specification</summary><div class="markup"><p>On the XML.com slack, Phil Fearon observes:</p>
<blockquote>
<p>The XPath 3.1 specification has an error in the <a href="https://www.w3.org/TR/xpath-functions-31/#func-path">definition of fn:path</a></p>
<p>The properties section states:</p>
<p>The one-argument form of this function is <a href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic">·deterministic·</a>, <a href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent">·context-dependent·</a>, and [·focus-dependent·] (https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent).
The two-argument form of this function is <a href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic">·deterministic·</a>, <a href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent">·context-independent·</a>, and <a href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent">·focus-independent·</a>.</p>
<p>The term one-argument form should be zero-argument form and consequently, two-argument form should be one-argument form</p>
</blockquote>
</div></details></div>
<div class="toot" id="closed-277"><h2>Issue #277 closed<span class="toot-id"> #closed-277</span></h2><div class="pubdate">14 Dec at 14:13:47 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/277">https://github.com/qt4cg/qtspecs/issues/277</a></div><p>Overriding functions using xsl:import</p></div>
<div class="toot" id="closed-279"><h2>Issue #279 closed<span class="toot-id"> #closed-279</span></h2><div class="pubdate">14 Dec at 14:13:46 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/279">https://github.com/qt4cg/qtspecs/pull/279</a></div><p>Rewrite XSLT §10.3.4 (function overriding) for clarity</p></div>
<div class="toot" id="closed-287"><h2>Issue #287 closed<span class="toot-id"> #closed-287</span></h2><div class="pubdate">14 Dec at 14:13:45 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/287">https://github.com/qt4cg/qtspecs/pull/287</a></div><p>PR #279 with merge conflicts resolved</p></div>
<div class="toot" id="created-287"><h2>Pull request #287 created<span class="toot-id"> #created-287</span></h2><div class="pubdate">14 Dec at 13:57:39 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/287">https://github.com/qt4cg/qtspecs/pull/287</a></div><details><summary>PR #279 with merge conflicts resolved</summary><div class="markup"><p>Close #279
Close #277</p>
</div></details></div>
<div class="toot" id="created-286"><h2>Pull request #286 created<span class="toot-id"> #created-286</span></h2><div class="pubdate">13 Dec at 21:06:36 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/286">https://github.com/qt4cg/qtspecs/pull/286</a></div><p>Spec changes to allow child::(a|b|c) - Issue 107</p></div>
<div class="toot" id="closed-258"><h2>Issue #258 closed<span class="toot-id"> #closed-258</span></h2><div class="pubdate">13 Dec at 20:08:52 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/258">https://github.com/qt4cg/qtspecs/pull/258</a></div><p>Issue #114 - add array:index-where() function</p></div>
<div class="toot" id="closed-265"><h2>Issue #265 closed<span class="toot-id"> #closed-265</span></h2><div class="pubdate">13 Dec at 17:58:27 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/265">https://github.com/qt4cg/qtspecs/issues/265</a></div><p>Type hierarchy tables/diagrams</p></div>
<div class="toot" id="closed-268"><h2>Issue #268 closed<span class="toot-id"> #closed-268</span></h2><div class="pubdate">13 Dec at 17:58:26 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/268">https://github.com/qt4cg/qtspecs/pull/268</a></div><p>New type-hierarchy images / descriptions</p></div>
<div class="toot" id="minutes-12-13"><h2>QT4 CG meeting 015 draft minutes<span class="toot-id"> #minutes-12-13</span></h2><div class="pubdate">13 Dec at 17:23:01 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2022/12-13">https://qt4cg.org/meeting/minutes/2022/12-13</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="agenda-12-13"><h2>QT4 CG meeting 015 draft agenda<span class="toot-id"> #agenda-12-13</span></h2><div class="pubdate">09 Dec at 07:44:30 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2022/12-13">https://qt4cg.org/meeting/agenda/2022/12-13</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-285"><h2>Issue #285 created<span class="toot-id"> #created-285</span></h2><div class="pubdate">08 Dec at 11:34:57 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/285">https://github.com/qt4cg/qtspecs/issues/285</a></div><details><summary>Stability of collections</summary><div class="markup"><p>The specification for fn:collection says:</p>
<blockquote>
<p>By default, this function is [·deterministic·]. This means that repeated calls on the function with the same argument will return the same result. However, for performance reasons, implementations may provide a user option to evaluate the function without a guarantee of determinism. The manner in which any such option is provided is [·implementation-defined·]. If the user has not selected such an option, a call to this function must either return a deterministic result or must raise a dynamic error [[err:FODC0003].</p>
</blockquote>
<p>I think this is unrealistic. The cost of making fn:collection deterministic is disproportionate to the benefits. It's very rare in practice for a query or stylesheet to process the same collection more than once, and retaining the information needed to deliver the identical results on these rare occasions is expensive (typically it means holding a long-term lock on the data, or keeping a copy of the entire collection in memory). It also inhibits techniques such as multi-threaded evaluation.</p>
<p>I would like to relax this requirement.</p>
</div></details></div>
<div class="toot" id="created-284"><h2>Pull request #284 created<span class="toot-id"> #created-284</span></h2><div class="pubdate">07 Dec at 11:55:51 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/284">https://github.com/qt4cg/qtspecs/pull/284</a></div><details><summary>Add grammar for "if (test) then {expr}" with no else</summary><div class="markup"><p>As discussed in issue #234. In reviewing this PR, I suggest we consider it together with the existing proposals for ternary conditionals (x ?? y !! z) and the "otherwise" operator.</p>
</div></details></div>
<div class="toot" id="minutes-12-06"><h2>QT4 CG meeting 014 draft minutes<span class="toot-id"> #minutes-12-06</span></h2><div class="pubdate">06 Dec at 17:21:01 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2022/12-06">https://qt4cg.org/meeting/minutes/2022/12-06</a></div><p>Draft minutes published.</p></div></div><p>See 64
            more statuses in yearly archives.</p></article></main></body></html>