<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2023/">2023</a>, <a href="2022/">2022</a></p><div class="toots">
<div class="toot" id="minutes-03-14"><h2>QT4 CG meeting 026 draft minutes<span class="toot-id"> #minutes-03-14</span></h2><div class="pubdate">14 Mar at 17:20:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2023/03-14">https://qt4cg.org/meeting/minutes/2023/03-14</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="created-396"><h2>Pull request #396 created<span class="toot-id"> #created-396</span></h2><div class="pubdate">13 Mar at 18:04:50 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/396">https://github.com/qt4cg/qtspecs/pull/396</a></div><details><summary>Deep-equal, no failure when comparing functions</summary><div class="markup"><p>Refines the spec of fn:deep-equal so it no longer fails when comparing function items, rather it returns a result which in general is implementation-dependent, though it must be false unless the functions are provably equivalent.</p>
</div></details></div>
<div class="toot" id="created-395"><h2>Pull request #395 created<span class="toot-id"> #created-395</span></h2><div class="pubdate">13 Mar at 11:50:35 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/395">https://github.com/qt4cg/qtspecs/pull/395</a></div><details><summary>Make the (non-)hierarchical nature of URIs explicit</summary><div class="markup"><p>The <code>fn:parse-uri</code> function will parse hierarchical or non-hierarchical URIs, however, the parse cannot be reversed if the <code>fn:build-uri</code> function doesn't know whether the scheme is hierarchical. Consider <code>fn:parse-uri("querty:abc")</code>:</p>
<pre><code>map {
  "path":"abc",
  "scheme":"querty",
  "path-segments":["abc"],
  "uri":"querty:abc"
}
</code></pre>
<p>When <code>fn:build-uri</code> parses that map, it produces: <code>querty://abc</code> because the scheme is not known to be non-hierarchical.</p>
<p>This PR changes <code>fn:parse-uri</code> so that it records whether or not the URI was hierarchical and <code>fn:build-uri</code> to use that information.</p>
<p>It's possible that we could finesse this by setting the <code>authority</code> to the empty string for hierarchical URIs, but it seems clearer to be explicit.</p>
<p>This PR also fixes a bug. Previously, if the <code>scheme</code> was not present when building a URI, the URI began with <code>//</code>. That's an error. If the scheme isn't present, there should be no <em>scheme separator</em>.</p>
</div></details></div>
<div class="toot" id="created-394"><h2>Pull request #394 created<span class="toot-id"> #created-394</span></h2><div class="pubdate">13 Mar at 10:08:22 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/394">https://github.com/qt4cg/qtspecs/pull/394</a></div><details><summary>Minor correction to fn:parse-uri</summary><div class="markup"><p>The <code>fn:parse-uri()</code> function recognizes "URIs" of the form <code>c:/path/to/thing</code> as implicitly being <code>file:</code> URIs. This small change adds a leading "/" to make the fact that it is a path explicit.</p>
</div></details></div>
<div class="toot" id="agenda-03-14"><h2>QT4 CG meeting 026 draft agenda<span class="toot-id"> #agenda-03-14</span></h2><div class="pubdate">13 Mar at 08:45:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2023/03-14">https://qt4cg.org/meeting/agenda/2023/03-14</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="closed-386"><h2>Issue #386 closed<span class="toot-id"> #closed-386</span></h2><div class="pubdate">13 Mar at 09:26:50 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/386">https://github.com/qt4cg/qtspecs/pull/386</a></div><p>Action QT4CG-025-05 (markup typo)</p></div>
<div class="toot" id="created-393"><h2>Pull request #393 created<span class="toot-id"> #created-393</span></h2><div class="pubdate">12 Mar at 22:07:08 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/393">https://github.com/qt4cg/qtspecs/pull/393</a></div><details><summary>Clarify explanations of functions/function items</summary><div class="markup"><p>This PR is purely editorial in the sense that it does not attempt to make any changes that would affect an implementation. It's intended to clear up ambiguity and lack of clarity in the description of operations on functions, in particular the way that a function item captures static and dynamic context. It addresses issues #239 and issue #392.</p>
</div></details></div>
<div class="toot" id="created-392"><h2>Issue #392 created<span class="toot-id"> #created-392</span></h2><div class="pubdate">12 Mar at 18:56:05 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/392">https://github.com/qt4cg/qtspecs/issues/392</a></div><details><summary>Partial function application: Placeholders with keywords</summary><div class="markup"><p>It's clear that the following is allowed:</p>
<p><code>format-date(current-date(), '[Y]-[M]-[D]', place:=?, language:=?, calendar:="AD")</code></p>
<p>The resulting function item takes two arguments (place and language) but in what order? Is it the order of parameters in the original function definition, or the order in which they appear in the partial function application?</p>
<p>I think it should be the latter, but this needs to be made explicit in the spec.</p>
<p>Note that this doesn't only apply to optional parameters as in the above example, it applies equally, for example to</p>
<p><code>starts-with(substring=?, value=?)</code></p>
<p>While we're on the subject, we should also ask whether</p>
<p><code>concat(value83 := ?)</code></p>
<p>is legal, and if so, what it means.</p>
</div></details></div>
<div class="toot" id="created-391"><h2>Pull request #391 created<span class="toot-id"> #created-391</span></h2><div class="pubdate">11 Mar at 05:25:50 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/391">https://github.com/qt4cg/qtspecs/pull/391</a></div><details><summary>addressed typographical errors; adjusted Unicode character discussion…</summary><div class="markup"><p>… for internal local consistency, clarity</p>
<p>This being my first PR, I opted to include beyond the typos I noted in #289 another small block of hopefully uncontroversial edits as a test balloon.</p>
</div></details></div>
<div class="toot" id="created-390"><h2>Issue #390 created<span class="toot-id"> #created-390</span></h2><div class="pubdate">10 Mar at 17:59:35 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/390">https://github.com/qt4cg/qtspecs/issues/390</a></div><details><summary>Should parsing and building URIs attempt to special case Windows URIs for UNC names?</summary><div class="markup"><p>Depending on the platform and language APIs involved, we see <code>file:</code> URIs encoded in a variety of different ways. It doesn't help that there's no official RFC for <code>file:</code> URIs.</p>
<ul>
<li><code>file:/path/part</code> is a <code>file:</code> URI with no host and a path of <code>/path/part</code>.</li>
<li><code>file:///path.part</code> is a <code>file:</code> URI with an explicitly empty host and a path of <code>/path/part</code>.</li>
<li><code>file://path/part</code> is a <code>file:</code> URI with an authority of <code>path</code> and a path of <code>/part</code>. I think one common way to interpret this is as if it was <code>file:/part</code>. That is, in <code>file:</code> URIs, although a different host is possible, it's often just ignored.</li>
<li><code>c:\path\part</code> is most usefully interpreted as <code>file:/c:/path/part</code>, a <code>file:</code> URI with no host and a path of <code>/c:/path/part</code>. These are only going to be useful on a Windows system, so it isn't a problem to treat them the same way on all platforms. (Aside: I don't actually know if the path part should be <code>c:/path/part</code> instead, but it's currently got the leading slash in <code>fn:parse-uri()</code>.)</li>
</ul>
<p>And then there's this: <code>file:////name/path/part</code>.</p>
<p>One interpretation is, "look, we accept <code>file:/</code> and <code>file:///</code> so let's just accept <code>file://</code> and <code>file://///////</code>, etc. as the same." And I think that's generally right, with the single special exception of <code>file:////</code>. The problem is that on Windows, this is a very common way to encode the URI for a UNC path, that is: <code>\\name\path\part</code> which is a Windows UNC path for <code>\path\part</code> on a host named <code>name</code> (via whatever networking protocol backs UNC).</p>
<p>You'd think that this should be <code>file://name/path/part</code>, but I think because browsers and maybe other tools just discard the authority part of a <code>file:</code> URI (or maybe because these are <em>paths</em> in some Windows sense?), that's not how they're encoded.</p>
<blockquote>
<p>Aside: Yes, I'm sure you also see <code>file:\\\\name\path\part</code> and <code>file:c:\path\part</code> and other forms as well. Those are out of scope, they're simply, flatly, completely wrong. You can't use <code>\</code> as a delimiter in a URI. RFC 3986 is authoritative on this point. Step one of dealing with random strings we think should be URIs is replacing all <code>\</code> with <code>/</code> because RFC 3986.</p>
</blockquote>
<p>It's problematic to deal with <code>file:////</code> as a special case, but it's also problematic to leave out support for a common pattern on a widely deployed operating system.</p>
<p>Recognizing four slashes after <code>file:</code> and treating that specially isn't hard. The hard part is how do we encode this in the map that <code>fn:parse-uri</code> produces bearing in mind that the result should round-trip if you push it back through <code>fn:build-uri</code>.</p>
<p>Consider <code>file:////uncname/path/part</code></p>
<p>Today, that is parsed as:</p>
<pre><code>map {
  "uri": "file:////uncname/path/part",
  "scheme": "file",
  "authority": "uncname",
  "host": "uncname",
  "path": "/path/to/file",
  "path-segments": array { "", "path", "to", "file" }
}
</code></pre>
<p>and that doesn’t round trip. If you feed that to <code>fn:build-uri</code>, you get <code>file://uncname/path/part</code> and that absolutely doesn’t mean the same thing on a Windows machine.</p>
<p>We could encode the slashes in the <code>authority</code> in which case we also have to encode them in the <code>host</code> because in the presence of <code>host</code>, the <code>authority</code> isn’t used to by <code>fn:build-uri()</code>:</p>
<pre><code>map {
  "uri": "file:////uncname/path/part",
  "scheme": "file",
  "authority": "////uncname",
  "host": "////uncname",
  "path": "/path/to/file",
  "path-segments": array { "", "path", "to", "file" }
}
</code></pre>
<p>It kind of works, but it’s really ugly and it means we have a host value that is a complete kludge. It doesn’t match the RFC rules for hostnames at all.</p>
<p>The other option that occurs to me is to add a “unc-path” property to the map:</p>
<pre><code>map {
  "unc-path": true(),
  "uri": "file:////uncname/path/part",
  "scheme": "file",
  "authority": "uncname",
  "host": "uncname",
  "path": "/path/to/file",
  "path-segments": array { "", "path", "to", "file" }
}
</code></pre>
<p>That works but it introduces all sorts of possibilities for incoherent data, such as an <code>https:</code> URI with a <code>unc-path</code> flag set to <code>true()</code>.</p>
<p>What’s the right answer?</p>
<ol>
<li>Ignore the UNC path special case, it’s the users problem to deal with them.</li>
<li>Recognize them, encode the details in the <code>authority</code> and <code>host</code>.</li>
<li>Recognize them, use a special property like <code>unc-path</code>.</li>
<li>Recognize them, and do this other much better idea I have: ________________</li>
</ol>
</div></details></div>
<div class="toot" id="created-389"><h2>Issue #389 created<span class="toot-id"> #created-389</span></h2><div class="pubdate">09 Mar at 09:31:07 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/389">https://github.com/qt4cg/qtspecs/issues/389</a></div><details><summary>The fn:build-uri function needs to perform URI encoding for path and query segments</summary><div class="markup"><p>The <code>fn:parse-uri</code> function describes decoding, but the <code>fn:build-uri</code> function fails to encode.</p>
</div></details></div>
<div class="toot" id="closed-388"><h2>Issue #388 closed<span class="toot-id"> #closed-388</span></h2><div class="pubdate">08 Mar at 16:35:31 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/388">https://github.com/qt4cg/qtspecs/pull/388</a></div><p>Update the example background color in serialization</p></div>
<div class="toot" id="created-388"><h2>Pull request #388 created<span class="toot-id"> #created-388</span></h2><div class="pubdate">08 Mar at 16:25:12 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/388">https://github.com/qt4cg/qtspecs/pull/388</a></div><details><summary>Update the example background color in serialization</summary><div class="markup"><p>This PR completes my action to fix the dark blue background in examples in the serialization spec. I've made them the same as the examples in the XSLT spec which seem to have been satisfactory.</p>
</div></details></div>
<div class="toot" id="created-387"><h2>Pull request #387 created<span class="toot-id"> #created-387</span></h2><div class="pubdate">07 Mar at 21:03:39 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/387">https://github.com/qt4cg/qtspecs/pull/387</a></div><details><summary>Add compatibility notes for fn:namespace-uri-for-prefix</summary><div class="markup"><p>Action QT4CG-024-01</p>
</div></details></div>
<div class="toot" id="created-386"><h2>Pull request #386 created<span class="toot-id"> #created-386</span></h2><div class="pubdate">07 Mar at 20:32:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/386">https://github.com/qt4cg/qtspecs/pull/386</a></div><p>Action QT4CG-025-05 (markup typo)</p></div>
<div class="toot" id="created-385"><h2>Pull request #385 created<span class="toot-id"> #created-385</span></h2><div class="pubdate">07 Mar at 20:15:34 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/385">https://github.com/qt4cg/qtspecs/pull/385</a></div><details><summary>Actions QT4CG-025-07 / -08</summary><div class="markup"><p>Improves termdef markup; adds error code; updates change history appendix.</p>
</div></details></div>
<div class="toot" id="closed-355"><h2>Issue #355 closed<span class="toot-id"> #closed-355</span></h2><div class="pubdate">07 Mar at 17:19:47 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/355">https://github.com/qt4cg/qtspecs/pull/355</a></div><p>Action QT4CG-022-02 - add to imp-def-feature appendix</p></div>
<div class="toot" id="closed-370"><h2>Issue #370 closed<span class="toot-id"> #closed-370</span></h2><div class="pubdate">07 Mar at 17:19:15 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/370">https://github.com/qt4cg/qtspecs/issues/370</a></div><p>Bump XSLT version</p></div>
<div class="toot" id="closed-363"><h2>Issue #363 closed<span class="toot-id"> #closed-363</span></h2><div class="pubdate">07 Mar at 17:18:36 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/363">https://github.com/qt4cg/qtspecs/pull/363</a></div><p>Fix issue #345 - missing rules for type matching</p></div>
<div class="toot" id="closed-364"><h2>Issue #364 closed<span class="toot-id"> #closed-364</span></h2><div class="pubdate">07 Mar at 17:18:13 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/364">https://github.com/qt4cg/qtspecs/pull/364</a></div><p>Generalize switch expressions in XQuery (issue #328)</p></div>
<div class="toot" id="closed-371"><h2>Issue #371 closed<span class="toot-id"> #closed-371</span></h2><div class="pubdate">07 Mar at 17:17:34 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/371">https://github.com/qt4cg/qtspecs/pull/371</a></div><p>Issue 370: forwards and backwards compatibility for 4.0</p></div>
<div class="toot" id="minutes-03-07"><h2>QT4 CG meeting 025 draft minutes<span class="toot-id"> #minutes-03-07</span></h2><div class="pubdate">07 Mar at 17:15:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2023/03-07">https://qt4cg.org/meeting/minutes/2023/03-07</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="created-384"><h2>Issue #384 created<span class="toot-id"> #created-384</span></h2><div class="pubdate">06 Mar at 16:24:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/384">https://github.com/qt4cg/qtspecs/issues/384</a></div><details><summary>Definition of "effective value" in XSLT</summary><div class="markup"><p>The term "effective value" is defined in XSLT with a rather narrow definition in the context of attribute value templates. The term is used throughout the spec (sometimes hyperlinked, sometimes not) in a much more general sense, for example the "effective value" of an attribute is the explicit value given to the attribute, or the value after basic normalization such as whitespace stripping, or the default value if the attribute is not present.</p>
<p>This affects the determination of the correct result for test merge-021, where it is a little ambiguous whether two <code>xsl:merge-source/@order</code> attribute have the same "effective value" given that one is defaulted.</p>
</div></details></div>
<div class="toot" id="agenda-03-07"><h2>QT4 CG meeting 025 draft agenda<span class="toot-id"> #agenda-03-07</span></h2><div class="pubdate">05 Mar at 11:15:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2023/03-07">https://qt4cg.org/meeting/agenda/2023/03-07</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-383"><h2>Issue #383 created<span class="toot-id"> #created-383</span></h2><div class="pubdate">28 Feb at 17:21:13 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/383">https://github.com/qt4cg/qtspecs/issues/383</a></div><details><summary>Improve the specification of unordered comparisons in deep-equal</summary><div class="markup"><p>At <a href="https://qt4cg.org/meeting/minutes/2023/02-28.html">meeting 024</a> where PR https://github.com/qt4cg/qtspecs/pull/320 was accepted, there remained an open question of how best to specify that in some circumstances the comparisons should be made without regard to the order of (some) children.</p>
<p>Can the name of the option be improved?</p>
<p>Should the option support wildcard names?</p>
</div></details></div>
<div class="toot" id="created-382"><h2>Issue #382 created<span class="toot-id"> #created-382</span></h2><div class="pubdate">28 Feb at 17:19:32 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/382">https://github.com/qt4cg/qtspecs/issues/382</a></div><details><summary>Improve whitespace handling in deep-equal</summary><div class="markup"><p>At <a href="https://qt4cg.org/meeting/minutes/2023/02-28.html">meeting 024</a> where PR https://github.com/qt4cg/qtspecs/pull/320 was accepted, there remained an open question of how to deal with whitespace.</p>
<p>The current options can be seen as having somewhat overlapping domains. Can this be improved?</p>
</div></details></div>
<div class="toot" id="created-381"><h2>Issue #381 created<span class="toot-id"> #created-381</span></h2><div class="pubdate">28 Feb at 17:18:00 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/381">https://github.com/qt4cg/qtspecs/issues/381</a></div><details><summary>Deep-equal comparisons without errors</summary><div class="markup"><p>At <a href="https://qt4cg.org/meeting/minutes/2023/02-28.html">meeting 024</a> where PR #320 was accepted, there remained an open question of how to deal with errors.</p>
<p>On the one hand, in order for <code>fn:deep-equal</code> to be most easily used as a comparison function in the many contexts where a comparison function is required, it would be best if it simply returned <code>false()</code> rather than raising an error when incomparably items are encountered.</p>
<p>On the other hand, making "return false()" the default will mean that it is possible to construct items that are not equal to themselves, which will certainly violate the expectations of some users.</p>
<p>This conflict needs to be resolved somehow.</p>
</div></details></div>
<div class="toot" id="minutes-02-28"><h2>QT4 CG meeting 024 draft minutes<span class="toot-id"> #minutes-02-28</span></h2><div class="pubdate">28 Feb at 17:15:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2023/02-28">https://qt4cg.org/meeting/minutes/2023/02-28</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-377"><h2>Issue #377 closed<span class="toot-id"> #closed-377</span></h2><div class="pubdate">28 Feb at 14:49:28 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/377">https://github.com/qt4cg/qtspecs/issues/377</a></div><p>Published XQuery 4.0 spec renders XML predefined entities instead of literal characters</p></div>
<div class="toot" id="closed-380"><h2>Issue #380 closed<span class="toot-id"> #closed-380</span></h2><div class="pubdate">28 Feb at 14:49:27 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/380">https://github.com/qt4cg/qtspecs/pull/380</a></div><p>Removed CDATA sections around markup</p></div></div><p>See 215
            more statuses in yearly archives.</p></article></main></body></html>