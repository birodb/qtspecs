<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="agenda-05-12"><h2>QT4 CG meeting 034 draft agenda<span class="toot-id"> #agenda-05-12</span></h2><div class="pubdate">12 May at 17:10:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2023/05-12">https://qt4cg.org/meeting/agenda/2023/05-12</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="closed-48"><h2>Issue #48 closed<span class="toot-id"> #closed-48</span></h2><div class="pubdate">12 May at 12:20:36 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/48">https://github.com/qt4cg/qtspecs/pull/48</a></div><p>Create a schema-for-xslt40.xsd file for the current draft spec.</p></div>
<div class="toot" id="closed-412"><h2>Issue #412 closed<span class="toot-id"> #closed-412</span></h2><div class="pubdate">12 May at 12:14:41 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/412">https://github.com/qt4cg/qtspecs/pull/412</a></div><p>409, QT4CG-027-01: xsl:next-match</p></div>
<div class="toot" id="closed-494"><h2>Issue #494 closed<span class="toot-id"> #closed-494</span></h2><div class="pubdate">12 May at 09:39:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/494">https://github.com/qt4cg/qtspecs/pull/494</a></div><p>Remove legacy materials from the working master branch</p></div>
<div class="toot" id="closed-495"><h2>Issue #495 closed<span class="toot-id"> #closed-495</span></h2><div class="pubdate">12 May at 09:07:55 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/495">https://github.com/qt4cg/qtspecs/issues/495</a></div><p>separator example in https://qt4cg.org/specifications/xslt-40/Overview-diff.html#for-each-separator has xsl:sequence-of instead of xsl:sequence element</p></div>
<div class="toot" id="closed-498"><h2>Issue #498 closed<span class="toot-id"> #closed-498</span></h2><div class="pubdate">12 May at 09:07:54 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/498">https://github.com/qt4cg/qtspecs/pull/498</a></div><p>Fix typo, replace sequence-of with sequence</p></div>
<div class="toot" id="created-498"><h2>Pull request #498 created<span class="toot-id"> #created-498</span></h2><div class="pubdate">12 May at 08:07:34 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/498">https://github.com/qt4cg/qtspecs/pull/498</a></div><details><summary>Fix typo, replace sequence-of with sequence</summary><div class="markup"><p>Fix #495</p>
</div></details></div>
<div class="toot" id="created-497"><h2>Issue #497 created<span class="toot-id"> #created-497</span></h2><div class="pubdate">12 May at 08:03:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/497">https://github.com/qt4cg/qtspecs/issues/497</a></div><details><summary>https://qt4cg.org/specifications/xpath-functions-40/Overview-diff.html#func-map-pairs has wrong function syntax order</summary><div class="markup"><p>In https://qt4cg.org/specifications/xpath-functions-40/Overview-diff.html#func-map-pairs the explanation of the new function <code>map:pairs</code> is given as:</p>
<pre><code>map:for-each($map, ($k, $v) -&gt; {map{"key":$k, "value":$v}})
</code></pre>
<p>I think the right syntax would be <code>map:for-each($map, -&gt; ($k, $v) {map{"key":$k, "value":$v}})</code>.</p>
</div></details></div>
<div class="toot" id="closed-496"><h2>Issue #496 closed<span class="toot-id"> #closed-496</span></h2><div class="pubdate">12 May at 08:01:03 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/496">https://github.com/qt4cg/qtspecs/pull/496</a></div><p>Ignore legacy directories entirely</p></div>
<div class="toot" id="created-496"><h2>Pull request #496 created<span class="toot-id"> #created-496</span></h2><div class="pubdate">12 May at 08:00:49 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/496">https://github.com/qt4cg/qtspecs/pull/496</a></div><details><summary>Ignore legacy directories entirely</summary><div class="markup"><p>This PR is supposed to fix the action that builds PRs so that it ignores directories we never edit.</p>
</div></details></div>
<div class="toot" id="created-495"><h2>Issue #495 created<span class="toot-id"> #created-495</span></h2><div class="pubdate">12 May at 07:37:30 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/495">https://github.com/qt4cg/qtspecs/issues/495</a></div><details><summary>separator example in https://qt4cg.org/specifications/xslt-40/Overview-diff.html#for-each-separator has xsl:sequence-of instead of xsl:sequence element</summary><div class="markup"><p>While looking through the XSLT 4 draft spec, I have found the following example in https://qt4cg.org/specifications/xslt-40/Overview-diff.html#for-each-separator:</p>
<pre><code>&lt;xsl:for-each select="6, 3, 9" separator="|"&gt;
   &lt;xsl:sort select="."/&gt;
   &lt;xsl:sequence-of select="., .+1"/&gt;
&lt;/xsl:for-each&gt;
</code></pre>
<p><code>xsl:sequence-of</code> should be <code>xsl:sequence</code>.</p>
</div></details></div>
<div class="toot" id="created-494"><h2>Pull request #494 created<span class="toot-id"> #created-494</span></h2><div class="pubdate">11 May at 17:41:22 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/494">https://github.com/qt4cg/qtspecs/pull/494</a></div><details><summary>Remove legacy materials from the working master branch</summary><div class="markup"><p>This is <em>intended to be</em> an entirely uninteresting change. This PR removes a whole bunch of historical artifacts from the <code>master</code> branch, things like the requirements and use-cases documents that we aren't maintaining for QT4, the errata which don't apply to QT4, etc.</p>
<p>I will push a separate branch, <code>legacy-documentation</code>, to the repository that contains all of the the files removed by this PR so that the aren't lost and can easily be recovered. (I won't do that as a PR, I'll just push it to the repository.)</p>
<p>In the meantime, I think this trimmed down master branch works just fine and it's a lot simpler and easier to explain.</p>
<p>This PR <em>does</em> remove support for the legacy ant builds, but I doubt they've worked for a while now.</p>
</div></details></div>
<div class="toot" id="created-493"><h2>Pull request #493 created<span class="toot-id"> #created-493</span></h2><div class="pubdate">11 May at 13:24:24 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/493">https://github.com/qt4cg/qtspecs/pull/493</a></div><p>32: try/catch: New variable for all error information</p></div>
<div class="toot" id="created-492"><h2>Pull request #492 created<span class="toot-id"> #created-492</span></h2><div class="pubdate">11 May at 12:09:45 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/492">https://github.com/qt4cg/qtspecs/pull/492</a></div><details><summary>Fix examples, change filepath definition slightly</summary><div class="markup"><p>This PR fixes the examples in the <code>parse-uri()</code> function. It also makes a small change to the <code>filepath</code> property, eliding it when the scheme is known not to be file.</p>
</div></details></div>
<div class="toot" id="created-491"><h2>Pull request #491 created<span class="toot-id"> #created-491</span></h2><div class="pubdate">11 May at 11:37:09 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/491">https://github.com/qt4cg/qtspecs/pull/491</a></div><details><summary>Fix more examples in the FO 4.0 spec</summary><div class="markup"><p>Further corrections to example code in the F+O specification, found by testing (app-spec-examples in the test suite).</p>
</div></details></div>
<div class="toot" id="created-490"><h2>Issue #490 created<span class="toot-id"> #created-490</span></h2><div class="pubdate">10 May at 22:03:16 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/490">https://github.com/qt4cg/qtspecs/issues/490</a></div><details><summary>Control over schema validation in parse-xml(), doc(), etc.</summary><div class="markup"><p>I'm struggling with a problem with the stylesheet that generates QT4 tests from the examples in the function catalog, and I think it's an example of a more general problem in schema-aware processing.</p>
<p>The spec gives this example (for json-to-xml):</p>
<pre><code>The expression json-to-xml('{"x": "\\", "y": "\u0025"}', map{'escape': true()}) returns 
(with whitespace added for legibility):

&lt;map xmlns="http://www.w3.org/2005/xpath-functions"&gt;
  &lt;string escaped="true" key="x"&gt;\\&lt;/string&gt;
  &lt;string key="y"&gt;%&lt;/string&gt;
&lt;/map&gt;
</code></pre>
<p>But the test we actually generate expects the result:</p>
<pre><code>&lt;map xmlns="http://www.w3.org/2005/xpath-functions"&gt;
    &lt;string escaped="true" key="x" escaped-key="false"&gt;\\&lt;/string&gt;
    &lt;string key="y" escaped="false" escaped-key="false"&gt;%&lt;/string&gt;
&lt;/map&gt;
</code></pre>
<p>and the test is failing because the result produced by Saxon correctly excludes the <code>escaped-key="false"</code> attributes which the test is expecting. How did the attributes get there?</p>
<p>The answer is that the stylesheet is doing <code>parse-xml()</code> followed by some transformation to normalise whitespace, followed by <code>serialize()</code>. The <code>parse-xml()</code> call is invoking schema validation, which adds default attributes.</p>
<p>We probably don't want schema validation here; if we do want it, we probably don't want default attribute values to be expanded. But parse-xml() doesn't give us the choice. It says it's implementation-defined and it gives no options for the user to control it. Saxon provides configuration-level options but they aren't fine-grained enough to use here.</p>
<p>Without being able to control this, the only option seems to be for the stylesheet to transform the result to take out the defaulted attributes that the schema processor has added.</p>
<p>We need options on functions like <code>doc()</code> and <code>parse-xml()</code> to control whether and how schema validation is performed.</p>
<p>One of the options we need whenever we do validation is probably "validate+strip" - validate the input, report errors if it's invalid, but return the untyped data that was supplied to the validator, not the type-annotated data with expanded defaults.</p>
</div></details></div>
<div class="toot" id="created-489"><h2>Pull request #489 created<span class="toot-id"> #created-489</span></h2><div class="pubdate">10 May at 10:50:01 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/489">https://github.com/qt4cg/qtspecs/pull/489</a></div><p>443: Allow select attribute on xsl:[non-]matching-substring</p></div>
<div class="toot" id="closed-488"><h2>Issue #488 closed<span class="toot-id"> #closed-488</span></h2><div class="pubdate">10 May at 10:46:30 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/488">https://github.com/qt4cg/qtspecs/pull/488</a></div><p>433: Allow select attribute on xsl:[non-]matching-substring</p></div>
<div class="toot" id="created-488"><h2>Pull request #488 created<span class="toot-id"> #created-488</span></h2><div class="pubdate">10 May at 09:26:40 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/488">https://github.com/qt4cg/qtspecs/pull/488</a></div><details><summary>433: Allow select attribute on xsl:[non-]matching-substring</summary><div class="markup"><p>Allow a <code>select</code> attribute on <code>xsl:[non-]matching-substring</code> in place of the contained sequence constructor.</p>
</div></details></div>
<div class="toot" id="closed-484"><h2>Issue #484 closed<span class="toot-id"> #closed-484</span></h2><div class="pubdate">10 May at 08:01:11 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/484">https://github.com/qt4cg/qtspecs/pull/484</a></div><p>Update FO test generation stylesheet</p></div>
<div class="toot" id="closed-486"><h2>Issue #486 closed<span class="toot-id"> #closed-486</span></h2><div class="pubdate">10 May at 08:00:44 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/486">https://github.com/qt4cg/qtspecs/pull/486</a></div><p>Fix some errors in examples, as revealed by testing</p></div>
<div class="toot" id="created-487"><h2>Pull request #487 created<span class="toot-id"> #created-487</span></h2><div class="pubdate">10 May at 07:59:28 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/487">https://github.com/qt4cg/qtspecs/pull/487</a></div><details><summary>485: Predeclare the prefixes math, map, array, and err</summary><div class="markup"><p>In 3.1 XQuery processors were allowed to predeclare these prefixes; in 4.0 they are now required to do so.</p>
</div></details></div>
<div class="toot" id="created-486"><h2>Pull request #486 created<span class="toot-id"> #created-486</span></h2><div class="pubdate">09 May at 23:22:28 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/486">https://github.com/qt4cg/qtspecs/pull/486</a></div><details><summary>Fix some errors in examples, as revealed by testing</summary><div class="markup"><p>Corrects errors in examples; changes other examples to make them testable. Further test failures remain to be investigated (some may be bugs in the Saxon implementation; others require improvements to the test generation mechanism).</p>
</div></details></div>
<div class="toot" id="created-485"><h2>Issue #485 created<span class="toot-id"> #created-485</span></h2><div class="pubdate">09 May at 20:30:27 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/485">https://github.com/qt4cg/qtspecs/issues/485</a></div><details><summary>Predeclared namespaces in XQuery</summary><div class="markup"><p>XQuery defines that the prefixes xml, xs, xsi, fn, and local are predeclared, and states:</p>
<p>Additional predeclared namespace prefixes may be added to the [statically known namespaces]) by an implementation.</p>
<p>I propose that we add map, array, and math to this list, so that these can be used interoperably without pre-declaring them. It is already permitted for an implementation to do this, but it is not required. The change is backwards compatible, because user-defined namespace declarations override predeclared declarations.</p>
</div></details></div>
<div class="toot" id="created-484"><h2>Pull request #484 created<span class="toot-id"> #created-484</span></h2><div class="pubdate">09 May at 19:56:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/484">https://github.com/qt4cg/qtspecs/pull/484</a></div><details><summary>Update FO test generation stylesheet</summary><div class="markup"><p>Updates the stylesheet that generates tests from examples in the FO spec; plus supply a missing record definition in the function catalog so that it becomes ID/IDREF valid.</p>
</div></details></div>
<div class="toot" id="closed-63"><h2>Issue #63 closed<span class="toot-id"> #closed-63</span></h2><div class="pubdate">09 May at 18:31:51 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/63">https://github.com/qt4cg/qtspecs/issues/63</a></div><p>fn:slice, array:slice: Signatures, Examples</p></div>
<div class="toot" id="closed-477"><h2>Issue #477 closed<span class="toot-id"> #closed-477</span></h2><div class="pubdate">09 May at 18:31:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/477">https://github.com/qt4cg/qtspecs/pull/477</a></div><p>63: array:slice (editorial)</p></div>
<div class="toot" id="closed-29"><h2>Issue #29 closed<span class="toot-id"> #closed-29</span></h2><div class="pubdate">09 May at 18:31:12 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/29">https://github.com/qt4cg/qtspecs/issues/29</a></div><p>array:values (resolved: map:values, map:entries)</p></div>
<div class="toot" id="closed-473"><h2>Issue #473 closed<span class="toot-id"> #closed-473</span></h2><div class="pubdate">09 May at 18:27:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/473">https://github.com/qt4cg/qtspecs/issues/473</a></div><p>NaN ne NaN</p></div>
<div class="toot" id="closed-321"><h2>Issue #321 closed<span class="toot-id"> #closed-321</span></h2><div class="pubdate">09 May at 18:26:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/321">https://github.com/qt4cg/qtspecs/issues/321</a></div><p>relax $input in fn:serialize</p></div></div><p>See 847
            more statuses in yearly archives.</p></article></main></body></html>