<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2023/">2023</a>, <a href="2022/">2022</a></p><div class="toots">
<div class="toot" id="agenda-03-28"><h2>QT4 CG meeting 028 draft agenda<span class="toot-id"> #agenda-03-28</span></h2><div class="pubdate">27 Mar at 13:00:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2023/03-28">https://qt4cg.org/meeting/agenda/2023/03-28</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-410"><h2>Issue #410 created<span class="toot-id"> #created-410</span></h2><div class="pubdate">27 Mar at 10:37:57 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/410">https://github.com/qt4cg/qtspecs/issues/410</a></div><details><summary>Converting doubles to decimals, fractional digits</summary><div class="markup"><p>Adopted from a previous discussion on Slack: The result of the following computation…</p>
<pre><code class="language-xquery">&lt;x&gt;2&lt;/x&gt; + .1
</code></pre>
<p>…is serialized as <code>2.1</code>. If the result is cast to a decimal via <code>xs:decimal(&lt;x&gt;2&lt;/x&gt; + .1)</code>, <code>2.100000000000000088817841970012523233890533447265625</code> is returned, which feels counterintuitive.</p>
<p>Can we possibly change the conversion rules without compromising backward-compatibility?</p>
</div></details></div>
<div class="toot" id="created-409"><h2>Issue #409 created<span class="toot-id"> #created-409</span></h2><div class="pubdate">26 Mar at 11:13:36 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/409">https://github.com/qt4cg/qtspecs/issues/409</a></div><details><summary>XSLT: xsl:next-match and xsl:apply-imports interaction with on-multiple-match</summary><div class="markup"><p>(This is an oversight in the XSLT 3.0 specification.)</p>
<p>It is possible for <code>xsl:next-match</code> or <code>xsl:apply-imports</code> to encounter a conflict - two template rules with the same precedence and priority. In this situation it should do exactly what <code>xsl:apply-templates</code> does when it encounters a conflict, for example it should follow the rules of <code>xsl:mode/@on-multiple-match</code>.</p>
<p>This is all fairly obvious, but it should be stated explicitly (and tested). The spec is written as if conflicts can only occur when finding the first matching rule, and not when finding next-match rules.</p>
</div></details></div>
<div class="toot" id="closed-392"><h2>Issue #392 closed<span class="toot-id"> #closed-392</span></h2><div class="pubdate">24 Mar at 11:00:07 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/392">https://github.com/qt4cg/qtspecs/issues/392</a></div><p>Partial function application: Placeholders with keywords</p></div>
<div class="toot" id="created-408"><h2>Pull request #408 created<span class="toot-id"> #created-408</span></h2><div class="pubdate">24 Mar at 10:29:55 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/408">https://github.com/qt4cg/qtspecs/pull/408</a></div><details><summary>Fix issue #398 (clash with constructor functions)</summary><div class="markup"><p>Add clarification to XSLT and XQuery specs to say that a used-defined function must not clash with a constructor function for an imported atomic type.</p>
</div></details></div>
<div class="toot" id="created-407"><h2>Issue #407 created<span class="toot-id"> #created-407</span></h2><div class="pubdate">23 Mar at 11:39:34 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/407">https://github.com/qt4cg/qtspecs/issues/407</a></div><details><summary>XSLT-specific context properties used in function items</summary><div class="markup"><p>I just stumbled across the fact that current-group#0 doesn't work: see the note in 14.2.1 that says:</p>
<blockquote>
<p>Like other XSLT extensions to the dynamic evaluation context, the [current group] is not retained as part of the closure of a function value. This means that the expression current-group#0 is valid and returns a function value, but any invocation of this function will fail with a dynamic error [see [ERR XTDE1061].</p>
</blockquote>
<p>This restriction is unnecessary and we should remove it. As people become more accustomed to using function items, they don't want to hit restrictions like this, and there's really no good implementation reason for it.</p>
</div></details></div>
<div class="toot" id="created-406"><h2>Pull request #406 created<span class="toot-id"> #created-406</span></h2><div class="pubdate">22 Mar at 18:03:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/406">https://github.com/qt4cg/qtspecs/pull/406</a></div><details><summary>Revise xsl:array instruction and examples</summary><div class="markup"><p>This PR revises the design of the xsl:array instruction to align it with the recently agreed specs for the functions <code>array:members</code> and <code>array:of</code>. The <code>composite</code> attribute and the <code>xsl:array-member</code> instruction are dropped; instead the instruction takes a <code>use</code> attribute which is an expression used to compute each array member value from the corresponding item in the value of the select expression or sequence constructor.</p>
</div></details></div>
<div class="toot" id="closed-405"><h2>Issue #405 closed<span class="toot-id"> #closed-405</span></h2><div class="pubdate">21 Mar at 18:12:11 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/405">https://github.com/qt4cg/qtspecs/pull/405</a></div><p>MK PR #360 with merge conflicts resolved (array compositionand decomposition)</p></div>
<div class="toot" id="created-405"><h2>Pull request #405 created<span class="toot-id"> #created-405</span></h2><div class="pubdate">21 Mar at 18:01:30 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/405">https://github.com/qt4cg/qtspecs/pull/405</a></div><details><summary>MK PR #360 with merge conflicts resolved (array compositionand decomposition)</summary><div class="markup"><p>Close #360</p>
<p>This PR is the same as 360 but fixes merge conflicts.</p>
<p>Accepted at <a href="https://qt4cg.org/meeting/minutes/2023/03-21.html#pr-360">meeting 027</a></p>
<p>Close https://github.com/qt4cg/qtspecs/issues/314</p>
</div></details></div>
<div class="toot" id="closed-400"><h2>Issue #400 closed<span class="toot-id"> #closed-400</span></h2><div class="pubdate">21 Mar at 17:19:13 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/400">https://github.com/qt4cg/qtspecs/issues/400</a></div><p>Priorities for type-based patterns</p></div>
<div class="toot" id="closed-401"><h2>Issue #401 closed<span class="toot-id"> #closed-401</span></h2><div class="pubdate">21 Mar at 17:18:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/401">https://github.com/qt4cg/qtspecs/pull/401</a></div><p>Issue 400: ranking of type patterns</p></div>
<div class="toot" id="closed-395"><h2>Issue #395 closed<span class="toot-id"> #closed-395</span></h2><div class="pubdate">21 Mar at 17:17:23 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/395">https://github.com/qt4cg/qtspecs/pull/395</a></div><p>Make the (non-)hierarchical nature of URIs explicit</p></div>
<div class="toot" id="closed-394"><h2>Issue #394 closed<span class="toot-id"> #closed-394</span></h2><div class="pubdate">21 Mar at 17:17:05 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/394">https://github.com/qt4cg/qtspecs/pull/394</a></div><p>Minor correction to fn:parse-uri</p></div>
<div class="toot" id="closed-393"><h2>Issue #393 closed<span class="toot-id"> #closed-393</span></h2><div class="pubdate">21 Mar at 17:16:47 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/393">https://github.com/qt4cg/qtspecs/pull/393</a></div><p>Clarify explanations of functions/function items</p></div>
<div class="toot" id="closed-391"><h2>Issue #391 closed<span class="toot-id"> #closed-391</span></h2><div class="pubdate">21 Mar at 17:16:14 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/391">https://github.com/qt4cg/qtspecs/pull/391</a></div><p>addressed typographical errors; adjusted Unicode character discussion…</p></div>
<div class="toot" id="agenda-03-21"><h2>QT4 CG meeting 027 draft agenda<span class="toot-id"> #agenda-03-21</span></h2><div class="pubdate">21 Mar at 10:30:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2023/03-21">https://qt4cg.org/meeting/agenda/2023/03-21</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-404"><h2>Pull request #404 created<span class="toot-id"> #created-404</span></h2><div class="pubdate">20 Mar at 15:59:39 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/404">https://github.com/qt4cg/qtspecs/pull/404</a></div><details><summary>Rework changes from action-qt4cg-019-01 to resolve persistent conflicts.</summary><div class="markup"><p>I reworked these (purely editorial) changes based on the current master to try and resolve the conflicts once and for all.</p>
</div></details></div>
<div class="toot" id="created-403"><h2>Pull request #403 created<span class="toot-id"> #created-403</span></h2><div class="pubdate">20 Mar at 15:26:46 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/403">https://github.com/qt4cg/qtspecs/pull/403</a></div><p>Michaelhkay actions 2023 02 01</p></div>
<div class="toot" id="created-402"><h2>Issue #402 created<span class="toot-id"> #created-402</span></h2><div class="pubdate">20 Mar at 00:31:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/402">https://github.com/qt4cg/qtspecs/issues/402</a></div><details><summary>XSLT patterns: intersect and except</summary><div class="markup"><p>I would like to propose making an incompatible change to the semantics of XSLT patterns using the "except" and "intersect" operators, so that they have their intuitive meaning.</p>
<p>Consider the pattern <code>p except appendix//p</code>. Anyone writing this probably imagines that this will match any <code>p</code> element that does not have an <code>appendix</code> as an ancestor. The intuitive meaning of <code>A except B</code> is to match anything that matches<code>A</code> unless it also matches <code>B</code>.</p>
<p>The actual meaning in the XSLT 3.1 specification is that it matches any node <code>$N</code> that has an ancestor <code>$A</code> such that the result of the XPath expression <code>$A//(p except appendix//p)</code> includes <code>$N</code>.</p>
<p>Consider the XML</p>
<pre><code>&lt;appendix&gt;
  &lt;div&gt;
     &lt;p&gt;...&lt;/p&gt;
  &lt;/div&gt;
&lt;/appendix&gt;
</code></pre>
<p>The <code>&lt;p&gt;</code> element here has an ancestor (the <code>&lt;div&gt;</code> element) where the result of <code>$A//(p except appendix//p)</code> includes the <code>&lt;p&gt;</code> element. So despite having an ancestor <code>appendix</code> this element matches the pattern <code>p except appendix//p</code>. This is not only a counter-intuitive result, it also makes such patterns useless in practice.</p>
<p>Patterns using <code>intersect</code> suffer the same problem, though it is much harder to construct a plausible example.</p>
<p>Patterns that only use the child or attribute axis, for example <code>@* except @code</code>, or <code>* except note</code>, don't suffer from this problem and will retain the same meaning as in 3.1.</p>
<p>The required effect can be achieved by writing <code>p except p[ancestor::appendix]</code>. Because the pattern <code>p[ancestor::appendix]</code> is equivalent to <code>appendix//p</code>, people are very likely to imagine that <code>p except p[ancestor::appendix]</code> is equivalent to <code>p except appendix//p</code>.</p>
<p>Making any incompatible change to the language semantics should be done only with a very strong justification, but I believe that it is justified in this instance. The existing semantics are not only counter-intuitive, they are also sufficiently useless that it is extremely unlikely anyone has existing working code, other than artificial test cases, that relies on the current semantics.</p>
</div></details></div>
<div class="toot" id="closed-387"><h2>Issue #387 closed<span class="toot-id"> #closed-387</span></h2><div class="pubdate">19 Mar at 11:10:26 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/387">https://github.com/qt4cg/qtspecs/pull/387</a></div><p>Add compatibility notes for fn:namespace-uri-for-prefix</p></div>
<div class="toot" id="closed-385"><h2>Issue #385 closed<span class="toot-id"> #closed-385</span></h2><div class="pubdate">19 Mar at 11:09:25 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/385">https://github.com/qt4cg/qtspecs/pull/385</a></div><p>Actions QT4CG-025-07 / -08</p></div>
<div class="toot" id="closed-378"><h2>Issue #378 closed<span class="toot-id"> #closed-378</span></h2><div class="pubdate">19 Mar at 11:06:41 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/378">https://github.com/qt4cg/qtspecs/pull/378</a></div><p>Update the localName and unparsed entity reference notes for parse-html</p></div>
<div class="toot" id="created-401"><h2>Pull request #401 created<span class="toot-id"> #created-401</span></h2><div class="pubdate">15 Mar at 22:02:24 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/401">https://github.com/qt4cg/qtspecs/pull/401</a></div><details><summary>Issue 400: ranking of type patterns</summary><div class="markup"><p>Proposes how to handle type-based match patterns (record tests, in particular) in the absence of explicit priorities, basing the decision on the type hierarchy. Note: user-defined priorities are always considered before any inferred selectivity rules. Also fixes some grammar problems with type patterns. See Issue #400.</p>
</div></details></div>
<div class="toot" id="created-400"><h2>Issue #400 created<span class="toot-id"> #created-400</span></h2><div class="pubdate">15 Mar at 08:13:04 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/400">https://github.com/qt4cg/qtspecs/issues/400</a></div><details><summary>Priorities for type-based patterns</summary><div class="markup"><p>XSLT §6.6 currently has a big TODO:</p>
<p>TODO: define default priorities for type patterns, as suggested in https://www.saxonica.com/papers/xmlprague-2020mhk.pdf section 6.5.1</p>
<p>We need to plug this gap. [Note: it's worth reading that cited section as it points out some of the difficulties].</p>
<p>I'm going to suggest an alternative approach. Rather than allocating a numeric priority to patterns such as <code>record(lat, long)</code>, we allocate them a relative priority -- called their <code>selectivity</code> -- based on the subtype relationship among types. This is a partial ordering. So we extend the rule that currently orders patterns by (1) import precedence, (2) priority, (3) declaration order, to become instead (1) import precedence, (2) selectivity, (3) priority, (4) declaration order.</p>
<p>Type-based patterns (such as <code>type(xs:integer)</code>, <code>record(lat, long)</code>) are defined to have higher selectivity than any non-type-based pattern; all the latter (that is, all XSLT 3.1 patterns) are defined to have equal selectivity, which means the rules for discriminating among 3.1 patterns are unchanged.</p>
<p>For type-based patterns, we define that a pattern based on type T has higher selectivity than a pattern based on type U if T is a subtype of U. If neither is a subtype of the other, then they have equal selectivity.</p>
<p>The type pattern <code>type(T)</code> followed by one or more predicates is deemed to have higher selectivity than type(T) with no predicates, but apart from this, the predicates are ignored. Explicit numeric priorities can be used to define an ordering among type patterns that have the same selectivity.</p>
</div></details></div>
<div class="toot" id="created-399"><h2>Issue #399 created<span class="toot-id"> #created-399</span></h2><div class="pubdate">15 Mar at 03:31:46 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/399">https://github.com/qt4cg/qtspecs/issues/399</a></div><details><summary>FO: Using Multilevel Hierarchy and Abstraction when designing and specifying complex functions, such as deep-equal</summary><div class="markup"><p>Whenever a function is too-complex, its precise and clear specification becomes problematic and the complexity results in huge volume of text that is difficult to fathom, understand and the correctness of whose meaning becomes less and less obvious.</p>
<p>Solving this problem would benefit all groups of readers, be they future implementors or just curious XPath enthusiasts.</p>
<p>Here I present one well-known and successfully tried in practice solution, which the Romans summarized in the phrase: "<strong><em>Divide et Impera</em></strong>" ("Divide and conquer")</p>
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Philip-ii-of-macedon.jpg/330px-Philip-ii-of-macedon.jpg">
<p>Below is one possible splitting of the functionality of <strong><a href="https://qt4cg.org/pr/395/xpath-functions-40/autodiff.html#func-deep-equal">fn:deep-equal</a></strong> into different smaller and simpler functions on 5 levels, each level possibly dispatching to a function on  another level. The intermediate-level functions each have their own value and could be used independently of <strong>fn:deep-equal</strong> and of each other. Even though there is the possibility of recursion, we can still get a simple picture and immediate understanding of this functionality, just playing with the following collapsible/expandable representation (click on the corresponding arrow), which fits on a single screen:</p>
<h2>(writing the full specification from this animated picture is left as an exercise for the reader 😂</h2>
<details>
    <summary>deep-equal-sequence</summary>
	  <blockquote>
          <details>
				 <summary>deep-equal-item</summary>
					  <blockquote>
	  					  <p>deep-equal-atomic</p>
						  <details>
								<summary>deep-equal-map</summary>
								  <blockquote>
										  <p>deep-equal-atomic</p>
										  <p>deep-equal-sequence</p>
								  </blockquote>
						  </details>
						  <details>
							  <summary>deep-equal-array</summary>
								  <blockquote>
										  <p>deep-equal-sequence</p>
								  </blockquote>
						  </details>
						  <details>
							  <summary>deep-equal-node</summary>
								  <blockquote>
										  <p>deep-equal-document</p>
										  <details>										  
											  <summary>deep-equal-element</summary>
												  <blockquote>
													  <p>deep-equal-attribute</p>
													  <p>deep-equal-NS</p>
													  <p>deep-equal-PI</p>
													  <p>deep-equal-comment</p>
													  <p>deep-equal-text-node</p>
												  </blockquote>
										  </details>										  
										  <p>deep-equal-attribute</p>
										  <p>deep-equal-NS</p>
										  <p>deep-equal-PI</p>
										  <p>deep-equal-comment</p>
										  <p>deep-equal-text-node</p>
								  </blockquote>
						  </details>
					  </blockquote>
		  </details>
	  </blockquote>
  </details>
</div></details></div>
<div class="toot" id="created-398"><h2>Issue #398 created<span class="toot-id"> #created-398</span></h2><div class="pubdate">14 Mar at 23:39:13 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/398">https://github.com/qt4cg/qtspecs/issues/398</a></div><details><summary>User-defined functions clashing with constructor functions</summary><div class="markup"><p>There is no explicit rule in either XQuery or XSLT that a user-defined function must not clash (in name and arity) with a constructor function for an imported atomic type. It's implicit in the rule that you can't have two conflicting functions in the static context, but it would be helpful to say so explicitly and define an error code.</p>
<p>I have added tests to the XSLT3 and XQuery3 test suites.</p>
<p>See also Saxon bug 5921 - https://saxonica.plan.io/issues/5921</p>
</div></details></div>
<div class="toot" id="created-397"><h2>Issue #397 created<span class="toot-id"> #created-397</span></h2><div class="pubdate">14 Mar at 21:46:13 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/397">https://github.com/qt4cg/qtspecs/issues/397</a></div><details><summary>Type names</summary><div class="markup"><p>The draft specifications propose the introduction of item type declarations that can associate a name with an item type. The feature probably still needs some work, which this issue aims to explore.</p>
<p>The main purpose of introducing named item types is that the ItemType for a record structure or a function signature can become quite complex and lengthy, and you don't want to have to repeat them every time they are used because it means you have to make the same change everywhere when a change occurs. Another motivation is to allow type definitions (for example, of records or functions) to be recursive.</p>
<p>I considered allowing named sequence types rather than just item types, but the rules for where you can and can't have an occurrence indicator get complicated, so I pulled back from that.</p>
<p>It seems natural to say:</p>
<ul>
<li>Item type names are QNames</li>
<li>In XPath, type names (and their mapping to item types) appear in the static context</li>
<li>In XQuery, type names follow the conventions for global variables and function declarations. That suggests they can appear either in the main module or a library module; in a library module they must be in the namespace of the module; they can be annotated as %public or %private; an <code>import module</code> declaration makes the name visible in the importing module.</li>
<li>In XSLT, a name declared in a module is automatically available throughout the stylesheet package, and can be exposed to other packages using the same visibility mechanisms as other stylesheet components. However, I don't think it makes sense to allow a type name to be overridden, either using import precedence or using xsl:override.</li>
</ul>
<p>The question then arises, should item type names be in the same "symbol space" as named atomic and union types? There seem to be several options here:</p>
<p>(a) Item type names are in a different symbol space from atomic types; the are no rules barring the same name being used for a named item type and an atomic type, and they are disambiguated by requiring item type names to be distinguished using some kind of marker syntax such as <code>type(name)</code>, rather than just a bare name.
(b) Item type names are in the same symbol space as atomic types, which means there must be a rule that an item type name must not be the same as an atomic type name that is visible in the same place. We could try and define this rule for individual names, or at the level of namespaces (if there are any atomic/union types in a particular namespace in the static context of any module, then there must be no declared type names in that namespace in that module, either declared in that module or imported from another module).
(c) Atomic type names "shadow" item type names, or vice versa: if the same name is used for both, then one of them takes precedence. Probably not a good idea.</p>
<p>I'm inclined to go for (b). Note that a simple rule that item type names can't be in a reserved namespace will prevent conflict for all non-schema-aware applications, since those applications only access atomic types in the <code>xs</code> namespace.</p>
<p>Now, what about circular definitions?</p>
<p>There are legitimate circular definitions, like <code>declare item type LIST = record(payload as item()*, next? as LIST)</code>, and there are "impossible" definitions, like <code>declare item type THING = THING</code>. Do we have to define the rules needed to ban "impossible" definitions, or can we just leave it that the determination of whether something is an instance of THING is non-terminating? I think we probably need to define the rules, which will require careful thought.</p>
<p>Where can item type names be used? The simple answer is: anywhere an ItemType is allowed. But what about contexts that only allow some ItemTypes and not others? For example, (a) "cast as", (b) as arguments of a LocalUnionType, (c) as the key type in a map type. (The solution in the current draft is that the syntax allows any ItemType to be used in these contexts, and there are semantic rules to constrain what kind of item types are allowed).</p>
<p>If we allow <code>$v cast as my:X</code> where <code>my:X</code> is a declared item type name, should we also allow the constructor function  <code>my:X($v)</code>? That would presumably also mean that item type names and function names cannot overlap.</p>
<p>Should we define any "built-in" item type names? We've been defining built-in functions (such as build-uri and parse-uri) whose signatures use record type definitions. Should we define built-in names for these record definitions?</p>
<p>An editorial issue: I think it's becoming increasingly difficult to get away with overloading the word <code>ItemType</code> to mean both the abstract concept of an item type, and the specific BNF construct used to define it. Same for <code>SequenceType</code>. I think we should probably move to having a defined term "item type" and a BNF construct such as <code>ItemTypeDesignator</code> to represent the two separate meanings.</p>
</div></details></div>
<div class="toot" id="minutes-03-14"><h2>QT4 CG meeting 026 draft minutes<span class="toot-id"> #minutes-03-14</span></h2><div class="pubdate">14 Mar at 17:20:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2023/03-14">https://qt4cg.org/meeting/minutes/2023/03-14</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="created-396"><h2>Pull request #396 created<span class="toot-id"> #created-396</span></h2><div class="pubdate">13 Mar at 18:04:50 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/396">https://github.com/qt4cg/qtspecs/pull/396</a></div><details><summary>Deep-equal, no failure when comparing functions</summary><div class="markup"><p>Refines the spec of fn:deep-equal so it no longer fails when comparing function items, rather it returns a result which in general is implementation-dependent, though it must be false unless the functions are provably equivalent.</p>
</div></details></div>
<div class="toot" id="created-395"><h2>Pull request #395 created<span class="toot-id"> #created-395</span></h2><div class="pubdate">13 Mar at 11:50:35 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/395">https://github.com/qt4cg/qtspecs/pull/395</a></div><details><summary>Make the (non-)hierarchical nature of URIs explicit</summary><div class="markup"><p>The <code>fn:parse-uri</code> function will parse hierarchical or non-hierarchical URIs, however, the parse cannot be reversed if the <code>fn:build-uri</code> function doesn't know whether the scheme is hierarchical. Consider <code>fn:parse-uri("querty:abc")</code>:</p>
<pre><code>map {
  "path":"abc",
  "scheme":"querty",
  "path-segments":["abc"],
  "uri":"querty:abc"
}
</code></pre>
<p>When <code>fn:build-uri</code> parses that map, it produces: <code>querty://abc</code> because the scheme is not known to be non-hierarchical.</p>
<p>This PR changes <code>fn:parse-uri</code> so that it records whether or not the URI was hierarchical and <code>fn:build-uri</code> to use that information.</p>
<p>It's possible that we could finesse this by setting the <code>authority</code> to the empty string for hierarchical URIs, but it seems clearer to be explicit.</p>
<p>This PR also fixes a bug. Previously, if the <code>scheme</code> was not present when building a URI, the URI began with <code>//</code>. That's an error. If the scheme isn't present, there should be no <em>scheme separator</em>.</p>
</div></details></div></div><p>See 242
            more statuses in yearly archives.</p></article></main></body></html>