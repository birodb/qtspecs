<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 012 Minutes 2022-11-22</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 012 Minutes 2022-11-22</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/9]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[8/13]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a></li>
<li><a href="#next-meeting">1.3. Next meeting</a></li>
<li><a href="#approve-minutes">1.4. Approve minutes of the previous meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[7/8]</code></a></li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#pr-data-model">2.1. Review pull request #232: Data model clarifications, issue #225</a></li>
<li><a href="#xsl-conditionals">2.2. Review pull request #237: XSL conditionals</a></li>
<li><a href="#pr-qt4cg-011-01">2.3. Review pull request #247</a></li>
<li><a href="#pr-items-at">2.4. Review pull request #249: fn:items-at, issue #213</a></li>
<li><a href="#pr-fn-foot">2.5. Review pull request #250: fn:foot, etc.</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
</ul>
</div>
</div>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Minutes</h2>
<div class="outline-text-2" id="text-minutes">
<p>
Approved <a href="./11-29.html">at meeting 013</a> on 29 November 2022.
</p>
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/9]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-012-01: MK to add a reference to the place in XSD where it says that value spaces are non-overlapping</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-012-02: MK to point out the rules for union types are actually a bit more complex than described in section 2.2.1.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-012-03: MK to consider introducing schema element and schema element in 2.8</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-012-04: MK to add “and also of other specific function types” to 2.8.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-012-05: NW to see if the presentation of the type hierarchy tables can be improved.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-012-06: MK to remove <code>xs:untyped</code> from the paragraph at the top of 2.8.2</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-012-07: NW to work with MK to sort out the server build issues with PR #237</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-012-08: NW to put the coercion rule changes on the agenda next week.</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[8/13]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
Regrets BTW, JL
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Anthony (Tony) Bufort (AB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK) [0:20-]</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="off"><code>[&#xa0;]</code> John Lumley (JL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="off"><code>[&#xa0;]</code> Liam Quin (LQ)</li>
<li class="off"><code>[&#xa0;]</code> Adam Retter</li>
<li class="on"><code>[X]</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="off"><code>[&#xa0;]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2022/11-22.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.3.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting <a href="../../agenda/2022/11-29.html">is scheduled for Tuesday, 29 November</a>.
</p>

<p>
Regrets: JL
</p>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.4.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2022/11-15.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[7/8]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="on"><code>[X]</code> QT4CG-011-01: MK to fix the reference to “function” in XPath 4.4.1.
<ul class="org-ul">
<li><a href="https://qt4cg.org/dashboard/#pr-247">pull request #247</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-011-02: CG to work with DN to propose an “until” variant.
<ul class="org-ul">
<li>Withdrawn, <a href="https://lists.w3.org/Archives/Public/public-xslt-40/2022Nov/0022.html">https://lists.w3.org/Archives/Public/public-xslt-40/2022Nov/0022.html</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-011-03: MK to change the references to URI qualified name in both QName-related functions.
<ul class="org-ul">
<li><a href="https://qt4cg.org/dashboard/#pr-247">pull request #247</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-011-04: NW to define the parse-uri/build-uri record types in a separate section
<ul class="org-ul">
<li><a href="https://lists.w3.org/Archives/Public/public-xslt-40/2022Nov/0021.html">https://lists.w3.org/Archives/Public/public-xslt-40/2022Nov/0021.html</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-011-05: NW to update the history for parse-uri/build-uri to indicate that details are still being resolved
<ul class="org-ul">
<li><a href="https://lists.w3.org/Archives/Public/public-xslt-40/2022Nov/0021.html">https://lists.w3.org/Archives/Public/public-xslt-40/2022Nov/0021.html</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-011-06: NW to make sure ednotes are rendered.
<ul class="org-ul">
<li><a href="https://lists.w3.org/Archives/Public/public-xslt-40/2022Nov/0021.html">https://lists.w3.org/Archives/Public/public-xslt-40/2022Nov/0021.html</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-011-07: NW to make sure the meeting passcode is on the logistics page
<ul class="org-ul">
<li>This is already the case</li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-pr-data-model" class="outline-3">
<h3 id="pr-data-model"><span class="section-number-3">2.1.</span> Review pull request #232: Data model clarifications, issue #225</h3>
<div class="outline-text-3" id="text-pr-data-model">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-232">pull request #232</a> 
</p>

<ul class="org-ul">
<li>MK: Mostly in response to MSM’s comment about better description of data
values and type annotations
<ul class="org-ul">
<li>… Cleaned up the Introduction; added missing definitions</li>
<li>… Added 2.2 Basic Concepts</li>
<li>… Tried to make minimal changes</li>
<li>… We do use the terms value and sequence synonymously, nothing we
can do about that.</li>
<li>… “Instance of the data model” is a synonym for sequence</li>
<li>… Define “item type”</li>
<li>… Cleaned up the term “tree”</li>
<li>… Changed definition of atomic value to say it’s a pair of a type
annotation and a datum.</li>
<li>… Clarified that datums cannot have overlapping value spaces</li>
</ul></li>
</ul>

<p>
ACTION QT4CG-012-01: MK to add a reference to the place in XSD where it says that value spaces are non-overlapping
</p>

<ul class="org-ul">
<li>MSM: I thought value spaces did overlap</li>
<li>MK: If you use identity, the value spaces don’t overlap.</li>
<li>MSM: I would have thought it was simpler to say that a given datum
may appear in more than one value space, but as an atomic value,
they are different.</li>
<li>DN: Maybe it would be good to list explicitly all the primitive atomic types.</li>
</ul>

<p>
General agreement that the atomic types are listed in the spec later on.
</p>

<ul class="org-ul">
<li>MK continues
<ul class="org-ul">
<li>… Note that type annotation means slightly different things for
nodes and atomic values.</li>
<li>… Defined “schema type”</li>
<li>… Attempt to clarify the relationship between schema types and item types</li>
</ul></li>

<li>RD: Suggests changing the prose to make it clear that “pure union
types” are only of atomic types.</li>
<li>MK: We need to come back to that, I’m avoiding it here for the moment.</li>
</ul>

<p>
ACTION QT4CG-012-02: MK to point out the rules for union types are actually a bit more complex than described in section 2.2.1.
</p>

<ul class="org-ul">
<li>MK continues
<ul class="org-ul">
<li>… Getting away from the idea that every item has a most specific
item type.</li>
<li>… Every item is an instance of one or more item types</li>
<li>… Atomic values do have a most specific item type</li>
</ul></li>

<li>RD: Because you’re using item type syntax, “document()” needs to be
“document-node()” etc.</li>
<li>MK: Right.</li>
</ul>

<p>
Some discussion of wether or not all attributes are instances of <code>attribute(*)</code>.
</p>

<p>
ACTION QT4CG-012-03: MK to consider introducing schema element and schema element in 2.8
</p>

<ul class="org-ul">
<li>MSM: Is there just one function type?</li>
<li>MK: No, it will also be an instance of a more general function type
based on co-variance and contra-variance.</li>
<li>MSM: Then adding that there are also other types, parallel to the
wording for maps.</li>
</ul>

<p>
ACTION QT4CG-012-04: MK to add “and also of other specific function types” to 2.8.
</p>

<ul class="org-ul">
<li>MK: The data model tended to assume that all types are named; I’ve
added a few notes about anonymous types.</li>
<li>DN: Maybe say they don’t have “permanent names”</li>
<li>MK: If they do have names, the names aren’t exposed.</li>
<li>DN: We don’t have a “type object” in the data model; I think we
should add one.</li>
<li>RD: In the formal semantics for XPath and XQuery 1.0, there was an
XPath- and XQuery-like formulation of the XML schema data model.</li>
<li>MK: I haven’t looked at that spec for a very long time; I’ll take
another look.</li>
<li>MSM: I have one concern which is that I seem to remember that in the
early days of the QT work, the formalists said that it complicates
things too much if we say that types sometimes have a name and
sometimes don’t, so we’re just going to assume they always do. So my
concern about this note is that we don’t want to introduce a
pervasive problem.</li>
<li>MK: That’s scattered about a bit, but no where do we explicitly say
that.</li>
<li>MSM: As we work through the specs, everyone please keep an eye open
for ramifications.</li>
</ul>

<p>
ACTION QT4CG-012-05: NW to see if the presentation of the type hierarchy tables can be improved.
</p>

<ul class="org-ul">
<li>RD: Should we be specifying the value space of the untyped- and
any-typed types?</li>
<li>MK: Yes, probably. I haven’t made any changes in that area.
<ul class="org-ul">
<li>… There’s an error here, <code>xs:untyped</code> is not an atomic type.</li>
</ul></li>
</ul>

<p>
ACTION QT4CG-012-06: MK to remove <code>xs:untyped</code> from the paragraph at the top of 2.8.2
</p>

<ul class="org-ul">
<li>MSM: To address RD’s concern, I don’t know what the value space of
untypedAtomic is. The value space that seems obvious to me is that
untypedAtomic has the union of the value spaces of all the primitive
types. That was explicitly suggested by the schema working group,
but the QT group said “nah”.</li>
<li>RD: Wouldn’t untypedAtomic be better being the same value space as <code>xs:string</code>?</li>
<li>MSM: That’s ok for the lexical space, but for the value space,
shouldn’t the assignment of a more specific type be a refinement?
Typing an <code>xs:string</code> as an <code>xs:integer</code> is not a refinement.</li>
<li>RD: But the infoset-mapping section says that an attribute or text
value has a “data” type that’s of <code>xs:untypedAtomic</code>. It doesn’t make
sense there to say the union of all possible types.</li>
<li>MK: We always describe moving from an untypedAtomic to something
else as “casting”.</li>
<li>RD: Also, the casting rules treat <code>xs:string</code> and <code>xs:untypedAtomic</code>
identically.</li>
<li>MK: They’re identical for nearly all purposes except for the
behavior of the coercion rules.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-xsl-conditionals" class="outline-3">
<h3 id="xsl-conditionals"><span class="section-number-3">2.2.</span> Review pull request #237: XSL conditionals</h3>
<div class="outline-text-3" id="text-xsl-conditionals">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-237">pull request #237</a>
</p>

<ul class="org-ul">
<li>MK: I did a revised PR that was responsive to the actions I was
given, but also went a little further. It builds locally but not on
the server.</li>
</ul>

<p>
ACTION QT4CG-012-07: NW to work with MK to sort out the server build issues with PR #237
</p>
</div>
</div>

<div id="outline-container-pr-qt4cg-011-01" class="outline-3">
<h3 id="pr-qt4cg-011-01"><span class="section-number-3">2.3.</span> Review pull request #247</h3>
<div class="outline-text-3" id="text-pr-qt4cg-011-01">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-247">pull request #247</a> which resolves MK actions QT4CG-011-01 and QT4CG-011-03
</p>

<ul class="org-ul">
<li>MK: The first is completely trivial, just a one word change.</li>
</ul>

<p>
On review, these are just markup fixes.
</p>

<p>
Proposal: Accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-items-at" class="outline-3">
<h3 id="pr-items-at"><span class="section-number-3">2.4.</span> Review pull request #249: fn:items-at, issue #213</h3>
<div class="outline-text-3" id="text-pr-items-at">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-249">pull request #249</a>
</p>

<ul class="org-ul">
<li>MK reviews <code>fn:items-at()</code>
<ul class="org-ul">
<li>… One doubt I had is that the most common use is going to be a
single number, so it’s not clear if <code>item-at</code> would be better. But
I used the plural.</li>
<li>… The use cases for this are primarily where the square bracket
predicate notation gives you problems with the context item.</li>
<li>… The use cases for returning multiple items are sometimes
equivalent to subsequence</li>
<li>… One point of detail is should this be like substring and
subsequence and take <code>xs:double</code> instead of integers.</li>
<li>… We had a big debate about this with respect to functions we
added before. I think we got that right, the explicit cast is
useful and the cases where it’s needed are quite rare.</li>
<li>… If you use <code>xs:double</code> you have to talk about what happens if
it’s not an exact whole number.</li>
</ul></li>
<li>CG: How about <code>xs:nonNegativeInteger</code>?</li>
<li>MK: Yes, once we get the coercion rules sorted out.</li>
<li>MSM: I can still cast to <code>xs:integer</code>, yes?</li>
<li>MK: Yes, if we accept the change to the coercion rules.</li>
<li>DN: I think it might be useful to allow negative integers, which
take from the end, like Python</li>
<li>DN: We should add a corresponding array function, <code>fn:members-at()</code>?</li>
<li>MK: If we do add negative numbers, we should add it everywhere that
it’s appropriate, for example <code>fn:remove()</code>.</li>
</ul>

<p>
ACTION QT4CG-012-08: NW to put the coercion rule changes on the agenda next week.
</p>

<p>
NW asks if there’s any possibility of harmonizing arrays and sequences
for functions?
</p>

<ul class="org-ul">
<li>MK: I’ve proposed a way to parcel and unparcel arrays and sequences
so that it’s easier. But it’s hard to make that nice and usable
without explicit parceling.</li>
<li>RD: If we had explicit union types, we could…</li>
<li>MK: No, we couldn’t, we have this wretched problem that an array is
a sequence of length one.</li>
</ul>

<p>
Returning to items-at…
</p>

<ul class="org-ul">
<li>CD: I think doubles would be better than integers because that would
make it easier to rewrite predicates to this function. But you could
say that was an optimization issue not something a user has to be
concerned about?</li>
</ul>

<p>
The CG is not moved to make that change.
</p>

<p>
Proposal: Accept this PR
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-fn-foot" class="outline-3">
<h3 id="pr-fn-foot"><span class="section-number-3">2.5.</span> Review pull request #250: fn:foot, etc.</h3>
<div class="outline-text-3" id="text-pr-fn-foot">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-250">pull request #250</a>
</p>

<ul class="org-ul">
<li>DN: I find the names not good, especially <code>truncate</code>. Where
<code>head</code> / <code>tail</code> make a pair, <code>foot</code> / <code>truncate</code> don’t. I proposed <code>heel</code>. We
could also consider <code>root</code> / <code>stalk</code>. The other thing that’s more serious
is that the corresponding functions for arrays will raise exceptions
when the first argument is the empty sequence, but here we’re
returning the empty sequence. The semantics are not similar. I think
an additional argument that has a default to raise an exception.</li>
<li>MK: The issue of array bounds checking is a very good issue and a
very difficult one. I think it’s indefensible that we have array
bounds checking on arrays and not sequences. It’s a classic working
group kind of artifact that introduces an enormous non-orthogonality
in the language. At the same time, that’s a problem that’s
enormously difficult to fix. I tend to want to keep things
consistent whenever possible.</li>
</ul>

<p>
Out of time.
</p>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<ul class="org-ul">
<li>RD: Can folks look over my parse-html PR?</li>
<li>MK: That’s good work, and needs careful review.</li>
<li>CG: I proposed in email that we could reference issues from the QT
specs with the hash symbol and a number. Then we’d get linking from
PRs to issues and commits.</li>
<li>NW: Good idea.</li>
</ul>
</div>
</div>
</div>
</body>
</html>
