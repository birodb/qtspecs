<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 008 Minutes 2022-10-25</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 008 Minutes 2022-10-25</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/6]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[10/13]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a></li>
<li><a href="#next-meeting">1.3. Next meeting</a></li>
<li><a href="#approve-minutes">1.4. Approve minutes of the previous meeting</a></li>
<li><a href="#review-of-actions">1.5. Review of open action items <code>[4/7]</code></a></li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#pr-variadic-functions">2.1. Review pull request #197 (was 166; variadic functions)</a></li>
<li><a href="#pr-items-before">2.2. Review pull request #199 (was 177; items before, etc.)</a></li>
<li><a href="#pr-subtyping">2.3. Review pull request #202 (was 196; subtyping)</a></li>
<li><a href="#pr-fn-qname">2.4. Review pull request #207: new fn:QName#1 variant</a></li>
<li><a href="#pr-typeswitch">2.5. Review pull request #217</a></li>
<li><a href="#pr-parse-uri">2.6. Review pull request #215</a></li>
<li><a href="#issue-96">2.7. Issue #96, starting/ending sequence functions</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
</ul>
</div>
</div>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Minutes</h2>
<div class="outline-text-2" id="text-minutes">
<p>
Approved <a href="./11-01.html">at meeting 009</a> on 1 November 2022.
</p>
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/6]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-005-03: RD to review the variadic functions proposal in #197 (formerly #166)</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-007-05: NW to make an issue for Martin’s proposed ammendment to map:build</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-008-01: MK to review RD’s comments on PR #202</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-008-02: NW to review MKs comments on PR #215</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-008-03: MK to make a PR for issue #96, starts|ends-with-sequence</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[10/13]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
Regrets: BTW, JK expected at [0:15]
</p>

<ul class="org-ul">
<li class="on"><code>[X]</code> Anthony (Tony) Bufort (AB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK) [0:15-]</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> John Lumley (JL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="off"><code>[&#xa0;]</code> Liam Quin (LQ)</li>
<li class="off"><code>[&#xa0;]</code> Adam Retter</li>
<li class="on"><code>[X]</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="off"><code>[&#xa0;]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Chair</i>. <i>Scribe</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2022/10-25.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.3.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting <a href="../../agenda/2022/11-01.html">is scheduled for Tuesday, 1 November</a>. Any regrets?
</p>

<p>
Note well: next week, the United Kingdom and Europe will no longer be
on daylight saving time. Please confirm the meeting time in your time
zone!
</p>

<ul class="org-ul">
<li>DN: I may have to leave at half past the hour.</li>
</ul>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.4.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2022/10-18.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-review-of-actions" class="outline-3">
<h3 id="review-of-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[4/7]</code></h3>
<div class="outline-text-3" id="text-review-of-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-005-03: RD to review the variadic functions proposal in #197 (formerly #166)
<ul class="org-ul">
<li>Reviewed the previous version; just started looking at it from the updated revision</li>
<li>I have noticed that PR contains various other commits (NW thinks this is rebasing)</li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-008-01: MK to implement the resolution of issue #165 (“:=” and no “$”)
<ul class="org-ul">
<li>Absorbed into the current version of the variadic proposal</li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-008-02: NW to fix or replace #199, it doesn’t reflect the original correctly
<ul class="org-ul">
<li><a href="https://lists.w3.org/Archives/Public/public-xslt-40/2022Oct/0046.html">https://lists.w3.org/Archives/Public/public-xslt-40/2022Oct/0046.html</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-008-03: NW to make the GitHub PR link to the diffs
<ul class="org-ul">
<li>Automation withdrawn, <a href="https://lists.w3.org/Archives/Public/public-xslt-40/2022Oct/0047.html">https://lists.w3.org/Archives/Public/public-xslt-40/2022Oct/0047.html</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-008-04: RD to review pull request #202
<ul class="org-ul">
<li>Completed.</li>
</ul></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-008-05: NW to make an issue for Martin’s proposed ammendment to map:build
<ul class="org-ul">
<li>Continued</li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-pr-variadic-functions" class="outline-3">
<h3 id="pr-variadic-functions"><span class="section-number-3">2.1.</span> Review pull request #197 (was 166; variadic functions)</h3>
<div class="outline-text-3" id="text-pr-variadic-functions">
<ul class="org-ul">
<li>See <a href="https://qt4cg.org/#pr-197">pull request #197</a> (you’ll find links to formatted versions of the specs at <a href="https://qt4cg.org/">https://qt4cg.org/</a>).</li>
<li>See also the nexus of issues <a href="https://github.com/qt4cg/qtspecs/issues/162">#162</a>, <a href="https://github.com/qt4cg/qtspecs/issues/161">#161</a>, <a href="https://github.com/qt4cg/qtspecs/issues/160">#160</a>, <a href="https://github.com/qt4cg/qtspecs/issues/159">#159</a>, <a href="https://github.com/qt4cg/qtspecs/issues/158">#158</a>, <a href="https://github.com/qt4cg/qtspecs/issues/157">#157</a>, and <a href="https://github.com/qt4cg/qtspecs/issues/155">#155</a>.</li>
<li>See the discussion from <a href="../../minutes/2022/10-11.html#pr-variadic-functions">two weeks ago</a> and <a href="../../minutes/2022/10-18.html#pr-variadic-functions">last week</a>.</li>
</ul>

<p>
Anything to discuss today?
</p>

<ul class="org-ul">
<li>MK: There’s been useful feedback: minor technical corrections and editorial suggestions.
<ul class="org-ul">
<li>I think I can implement those and make a draft everyone will accept</li>
</ul></li>
<li>MSM: The rules for binding arguments to parameters say something to
the effect that at such-and-such a point all the arguments will be
optional, but that’s not true.</li>
<li>MK: Yes, we need a new rule that says that’s an error.</li>
<li>MSM: I’d like to read it one more time.</li>
</ul>

<p>
MK will update the PR to address feedback.
</p>

<p>
The expectation is that we’ll have a proposal we can all accept by
next week and we’ll propose to accept it. Please review it before the
meeting.
</p>
</div>
</div>

<div id="outline-container-pr-items-before" class="outline-3">
<h3 id="pr-items-before"><span class="section-number-3">2.2.</span> Review pull request #199 (was 177; items before, etc.)</h3>
<div class="outline-text-3" id="text-pr-items-before">
<ul class="org-ul">
<li>See <a href="https://qt4cg.org/#pr-199">pull request #199</a></li>
<li>Updated by NW to correct the errors <a href="../../minutes/2022/10-18.html#pr-items-before">observed last week</a>.</li>
</ul>

<p>
Mike gives a brief tour, scrolls through the diffs to F&amp;O.
</p>

<ul class="org-ul">
<li>MK: We’re proposing <code>fn:items-before()</code>, <code>fn:items-after()</code>,
<code>fn:items-starting-where()</code> and <code>fn:items-ending-where()</code>
<ul class="org-ul">
<li>… Minor typo, <code>fn:items-after()</code> uses <code>fn:items-before()</code> in an
example.</li>
</ul></li>
<li>RD: Where these say “the function then returns”, that could be misinterpreted.</li>
<li>MSM: It kind of has to be that way because we first define <code>$P</code>.</li>
</ul>

<p>
Agreement that both paragraphs are connected.
</p>

<ul class="org-ul">
<li>MK: These functions are all obviously very similar.</li>
<li>JL: Am I correct in thinking the difference between the ‘where’ and
‘before’ and ‘after’ versions from before is whether the boundary is
included or not?</li>
<li>MK: Yes.</li>
<li>CG: I had a fairly general comment in the original issue <a href="https://github.com/qt4cg/qtspecs/issues/149">#149</a>. I
note that many languages have functions <code>take-while()</code> and
<code>drop-while()</code> that do more or less the same thing. My basic
question is, do we need to reinvent the wheel, or would there be
value in using the existing function names and semantics?</li>
<li>MK: Sometimes names from other lanaguages just don’t fit our
conventions at all. I don’t see any particular problems with
<code>take-while()</code> and <code>drop-while()</code> except that they don’t immediately
suggest ot me where the boundary condition is.</li>
<li>MSM: I like names that are noun-phrases, not verb phrases.</li>
<li>MK: We do have some function names that are imperative verbs…we aren’t consistent.</li>
<li>MSM: Yes, but when faced with a choice…</li>
</ul>

<p>
Proposal: accept these with the correction to the example?
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-subtyping" class="outline-3">
<h3 id="pr-subtyping"><span class="section-number-3">2.3.</span> Review pull request #202 (was 196; subtyping)</h3>
<div class="outline-text-3" id="text-pr-subtyping">
<ul class="org-ul">
<li>See <a href="https://qt4cg.org/#pr-202">pull request #202</a></li>
</ul>

<p>
Mike reviews.
</p>

<ul class="org-ul">
<li>MK: This primarily affects the XPath spec and text that’s common to XQuery.
<ul class="org-ul">
<li>… This is essentially editorial, straying into technical choices about how things are stated.</li>
<li>… It doesn’t change any of the semantics.</li>
<li>… Main purpose was to clarify the presentaiton of the subtyping rules.</li>
<li>… Also fixing a bug raised against 3.1 in terms of a reliance on
things having a most specific dynamic type which isn’t true for
functions, for example.</li>
<li>… Trying to get rid of the reference to the dynamic type of a
value; it doesn’t compare the type, it just determines if the
sequence type matches.</li>
</ul></li>
</ul>

<p>
Some discussion of how the phrase “this is a subtype of” relates to
the comparision of types and the comparison of values with types.
</p>

<ul class="org-ul">
<li>MK: In 3.6.2, we see some new defined terms used.
<ul class="org-ul">
<li>… Added reference to the subtyping rules</li>
<li>… The main thing in 3.7 is that the very long list of 35 bullet
points has been expanded into subsections with headers and
examples. I’ve also introduced some notation to try to make the
charts clearer. (Not usefully presented in the diff!)</li>
<li>… It assumes we’re going to agree enumeration types</li>
<li>… If I’ve got it right, none of the rules have changed!</li>
</ul></li>
<li>RD: I’ve included these in my reviews, but in the section on union
type matching, I found it confusing. There’s an example of where two
types can be different because of the union member ordering. I think
you meant to swap one of the type member orderings because they’re
the same order but you have the cast as…</li>
<li>MK: Yes, I remember you pointing that out…</li>
<li>RD: I’m referring to section 3.7; in the second note about subtype
not being acyclic. The two unions are the same, I think you meant to
flip one of them.</li>
<li>MK: Yes, I think that’s right.</li>
<li>RD: I also tried to make the wording a bit clearer in my review
comments. I also have some comments about a couple of bugs that
might be in the general rules.</li>
<li>MK: Give me an action to review RD’s comments on this proposal.</li>
</ul>

<p>
ACTION QT4CG-008-01: MK to review RD’s comments on PR #202
</p>

<p>
Note from scribe: what follows is a bit confused; MSM was having
issues with audio so this is partly transcribed from chat and partly
read out from chat.
</p>

<ul class="org-ul">
<li>MSM: I am concerned about the assumption that all atomic types which
contain a given atomic value have a meet (greatest lower bound)
which is in the type lattice. That may be true (I think it is but
haven't thought much) for the built-ins, but it is not guaranteed
for all schema-defined atomic types</li>
<li>MK: I think the point here is that it relates to the discussion we
just had on one of the GitHub reviews. We’re never concerned about
whether or not type contains a value. They’re constructed with a
particular type. The fact that a value would be valuid as an
<code>xs:short</code> for example, is irrelevant if it’s constructed as an
<code>xs:positiveInteger</code>. It’s not an instance of an <code>xs:short</code> even if it
would validate as one!</li>
<li>MSM: For atomic values in particular, there is always one dynamic
type that is specifically associated with the value, so we can refer
to the dynamic type of an atomic value without ambiguity; this will
be a subtype of all the other types that it matches.</li>
<li>MK: I think that’s true.</li>
<li>MSM: That’s from the dynamic evalutaion phase.</li>
</ul>

<p>
We’ll come back to this next week.
</p>
</div>
</div>

<div id="outline-container-pr-fn-qname" class="outline-3">
<h3 id="pr-fn-qname"><span class="section-number-3">2.4.</span> Review pull request #207: new fn:QName#1 variant</h3>
<div class="outline-text-3" id="text-pr-fn-qname">
<ul class="org-ul">
<li>See <a href="https://qt4cg.org/#pr-207">pull request #207</a></li>
</ul>

<p>
Mike continues to drive…
</p>

<ul class="org-ul">
<li>MK: We exend the semantics of <code>fn:QName</code> to take one or two arguments.
<ul class="org-ul">
<li>… When we have the proposal on variadic functions accepted, we’ll
still have two functions because the arguments are different</li>
<li>… This departs from our usual precedent that the different
fucntions have corresponding arguments and some are defaulted.</li>
<li>… In this case, the <b>meaning</b> of the first argument is different between the two variants</li>
<li>… The two argument form is unchanged.</li>
<li>… the single argument form is new and does what it says. In
particular, it provides a way to build QNames from EQNames.</li>
</ul></li>
<li>JL: Since this is effectivley two different functions that produce
the same type output, I’m not sure they should have the same name.
It’s counter to what we’ve done before. I’d have <code>qName-from-EQName</code>
for the first one. Otherwise, what do you do with currying on the
first argument?</li>
<li>MK: I think it’s just so conveneint to be able to construct a QName
from an NCName or an EQName with a function calle <code>fn:QName</code> that
any other name seems contorted.</li>
<li>RD: Can’t you do the first two bits from <code>xs:QName</code>?</li>
<li>MK: Yes, but I thought it was convenient here to have one function that does it all
<ul class="org-ul">
<li>… One, because it’s eaier to remember</li>
<li>… Two, you don’t want to have to work out what kind of input you have before you decide what to call.</li>
</ul></li>
<li>RD: Couldn’t we have <code>fn:parseQName()</code>, consistent with <code>fn:parseXML()</code>?</li>
<li>MK: We could do that.</li>
<li>RD: That would make it clearer what it’s doing. I think of
<code>fn:QName</code> as constructing a QName given an namespace URI and a
local name.</li>
</ul>

<p>
In chat, JK gives +1 to the suggestion. MSM agrees.
</p>

<ul class="org-ul">
<li>DN: Isn’t this what an <code>xs:QName()</code> constructor does?</li>
<li>MK: We don’t have a constructor for the EQName string.</li>
<li>DN: Can’t we redefine the constructor?</li>
<li>MK: No, it has to be consistent with XSD.</li>
</ul>

<p>
Consensus leans towards two functions. No one objects.
</p>

<p>
Proposal: Address the single argument functionality with a new function named <code>fn:parseQName()</code>.
</p>

<p>
Accepted.
</p>

<p>
Mike will submit a PR. If we get a couple of approvals and no
objections after a couple of days, we’ll regard it as accepted and
merge it without further discussion next week.
</p>
</div>
</div>

<div id="outline-container-pr-typeswitch" class="outline-3">
<h3 id="pr-typeswitch"><span class="section-number-3">2.5.</span> Review pull request #217</h3>
<div class="outline-text-3" id="text-pr-typeswitch">
<ul class="org-ul">
<li>See <a href="https://github.com/qt4cg/qtspecs/pull/217">pull request #217</a></li>

<li>MK: This fixes a bug in the grammar.</li>
</ul>

<p>
Proposal: Accept this PR.
</p>

<p>
Accepted.
</p>

<ul class="org-ul">
<li>DN: Why are all the specs changed?</li>
<li>NW: They aren’t; it’s impossible to tell what specs will be changed,
so we have to build them all.</li>
</ul>
</div>
</div>

<div id="outline-container-pr-parse-uri" class="outline-3">
<h3 id="pr-parse-uri"><span class="section-number-3">2.6.</span> Review pull request #215</h3>
<div class="outline-text-3" id="text-pr-parse-uri">
<ul class="org-ul">
<li>See <a href="https://qt4cg.org/#pr-215">pull request #215</a></li>

<li>MK: What’s the status here? I made some comments…</li>
<li>NW: Apologies, I missed them.</li>
</ul>

<p>
ACTION QT4CG-008-02: NW to review MKs comments on PR #215
</p>
</div>
</div>

<div id="outline-container-issue-96" class="outline-3">
<h3 id="issue-96"><span class="section-number-3">2.7.</span> Issue #96, starting/ending sequence functions</h3>
<div class="outline-text-3" id="text-issue-96">
<p>
MK <a href="https://lists.w3.org/Archives/Public/public-xslt-40/2022Oct/0017.html">proposes</a> that <a href="https://github.com/qt4cg/qtspecs/issues/96">this issue</a> may be ready to be decided.
</p>

<ul class="org-ul">
<li>DN: This is a sequence generalization of the string functions
<code>fn:starts-with()</code> and <code>fn:ends-with()</code>. I’ve provided an
implementation for all the exmples in pure XPath. Everything should
be clear. I think these are useful convenience functions.</li>
<li>MK: Any reason not to include a contains sequence function?</li>
<li>DN: There is <a href="https://github.com/qt4cg/qtspecs/issues/94">another issue</a> about that because there are questions
about contiguous or not-contiguious subsequences.</li>
<li>DN: I thought that when we were are looking at the argument types
question, we could have at least a flag that says treat a string as a
sequence of codepoints. If we had this, then we could have just
these functions on sequences.</li>
<li>RD: That wouldn’t work for collations.</li>
<li>MK: It would only work for the Unicode codepoint collation.</li>
</ul>

<p>
Some discussion of the names.
</p>

<p>
JK: This could be useful if we’re really going to introduce composite keys in maps. It’d be easy to check in a key.
</p>

<p>
ACTION QT4CG-008-03: MK to make a PR for issue #96, starts|ends-with-sequence
</p>

<ul class="org-ul">
<li>DN: I want to draw your attention to the compare argument which
probably we could think about having a better default after we have
decided about options on the <code>fn:deep-equal()</code> function. We want
this function to return false and not raise an error.</li>
<li>MK: We can do that by using <code>fn:deep-equal</code> and using partial apply.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<ul class="org-ul">
<li>JL: Heads up, in two weeks time at least three of us will be at <a href="https://declarative.amsterdam/">Declarative Amsterdam</a>.</li>
</ul>
</div>
</div>
</div>
</body>
</html>
