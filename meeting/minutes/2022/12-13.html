<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 015 Minutes 2022-12-13</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 015 Minutes 2022-12-13</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/7]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[7/14]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a></li>
<li><a href="#next-meeting">1.3. Next meeting</a></li>
<li><a href="#approve-minutes">1.4. Approve minutes of the previous meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[3/4]</code></a></li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#issue-281">2.1. Issue 281</a></li>
<li><a href="#pr-array-index-where">2.2. Review pull request #258: add array:index-where (issue #114)</a></li>
<li><a href="#pr-parse-html">2.3. Review pull request #259: parse-html (issue #74)</a></li>
<li><a href="#pr-fn-char">2.4. Review pull request #261: fn:char (issue #121)</a></li>
<li><a href="#pr-type-diagrams">2.5. Review pull request #268: type diagrams (issue #265)</a></li>
<li><a href="#pr-xslt-function-override">2.6. Review pull request #279: Rewrite XSLT §10.3.4 (function overriding) for clarity</a></li>
<li><a href="#pr-grammar-if-then-else">2.7. Review pull request #284: Grammar for if-then w/o else</a></li>
<li><a href="#issue-170">2.8. Issue #170, XPath “otherwise” operator</a></li>
<li><a href="#issue-114">2.9. Issue #114, array:index-where</a></li>
<li><a href="#issue-107">2.10. Issue #107, allow self::(a|b|c)</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
<li><a href="#adjourned">4. Adjourned</a></li>
</ul>
</div>
</div>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/7]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-014-01: MK to propose new <code>try-get</code> functions for arrays, maps, and (maybe) sequences</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-015-01: MK to change the name of the argument to <code>array:index-where</code> from <code>$input</code> to <code>$array</code></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-015-02: NW to improve the width of the diagrams, perhaps multiple views</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-015-03: NW to make sure the direction of the arrow is in the legend</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-015-04: NW to investigate of a dynamic presentation is practical</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-015-05: MK to raise a PR to resolve issue #107, self::(a|b|c)</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[7/14]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
Regrets: BTW, CG, RD, and EP.
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Anthony (Tony) Bufort (AB)</li>
<li class="off"><code>[&#xa0;]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Sasha Firsov (SF)</li>
<li class="off"><code>[&#xa0;]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK) [0:25-]</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> John Lumley (JL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="off"><code>[&#xa0;]</code> Ed Porter (EP)</li>
<li class="off"><code>[&#xa0;]</code> Liam Quin (LQ)</li>
<li class="off"><code>[&#xa0;]</code> Adam Retter</li>
<li class="on"><code>[X]</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="off"><code>[&#xa0;]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
</ul>

<p>
Welcome Sasha Firsov. A brief round of introductions.
</p>

<ul class="org-ul">
<li>SF: I’m trying to be an open source contributor and web developer.
Doing architectural work, trying to put some work on W3C in order to
make decorated web applications a thing. When multiple
applications from different vendors meet on the same page, there are
technologies we need. Transformation is an essential part of that.
I’m hoping to make a bridge between HTML DOM and XSLT communities.</li>
<li>NW: Works for Saxonica. Been doing XML since there was XML. I worked
on the XProc specification.</li>
<li>JL: Spent seven years working for Saxonica. Wrote the XSLT compiler
and XPath 3 compiler.</li>
<li>MSM: Got interested in declarative markup in the late 1980s. Worked
on XML. Worked for W3C for a decade. Spent time on various working
groups.</li>
<li>MK: I haven’t been in the game as long as NW and MSM, only about 20
years. I’ve beeen developing Saxon all that time and became editor of the
XSLT spec on version 2.0.</li>
<li>DN: I have been active in the XML space for maybe 20 years. Maybe
I’m most well known for the FXSL library for XSLT 1.0 then 2.0. Did
some presentations at conferences. I represented Microsoft on the
XSLT WG, but for the last 10 years I’ve been actively pushing for
pure XPath programming. You can see more about me by looking at the
proposals I’ve submitted.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2022/12-13.html">the agenda</a>.
</p>

<ul class="org-ul">
<li>NW: We’ll skip the parse-html PR in RD’s absence.</li>

<li>DN: Two meetings ago, I was tasked with an action item, to clarify
the way function arguments are evaluated when a function returns a
function. I’d like to talk about issue #281.</li>
</ul>

<p>
Accepted with those amendments.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.3.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting <a href="../../agenda/2022/12-20.html">is scheduled for Tuesday, 20 December</a>.
</p>

<p>
No regrets heard.
</p>

<p>
Reminder, the CG Will not meet on 27 December or 3 January.
</p>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.4.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2022/12-06.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[3/4]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group
<ul class="org-ul">
<li>Continued</li>
</ul></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-014-01: MK to propose new <code>try-get</code> functions for arrays, maps, and (maybe) sequences
<ul class="org-ul">
<li>Continued</li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-014-02: MK to draft a spec for <code>array:exists()</code> and <code>array:empty()</code> functions</li>
<li class="on"><code>[X]</code> QT4CG-014-03: MK to update PR #250 with the new names</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-issue-281" class="outline-3">
<h3 id="issue-281"><span class="section-number-3">2.1.</span> Issue 281</h3>
<div class="outline-text-3" id="text-issue-281">
<ul class="org-ul">
<li>DN: Consider <a href="https://github.com/qt4cg/qtspecs/issues/281#issuecomment-1336491005">this comment</a> on the issue: if, in <code>$f($x)($y)</code>, is it
possible for <code>$y</code> to be evaluated before <code>$f($x)</code>? If <code>$f($x)</code>
returns a constant function, is it still possible for <code>$y</code> to be
evaulated? What do the current rules say?</li>
<li>MK: I’m reading section 4.4.2.1, evaluating dynamic function calls.
Step 1 is to evaluate the base expression, <code>$f($x)</code> to get a
function, then we ask if the arity matches the number in the
argument list. It doesn’t so we raise a type error. Step 2 says that
we evaluate the arguments. I think in a numbered list we assume the
items are performed in the order of the list.</li>
<li>DN: There were new rules for coertion which were proposed. According
to those rules, a type error would not be raised.</li>
<li>MK: There’s no coercion here because we’re not binding the result to
a variable or function argument.</li>
<li>DN: But this is the result of the function, and coercion rules
apply there too. So we’re expecting a 1 argument function and we get a
0 argument function. That would be wrapped in a function.</li>
<li>MK: That would be true if they were applied, but I don’t think they
are.</li>
<li>MSM: You’re (DN) saying that <code>$f($x)</code> is supposed to be a one
argument function, then we’ll coerce it to be one. But we can’t know
that here, so we won’t coerce it. Do we have a declaration for <code>$f</code>
that it is a one argument function that returns a one argument
function?</li>
<li>DN: My understanding is, the way the expression is written, it
expects the evaulation of <code>$f</code> to return a one argument function. My
understanding is that if it returns a constant function, we shouldn’t throw an
arity expression. Maybe we should add a rule that there is no arity
exception. This is explicitly writing a partial function evaluation.</li>
<li>SF: It’s about integrity of the language. There are a few different
things. If <code>$f</code> returns another function or “none”, we could make
the evaluation of <code>$y</code> conditional on that invocation. Consider
JavaScript’s “?.”. Do you want <code>$x</code> and <code>$y</code> both to be evaluated?
That’s a question for the programmer. If you do want to evaluate
both, you would create a function that will accept arguments <code>$x</code>
and <code>$y</code>, then invoke <code>$f</code> inside that. Quite often folks in
software development, use the arguments just to assure that it’s
evaluated. In JavaScript, you can use a comma separator which means
everything will be evaluated.</li>
<li>DN: If you could add your comment to this thread, that might be
easier to understand. I just wanted to pose the question, I think
the right answer is that <code>$y</code> shouldn’t be evaluated until the result
of <code>$f</code> is returned.</li>
<li>NW: I thought Mike’s prose was clear about the order, but it’s
unclear about the arity.</li>
<li>MSM: Do we do lists in order?</li>
<li>MK: It’s certainly true that if the first raises an error, you don’t
do the second.</li>
<li>MSM: Unless otherwise specified, shouldn’t an implementation be
<i>allowed</i> to evaluate <code>$y</code> greedily?</li>
<li>MK: We don’t have that level of formality in the specifications.</li>
<li>DN: I think this particular example should be in the specification.</li>
<li>NW: Let’s take this up again next week. Several folks who commented
on the thread aren’t here today.</li>
<li>JL: I’ve been looking at 4.4.4, the function coercion rules, is DN
suggesting that the type of the left hand thing is determined by the
existence of the argument. Because it has a single arity, he’s
implying that the function coercion rules apply, and I can’t see
that.</li>
<li>DN: I’ve asked several times, if the coercion rules apply only to
the function or to the return value. I’ve been consistently told
that it applies to the return.</li>
<li>MK: But they only apply where there’s a declared required type. In
this case, there’s an implicit requirement (like a + operator
implicitly requires a number), but there isn’t an explicit type.</li>
<li>DN: Then my proposal is to think about changing the rules, because I
think this is only logical. Why should we make any kind of exclusion
from the rules here?</li>
<li>MK: It’s a tenable situation, we could apply that rule here.</li>
<li>MSM: If we declare <code>$f</code> as an arity one function that returns an
arity one function, then presumably the coercion rules do apply.</li>
<li>DN: This seems like casting in C#.</li>
</ul>

<p>
Some further discussion of how the new corecion rules apply before
breaking off until next week.
</p>
</div>
</div>

<div id="outline-container-pr-array-index-where" class="outline-3">
<h3 id="pr-array-index-where"><span class="section-number-3">2.2.</span> Review pull request #258: add array:index-where (issue #114)</h3>
<div class="outline-text-3" id="text-pr-array-index-where">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-258">pull request #258</a>
</p>

<p>
Mike leads us through the change.
</p>

<ul class="org-ul">
<li>MK: There was a comment that <code>$input</code> should be named <code>$array</code>.</li>
</ul>

<p>
ACTION QT4CG-015-01: MK to change the name of the argument to <code>array:index-where</code> from <code>$input</code> to <code>$array</code>
</p>

<p>
Proposal: accept this PR with the name change.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-parse-html" class="outline-3">
<h3 id="pr-parse-html"><span class="section-number-3">2.3.</span> Review pull request #259: parse-html (issue #74)</h3>
<div class="outline-text-3" id="text-pr-parse-html">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-259">pull request #259</a>
</p>

<p>
Skipped this week.
</p>
</div>
</div>

<div id="outline-container-pr-fn-char" class="outline-3">
<h3 id="pr-fn-char"><span class="section-number-3">2.4.</span> Review pull request #261: fn:char (issue #121)</h3>
<div class="outline-text-3" id="text-pr-fn-char">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-261">pull request #261</a>
</p>

<p>
Skipped this week.
</p>
</div>
</div>

<div id="outline-container-pr-type-diagrams" class="outline-3">
<h3 id="pr-type-diagrams"><span class="section-number-3">2.5.</span> Review pull request #268: type diagrams (issue #265)</h3>
<div class="outline-text-3" id="text-pr-type-diagrams">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-268">pull request #268</a>
</p>

<p>
Norm introduces the diagrams.
</p>

<ul class="org-ul">
<li>MK: It would be nice if they were scaled to fit.</li>
<li>NW: Yes, but then they’d illegible.</li>
<li>SF: There are other techniques that could be used to make them fit.</li>
<li>NW: Yes, but these are generated, so manual positioning isn’t a practical option.</li>
<li>DN: How about rotating the wide one 90 degrees?</li>
<li>NW: Maybe. But only if we rotate the text too, otherwise the first
row is too wide.</li>
<li>MSM: Two suggestions and a question. For the first figure, make the
lgend verical. The secondl ooks promising to me, I think you might
be able to get what you need by specifying three ranks. My question
is, what is the meaning of the directional arrow? I wonder if people
will find it more intiutive if the arrow meant
is-the-parent-of/basetype-of and went the other way.</li>
<li>NW: I did it that way because thaty’s the way they were in 3.1.</li>
</ul>

<p>
Some discussion of UML conventions.
</p>

<ul class="org-ul">
<li>MSM: I think arrows going the other way would be a little more
intuitive, but the meaning of the directional arrow should be in
the legend.</li>
<li>MK: UML does them that way, whether you like it or not</li>
<li>MSM: Okay.</li>
<li>JK: Maybe just do an XML tree for the really wide diagram?</li>
</ul>

<p>
Proposal: these diagrams are an improvement, accept this PR
</p>

<p>
Accepted
</p>

<p>
ACTION QT4CG-015-02: NW to improve the width of the diagrams, perhaps multiple views
ACTION QT4CG-015-03: NW to make sure the direction of the arrow is in the legend
</p>

<ul class="org-ul">
<li>DN: There are a number of JavaScript controls that provide expanding
and collapsing.</li>
</ul>

<p>
ACTION QT4CG-015-04: NW to investigate of a dynamic presentation is practical
</p>
</div>
</div>

<div id="outline-container-pr-xslt-function-override" class="outline-3">
<h3 id="pr-xslt-function-override"><span class="section-number-3">2.6.</span> Review pull request #279: Rewrite XSLT §10.3.4 (function overriding) for clarity</h3>
<div class="outline-text-3" id="text-pr-xslt-function-override">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-279">pull request #279</a>
</p>

<ul class="org-ul">
<li>MK: This is just an attempt to clarify the presentation; there
aren’t any tehcnical changes.
<ul class="org-ul">
<li>… We’ve taken a section that bundled together three things about
overriding and made them separate.</li>
<li>… There are rules about package import precedence, extension
functions, and then override in a used package.</li>
</ul></li>
</ul>

<p>
Proosal: Accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-grammar-if-then-else" class="outline-3">
<h3 id="pr-grammar-if-then-else"><span class="section-number-3">2.7.</span> Review pull request #284: Grammar for if-then w/o else</h3>
<div class="outline-text-3" id="text-pr-grammar-if-then-else">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-284">pull request #284</a>
</p>

<p>
Skipped this week.
</p>
</div>
</div>

<div id="outline-container-issue-170" class="outline-3">
<h3 id="issue-170"><span class="section-number-3">2.8.</span> Issue #170, XPath “otherwise” operator</h3>
<div class="outline-text-3" id="text-issue-170">
<p>
MK <a href="https://lists.w3.org/Archives/Public/public-xslt-40/2022Oct/0017.html">proposes</a> that <a href="https://github.com/qt4cg/qtspecs/issues/170">this issue</a> may be ready to be decided.
</p>

<ul class="org-ul">
<li>MK: Does anyone remember why we postponed this issue? There’s no
explicit action waiting to be done.</li>
</ul>

<p>
No, we don’t. NW to make sure it’s higher on the agenda next week.
</p>
</div>
</div>

<div id="outline-container-issue-114" class="outline-3">
<h3 id="issue-114"><span class="section-number-3">2.9.</span> Issue #114, array:index-where</h3>
<div class="outline-text-3" id="text-issue-114">
<p>
MK <a href="https://lists.w3.org/Archives/Public/public-xslt-40/2022Oct/0017.html">proposes</a> that <a href="https://github.com/qt4cg/qtspecs/issues/114">this issue</a> may be ready to be decided
</p>

<p>
Resolved by the earlier PR.
</p>
</div>
</div>

<div id="outline-container-issue-107" class="outline-3">
<h3 id="issue-107"><span class="section-number-3">2.10.</span> Issue #107, allow self::(a|b|c)</h3>
<div class="outline-text-3" id="text-issue-107">
<p>
MK <a href="https://lists.w3.org/Archives/Public/public-xslt-40/2022Oct/0017.html">proposes</a> that <a href="https://github.com/qt4cg/qtspecs/issues/107">this issue</a> may be ready to be decided.
</p>

<ul class="org-ul">
<li>MK: Is this worth doing? I don’t want to spend the time on the PR
unless there’s general agreement that it’s a good idea.</li>
<li>MSM: How much violence does this do to the grammar?</li>
<li>MK: Not much, it just allows a union.</li>
<li>MSM: As long as we can be sure it isn’t ambiguious.</li>
</ul>

<p>
ACTION QT4CG-015-05: MK to raise a PR to resolve issue #107, self::(a|b|c)
</p>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<p>
None heard.
</p>
</div>
</div>

<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">4.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
</div>
</div>
</div>
</body>
</html>
