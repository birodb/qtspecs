<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 003 Minutes 2022-09-20</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 003 Minutes 2022-09-20</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org7dba2ac">Draft Minutes</a></li>
<li><a href="#org7b99d55">1. Administrivia</a>
<ul>
<li><a href="#orga1bcdff">Summary of new and continuing actions <code>[0/6]</code></a></li>
<li><a href="#org469f8e5">1.1. Roll call <code>[9/12]</code></a></li>
<li><a href="#agenda">1.2. Agenda</a></li>
<li><a href="#org003d8e3">1.3. Next meeting</a></li>
<li><a href="#approve-minutes">1.4. Approve minutes of the previous meeting</a></li>
<li><a href="#orga05ec20">1.5. Review of option action items <code>[8/9]</code></a></li>
</ul>
</li>
<li><a href="#org5170e14">2. Technical Agenda</a>
<ul>
<li><a href="#org27fa9dd">2.1. fn:characters</a></li>
<li><a href="#orga70e8c0">2.2. fn:identity</a></li>
<li><a href="#org1b4d8c7">2.3. fn:index-where</a></li>
<li><a href="#orgc56f329">2.4. fn:in-scope-namespaces</a></li>
<li><a href="#org5d4f75b">2.5. fn:is-NaN</a></li>
<li><a href="#org02c814f">2.6. fn:highest, fn:lowest</a></li>
<li><a href="#orge40e019">2.7. fn:uniform, fn:unique</a></li>
<li><a href="#org7db5c9a">2.8. map:filter</a></li>
</ul>
</li>
<li><a href="#org75a1e88">3. Any other business</a></li>
<li><a href="#org06a1338">4. Adjourned</a></li>
</ul>
</div>
</div>

<div id="outline-container-org7dba2ac" class="outline-2">
<h2 id="org7dba2ac">Draft Minutes</h2>
<div class="outline-text-2" id="text-org7dba2ac">
</div>
</div>

<div id="outline-container-org7b99d55" class="outline-2">
<h2 id="org7b99d55"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orga1bcdff" class="outline-3">
<h3 id="orga1bcdff">Summary of new and continuing actions <code>[0/6]</code></h3>
<div class="outline-text-3" id="text-orga1bcdff">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-01: NW to incorporate email feedback and produce new
versions of the process documents.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-003-01: MK to find a way to specify <code>fn:characters()</code> more formally</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-003-02: MK to propose a reformulation of <code>fn:index-of()</code> in terms of <code>fn:index-where()</code></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-003-03: NW to tweak the CSS for function signatures to avoid line breaks on <code>-</code> characters.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-003-04: MK to rename <code>fn:uniform()</code> and <code>fn:unique()</code> to <code>fn:all-equal()</code> and <code>fn:all-different()</code>, respectively</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-003-05: MK to consider how <code>fn:array-filter()</code> could be generalized to handle array predicates on the index as well as the value.</li>
</ul>
</div>
</div>

<div id="outline-container-org469f8e5" class="outline-3">
<h3 id="org469f8e5"><span class="section-number-3">1.1.</span> Roll call <code>[9/12]</code></h3>
<div class="outline-text-3" id="text-1-1">
<p>
Regrets: Bethan Tovey-Walsh
</p>

<ul class="org-ul">
<li class="on"><code>[X]</code> Anthony Bufort (AB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="off"><code>[&#xa0;]</code> Joel Kalvesmaki (JK) [x:35-]</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> John Lumley (JL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="off"><code>[&#xa0;]</code> Liam Quin (LQ)</li>
<li class="on"><code>[X]</code> C. M. Sperberg-McQueen (CSM)</li>
<li class="off"><code>[&#xa0;]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Chair</i>. <i>Scribe</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2022/09-20.html">the agenda</a> without amendments.
</p>

<p>
No objections.
</p>
</div>
</div>

<div id="outline-container-org003d8e3" class="outline-3">
<h3 id="org003d8e3"><span class="section-number-3">1.3.</span> Next meeting</h3>
<div class="outline-text-3" id="text-1-3">
<p>
The next meeting <a href="../../agenda/2022/09-27.html">is scheduled for Tuesday, 27 September</a>. Any regrets?
</p>

<p>
No regrets heard.
</p>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.4.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2022/09-13.html">the minutes of the previous meeting</a> as a correct record.
</p>

<p>
No objections.
</p>
</div>
</div>

<div id="outline-container-orga05ec20" class="outline-3">
<h3 id="orga05ec20"><span class="section-number-3">1.5.</span> Review of option action items <code>[8/9]</code></h3>
<div class="outline-text-3" id="text-1-5">
<p>
(Items marked [X] are believed to have been closed via email before
this agenda was posted.)
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-01: NW to incorporate email feedback and produce new
versions of the process documents. <b>Continues</b></li>
<li class="on"><code>[X]</code> QT4CG-002-02: RD to make a traige pass over the issues. <b>Completed</b></li>
</ul>

<p>
NW: Thank you!
</p>

<p>
RD: I Haven’t checked if the editorial labels need to be clarified. I also didn’t add milestones or
priorities as those should be decided by the communty.
</p>

<p>
Nods of agreement.
</p>

<ul class="org-ul">
<li class="on"><code>[X]</code> QT4CG-002-03: NW to setup the GitHub labels as discussed in email.
<ul class="org-ul">
<li><a href="https://lists.w3.org/Archives/Public/public-xslt-40/2022Sep/0027.htmlh">https://lists.w3.org/Archives/Public/public-xslt-40/2022Sep/0027.htmlh</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-002-04: MK to add DN’s “op” function to the list.
<ul class="org-ul">
<li><a href="https://lists.w3.org/Archives/Public/public-xslt-40/2022Sep/0023.html">https://lists.w3.org/Archives/Public/public-xslt-40/2022Sep/0023.html</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-002-05: EP to make links from the GitHub README files to
the formatted specs. <b>Completed</b></li>
<li class="on"><code>[X]</code> QT4CG-002-06: DN to make a GitHub issue to track the question of
whether we need array versions of all functions that take sequences. <b>Completed</b></li>
</ul>

<p>
DN: I also added some comparisions of array vs sequence functions.
</p>

<p>
DN: Also, I think sometimes there are two many labels. An issue marked
<i>XPath</i> doesn’t also need to be marked <i>XQuery</i>.
</p>

<p>
RD: I think that make sense, but also the converse doesn’t apply: if
something is labeled <i>XQuery</i>, it’s not necessarily about <i>XPath</i>. I’m happy if
<i>XPath</i> implies <i>XQuery</i>. I wonder if there are cases where things are
tagged <i>XPath</i> that don’t fit that rule.
</p>

<p>
CMS: I can’t think of any examples either, but for the imaginable case
where something might apply to only some XPath implementations, we
could have both tags.
</p>

<p>
Consensus appears to be that <i>XPath</i> will imply <i>XQuery</i> and XQuery
implementors will have to search the list for both tags.
</p>

<p>
RD: Should we remove the square brackets [XPath], [XQuery], etc. in the titles?
</p>

<p>
NW: I don’t think anyone needs to take an action to do it, but as we
address issues, if it seems clearer we can. Conversely, if someone
really wants to go through and do it, I don’t have any objections to
that either.
</p>

<ul class="org-ul">
<li class="on"><code>[X]</code> QT4CG-002-07: MK to make a pull request incorporating the
changes to fn:all.
<ul class="org-ul">
<li><a href="https://lists.w3.org/Archives/Public/public-xslt-40/2022Sep/0023.html">https://lists.w3.org/Archives/Public/public-xslt-40/2022Sep/0023.html</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-002-08: NW to investigate automatically generating
formatted specs from pull requests.
<ul class="org-ul">
<li><a href="https://lists.w3.org/Archives/Public/public-xslt-40/2022Sep/0026.html">https://lists.w3.org/Archives/Public/public-xslt-40/2022Sep/0026.html</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-002-09: MK to make a pull request incorporating the
changes to fn:some.
<ul class="org-ul">
<li><a href="https://lists.w3.org/Archives/Public/public-xslt-40/2022Sep/0023.html">https://lists.w3.org/Archives/Public/public-xslt-40/2022Sep/0023.html</a></li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org5170e14" class="outline-2">
<h2 id="org5170e14"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org27fa9dd" class="outline-3">
<h3 id="org27fa9dd"><span class="section-number-3">2.1.</span> fn:characters</h3>
<div class="outline-text-3" id="text-2-1">
<p>
See <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-characters">https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-characters</a>
</p>

<ul class="org-ul">
<li>CSM: Is there a way to do this with tokenize?</li>

<li>NW: No, I don’t think so. You’d have to split on empty string and that’s an error.</li>

<li>CSM: Ah, right I use <code>fn:string-to-codepoints()</code> and then <code>fn:codepoints-to-string()</code> on the result.</li>

<li>RD: <code>fn:characters()</code> also groups the unicode combining characters, correct?</li>

<li>MK: Not when using normalization. It’s not very formally defined. We
could do it by defining it in terms of string-to-codepoints and
back.</li>

<li>RD: It might be worth having a note describing the behavior. I made a
proposal for a string-to-graphemes function that would keep combining
characters together.</li>

<li>MK: I remember the proposal, but isn’t that the same as normalizing and
then splitting?</li>

<li>RD: Not for characters that don’t have a corresponding code point for the composed form. Consider,
for example, an “e” with grave and ring accents: è̊</li>

<li>MK: Right.</li>

<li>DN: I want to make a general comment. I think it’s important to have
functions for convenience, even if it’s possible to do it in some other
way in the language. It makes programmers more productive and avoids
errors.</li>
</ul>

<p>
ACTION QT4CG-003-01: MK to find a way to specify <code>fn:characters()</code> more formally
</p>

<p>
Proposal: Accept this function.
</p>

<p>
No objections.
</p>
</div>
</div>

<div id="outline-container-orga70e8c0" class="outline-3">
<h3 id="orga70e8c0"><span class="section-number-3">2.2.</span> fn:identity</h3>
<div class="outline-text-3" id="text-2-2">
<p>
See <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-identity">https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-identity</a>
</p>

<ul class="org-ul">
<li>MK: This was originally propsed by CG.</li>

<li>MK: I have slight reservations about the name because “identity” is associated with node identity.</li>

<li>DN: And also with the <code>fn:id()</code> function.</li>

<li>CSM: I like calling the function <code>fn:identity()</code>. While I agree
with Mike about the current use of the word “identity” in the current
specifications, I think that’s sometimes mislead readers!</li>
</ul>

<p>
Proposal: Accept this function.
</p>

<p>
No objections.
</p>
</div>
</div>

<div id="outline-container-org1b4d8c7" class="outline-3">
<h3 id="org1b4d8c7"><span class="section-number-3">2.3.</span> fn:index-where</h3>
<div class="outline-text-3" id="text-2-3">
<p>
See <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-index-where">https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-index-where</a>
</p>

<ul class="org-ul">
<li>MK: This is a generalization of <code>fn:index-of()</code> with more complex
predicates and it can process sequences of things other than atomic
values</li>

<li><p>
DN: this funciton is not very useful if it is applied to an array,
especially if the array has members that are arrays themselves.
</p>

<p>
… maybe we should note that there are no functions for searching in arrays and maps.
</p></li>

<li>JL: DN are you suggesting that we have a set of searching higher order functions?</li>

<li>DN: I don’t understand.</li>

<li>JL: When you want to do something like <code>fn:index-where()</code> on a
structured array, you’re invoking the possibility of recursive
application in certain parts. You’d want to know not that it was
just in elements 4, 9, and 12, but that it was item 7 in the 4th
top-level member, etc.</li>

<li>DN: Yes. In the email thread for this function, I gave an example.</li>

<li>MK: We have a separate issue open on trying to define functions for
deep search of a hierarchic structure. This function isn’t meeting
that requirement, but a simpler one. You could have an exactly analogous
function that does a shallow search of an array. The deep search is harder to specify. Out of scope for this function.</li>

<li>RD: I wonder if we should describe the definiton of <code>fn:index-of()</code> in terms of <code>fn:index-where()</code>.</li>

<li>MK: We could do that. It needs a bit of examination because of exactly
what the equality semantics of <code>fn:index-of()</code> are, given that it takes
a collation as an argument.</li>
</ul>

<p>
ACTION QT4CG-003-02: MK to propose a reformulation of <code>fn:index-of()</code> in terms of <code>fn:index-where()</code>
</p>

<ul class="org-ul">
<li>JL: Sometimes you want both the item itself and the index.</li>

<li>MK: Sometimes you want all before, or all after, or grouping…</li>

<li>CSM: The first thing that occurs to me is to filter on it, but we already have filtering.</li>
</ul>

<p>
Proposal: Accept this function.
</p>

<p>
No objections.
</p>
</div>
</div>

<div id="outline-container-orgc56f329" class="outline-3">
<h3 id="orgc56f329"><span class="section-number-3">2.4.</span> fn:in-scope-namespaces</h3>
<div class="outline-text-3" id="text-2-4">
<p>
See <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-in-scope-namespaces">https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-in-scope-namespaces</a>
</p>

<p>
Some discussion of the poor formatting in the published specification.
</p>

<p>
ACTION QT4CG-003-03: NW to tweak the CSS for function signatures to avoid line breaks on <code>-</code> characters.
</p>

<ul class="org-ul">
<li>MK: This is the function we would have had in place of the existing namespace functions, if we’d had maps from the start.
I’ve reformulated the existing functions (<code>fn:in-scope-prefixes()</code> and <code>fn:namespace-uri-for-prefix()</code>)
in terms of these.</li>

<li>RD: The reformulation looks fine to me.</li>

<li>MK: To make everyone aware, in defining the signatures, I’ve made
use of the proposed capability to define union and enum types locally.</li>

<li>CSM: Looking ahead, is that a change to the type system or just to the way we document things?</li>

<li>MK: It’s a change to the type system that doesn’t change the value
space. It adds types that partition the value space in a different
way.</li>

<li>CSM: Even if we didn’t adopt that change to the type system, you
could say we’re using it in signatures anyway.</li>

<li>MK: Yes, as a documentation convention.</li>
</ul>

<p>
Proposal: Accept this function.
</p>

<p>
No objections.
</p>
</div>
</div>

<div id="outline-container-org5d4f75b" class="outline-3">
<h3 id="org5d4f75b"><span class="section-number-3">2.5.</span> fn:is-NaN</h3>
<div class="outline-text-3" id="text-2-5">
<p>
See <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-is-NaN">https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-is-NaN</a>
</p>

<ul class="org-ul">
<li>CG: We could use <code>fn:not-a-number()</code> instead, so we don’t have the abbreviation “NaN” in the name.</li>
</ul>

<p>
Some discussion. General agreement seems to be that “NaN” is sufficiently well known as a term of art.
</p>

<ul class="org-ul">
<li>MK: While we’re discussing this, should we also have <code>fn:NaN()</code> that returns NaN?</li>

<li>CSM: IEEE defines a zillion forms of NaN and I thought that XSD
tried to preserve that by specifying that <code>NaN != NaN</code>.</li>

<li>MK: In our value space, in both XSD and XDM, the value space of
<code>xs:double</code> includes only one NaN and <code>xs:float</code> has a different
NaN. But we don’t have all the other forms of NaN.</li>
</ul>

<p>
MK, JL, CSM observe that the different forms do become apparent in the EXPath binary extensions.
</p>

<ul class="org-ul">
<li>JL: Is <code>fn:is-NaN()</code> equivalent to <code>castable as</code> to numeric?</li>

<li>MK: No, I think it’s equivalent to <code>not($value = $value)</code>.</li>

<li>MK: What about <code>fn:NaN()</code>?</li>

<li>NW: I was in favor until you pointed out that there are two <i>different</i> NaNs, one for double and one for float!</li>

<li>RD: Casting a float or a double from the string <code>"NaN"</code> returns the corresponding NaN value, doesn’t it?</li>

<li><del>MK: No it returns a failure, but the <code>fn:number()</code> function does.</del></li>
</ul>

<p>
<a href="https://lists.w3.org/Archives/Public/public-xslt-40/2022Sep/0047.html">Correction</a>: Casting <code>"NaN"</code> to <code>xs:float</code> or <code>xs:decimal</code> works as RD suggests.
It is an error to attempt to cast something like <code>"junk"</code> to a float or
decimal, but <code>fn:number("junk")</code> returns <code>NaN</code>.
</p>

<ul class="org-ul">
<li>JL: So if we have the <code>fn:number()</code> function and a way of creating NaN, do we need the function?</li>

<li>MK: I suppose not.</li>
</ul>

<p>
Proposal for <code>fn:NaN()</code> fades away.
</p>

<p>
Proposal: Accept the <code>fn:is-NaN()</code> function.
</p>

<p>
No objections.
</p>
</div>
</div>

<div id="outline-container-org02c814f" class="outline-3">
<h3 id="org02c814f"><span class="section-number-3">2.6.</span> fn:highest, fn:lowest</h3>
<div class="outline-text-3" id="text-2-6">
<p>
See <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-highest">https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-highest</a>
</p>

<p>
See <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-lowest">https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-lowest</a>
</p>

<ul class="org-ul">
<li>MK: This is in the example of user written functions in the 3.1
spec, but I found it sufficiently useful that it’s worth including.
It’s modeled on <code>fn:sort</code> in that it has three variants.</li>

<li>DN: This can be generalzied to a function that returns all the items at a given rank, where highest is rank 1.</li>

<li>RD: I think we’d need a separate proposal for that function.</li>

<li>MK: Note that I’ve made it consistent with <code>fn:min()</code> and <code>fn:max</code>
rather than <code>fn:sort()</code>, so the details are important.</li>

<li>CG: We’ve implented it and it worked for us.</li>
</ul>

<p>
Proposal: Accept these functions.
</p>

<p>
No objections.
</p>
</div>
</div>

<div id="outline-container-orge40e019" class="outline-3">
<h3 id="orge40e019"><span class="section-number-3">2.7.</span> fn:uniform, fn:unique</h3>
<div class="outline-text-3" id="text-2-7">
<p>
See <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-uniform">https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-uniform</a>
</p>

<p>
See <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-unique">https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-unique</a>
</p>

<ul class="org-ul">
<li>MK: I find these really useful in assertions. Not something you need
every day but useful when they are needed and possibly faster than a
user-defined version.</li>

<li>JL: What about finding duplicates?</li>

<li>MK: That was a follow-on proposal, inspired by these, but it hasn’t been proposed.</li>

<li>DN: The name “uniform” doesn’t tell me what the function returns as
true or false; it would be more obvious if it was something like,
“contains-single-value” or something.</li>

<li>MK: “all-equal”?</li>

<li>DN: Have we talked about a similar function for arrays?</li>

<li>MK: That’s equally applicable.</li>

<li>CSM: I like “all-equal” in part because it tells you up front that
you’re testing for equality not identity. I have the opposite problem
with “distinct” because I think of identity not equality!</li>

<li>MK: And “all-different”?</li>

<li>CSM: Regardless of the name, the summary included should call out
“equality” explicitly not just “distinct”.</li>
</ul>

<p>
Proposal: rename the functions <code>fn:all-equal()</code> and <code>fn:all-different()</code>
</p>

<p>
No objections.
</p>

<p>
ACTION QT4CG-003-04: MK to rename <code>fn:uniform()</code> and <code>fn:unique()</code> to <code>fn:all-equal()</code> and <code>fn:all-different()</code>, respectively
</p>

<p>
Proposal: Accept these functions as renamed.
</p>

<p>
No objections.
</p>
</div>
</div>

<div id="outline-container-org7db5c9a" class="outline-3">
<h3 id="org7db5c9a"><span class="section-number-3">2.8.</span> map:filter</h3>
<div class="outline-text-3" id="text-2-8">
<p>
See <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-map-filter">https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-map-filter</a>
</p>

<ul class="org-ul">
<li>MK: I’ve forgotten what the use case for <code>map:filter()</code> was, but I recall that it was convincing.
It returns a sub-map and you can filter on the key or the value.</li>

<li>JL: My first reading of the examples is that they were the same. Maybe change it so you get different results?</li>

<li>CSM: Make the second one filter on six character names?</li>

<li>CSM: I can think of a use case. For some algorithms you have to build a
big-big map and once you’re done you can throw away two-thirds of it.
This would be a way to do that.</li>

<li>CG: We already had a BaseX implementation.</li>
</ul>

<p>
[Someone, CG?] observes that the return type is wrong in the function
signature. It should be <code>map()*</code> not <code>item()*</code>.
</p>

<ul class="org-ul">
<li>DN: There is a function <code>array:filter()</code> that does something different.
That might be confusing. It might be good to have for array what
<code>map:filter()</code> does. The filtering for array only applies the prediate to
the elements of the array, not to the indexes. Maybe think about
reconciling them?</li>

<li>CSM: If I want to filter on the array index as well as the array
value, presumably all I have to do is call <code>map:filter()</code> on the array
because arrays are maps.</li>

<li>MK: Arrays aren’t maps. they’re both functions. The reason we did
that was because we decided, for better or worse, that we didn’t
want sparse arrays. If you remove the third item from an array, the
fourth item becomes the third, it doesn’t remain “4”.</li>

<li>RD: Do we have an array function to get a map of the indexes and the
corresponding values?</li>

<li>MK: Not as a single shot function.</li>

<li>DN: Even the <code>array:for-each-pair()</code> function could benefit from
making the index avilable. We can enrich array functionality by
giving access to the index.</li>

<li>RD: If we do that then currently as specified would that work? Or
would we need the optional/default value in the supplied function?</li>

<li>MK: We’d require more flexibility with arities and what function
coerction rules do, it could get complicated…it depends on
enhancements we haven’t made yet.</li>

<li>RD: I think it’d be worth a proposal for that, to look at it.</li>

<li>CSM: The big problem I see there is, in every other case, we have
the pattern that the single arity function takes an argument, the
two argument function takes that and an additional one, etc. The
argument at position 1 is constant. It would be backwards from the
way <code>map:filter()</code> works and that looks like a real usability
problem!</li>

<li>RD: The other possibility to keep the array functions as defined but
have equivalent with-position variants.</li>

<li>MK: <code>fn:array:filter2()</code></li>
</ul>

<p>
Proposal: Accept this function?
</p>

<ul class="org-ul">
<li>CSM: Because of the alignment issues with <code>array:filter()</code>, I’d kind
of like to leave this one open. Or is that unhelpful.</li>

<li>NW: I’m ok with that.</li>
</ul>

<p>
ACTION QT4CG-003-05: MK to consider how <code>fn:array-filter()</code> could be
generalized to handle array predicates on the index as well as the
value.
</p>
</div>
</div>
</div>

<div id="outline-container-org75a1e88" class="outline-2">
<h2 id="org75a1e88"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li>DN: We’ve had new functions proposed, this list should be updated.</li>

<li>RD: Once we’ve gone through the functions that have already been
added, we should go back to the issues.</li>
</ul>

<p>
Some discussion; general agreement seemed to be that it was better to
do the functions currently defined in the draft first, then come back
and review functions proposed more recently.
</p>

<ul class="org-ul">
<li>DN: Okay, but we should be on the look out for dependencies, if
currently drafte functions would be better specified in terms of newer
proposals, for example.</li>

<li>JL: I’d like to congratulate NW on the quality of the minutes.</li>
</ul>
</div>
</div>

<div id="outline-container-org06a1338" class="outline-2">
<h2 id="org06a1338"><span class="section-number-2">4.</span> Adjourned</h2>
</div>
</div>
</body>
</html>
