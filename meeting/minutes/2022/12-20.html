<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 016 Minutes 2022-12-20</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 016 Minutes 2022-12-20</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/14]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[10/14]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a></li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[3/7]</code></a></li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#h-EF7A6EB3-0BDC-4E8E-A805-8461FD43964C">2.1. Issue #281</a></li>
<li><a href="#issue-170">2.2. Issue #170, XPath “otherwise” operator</a></li>
<li><a href="#pr-parse-html">2.3. Review pull request #259: parse-html (issue #74)</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
</ul>
</div>
</div>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/14]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-015-02: NW to improve the width of the diagrams, perhaps multiple views</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-015-03: NW to make sure the direction of the arrow is in the legend</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-015-04: NW to investigate of a dynamic presentation is practical</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-01: DN to provide prose with more of the details for #281</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-02: NW to add an ed-note indicating when it was approved.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-03: RD to add a note clarifying “known character encoding”</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-04: RD to add a note clarifying the “*”/”*” html/version combination</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-05: RD to add a “todo” noting the dependency on keyword arguments</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-06: RD to reword the introduction to mapping to clarify who’s doing the mapping</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-07: NW to make an issue about the problems of document-uri uniqueness</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-09: RD to add a note stating that the local name should always be lowercase</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-10: RD to consider how to clarify <i>parsed</i> entity parsing.</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[10/14]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Anthony (Tony) Bufort (AB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Sasha Firsov (SF) [0:20-]</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK) [0:15-]</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> John Lumley (JL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="off"><code>[&#xa0;]</code> Liam Quin (LQ)</li>
<li class="off"><code>[&#xa0;]</code> Adam Retter</li>
<li class="off"><code>[&#xa0;]</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="on"><code>[X]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2022/12-20.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2022/12-13.html">the minutes of the previous meeting</a>.
</p>

<ul class="org-ul">
<li>JL: The previous minutes imply that I wrote all of the XSLT
compiler; I only wrote the XSLT ones.</li>
</ul>

<p>
Accepted with that amendment.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting <a href="../../agenda/2023/01-10.html">is scheduled for Tuesday, 10 January 2023</a>.
</p>

<p>
No regrets heard.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[3/7]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="on"><code>[X]</code> QT4CG-014-01: MK to propose new <code>try-get</code> functions for arrays, maps, and (maybe) sequences
<ul class="org-ul">
<li>PR #289</li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-015-01: MK to change the name of the argument to <code>array:index-where</code> from <code>$input</code> to <code>$array</code>
<ul class="org-ul">
<li>Slipped into one of the PRs</li>
</ul></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-015-02: NW to improve the width of the diagrams, perhaps multiple views</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-015-03: NW to make sure the direction of the arrow is in the legend</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-015-04: NW to investigate of a dynamic presentation is practical</li>
<li class="on"><code>[X]</code> QT4CG-015-05: MK to raise a PR to resolve issue #107, self::(a|b|c)
<ul class="org-ul">
<li>PR #286</li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-h-EF7A6EB3-0BDC-4E8E-A805-8461FD43964C" class="outline-3">
<h3 id="h-EF7A6EB3-0BDC-4E8E-A805-8461FD43964C"><span class="section-number-3">2.1.</span> Issue #281</h3>
<div class="outline-text-3" id="text-h-EF7A6EB3-0BDC-4E8E-A805-8461FD43964C">
<p>
We had <a href="https://qt4cg.org/meeting/minutes/2022/12-13.html#issue-281">some discussion</a> of <a href="https://github.com/qt4cg/qtspecs/issues/281">#281</a> last week, but no resolution.
</p>

<ul class="org-ul">
<li>DN: I think there was some progress in the comments. MK suggested I
write some prose.</li>
<li>MK: I need to see the detail.</li>
</ul>

<p>
ACTION QT4CG-016-01: DN to provide prose with more of the details for #281
</p>

<ul class="org-ul">
<li>DN: I also reopened an issue about guards on function evaluation.</li>
</ul>
</div>
</div>

<div id="outline-container-issue-170" class="outline-3">
<h3 id="issue-170"><span class="section-number-3">2.2.</span> Issue #170, XPath “otherwise” operator</h3>
<div class="outline-text-3" id="text-issue-170">
<p>
MK <a href="https://lists.w3.org/Archives/Public/public-xslt-40/2022Oct/0017.html">proposes</a> that <a href="https://github.com/qt4cg/qtspecs/issues/170">this issue</a> may be ready to be decided.
</p>

<p>
At the meeting <a href="https://qt4cg.org/meeting/minutes/2022/12-13.html#issue-170">last week</a>, no one present could recall why this issue
had been postponed.
</p>

<ul class="org-ul">
<li>NW: Does anyone know why we postponed it?</li>
<li>MK: I think there was debate about how it should be spelled.</li>
<li>DN: I agree, it was the name.</li>
</ul>

<p>
A first straw poll. From the candidates, vote for any and all that
you’d consider:
</p>

<p>
Candidates:
</p>
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> otherwise</li>
<li class="on"><code>[X]</code> fallback</li>
<li class="off"><code>[&#xa0;]</code> if-empty</li>
<li class="off"><code>[&#xa0;]</code> if-null</li>
<li class="on"><code>[X]</code> when-empty</li>
<li class="off"><code>[&#xa0;]</code> when-null</li>
<li class="on"><code>[X]</code> on-empty</li>
<li class="off"><code>[&#xa0;]</code> on-null</li>
<li class="on"><code>[X]</code> default</li>
</ul>

<p>
Okay, that eliminates a few options. Next straw poll: vote for exactly
one option, your preference.
</p>

<p>
New candidates:
</p>
<ul class="org-ul">
<li>otherwise: 7 votes</li>
<li>fallback: 0 votes</li>
<li>when-empty: 0 votes</li>
<li>on-empty: 1 vote</li>
<li>default: 0 votes</li>
</ul>

<p>
Looks like “otherwise” is the favorite.
</p>

<ul class="org-ul">
<li>NW: Is there anyone who can’t live with “otherwise”?</li>
</ul>

<p>
No one says they can’t live with it.
</p>

<p>
Proposal: use “otherwise”
</p>

<p>
Accepted.
</p>

<p>
ACTION QT4CG-016-02: NW to add an ed-note indicating when it was approved.
</p>
</div>
</div>

<div id="outline-container-pr-parse-html" class="outline-3">
<h3 id="pr-parse-html"><span class="section-number-3">2.3.</span> Review pull request #259: parse-html (issue #74)</h3>
<div class="outline-text-3" id="text-pr-parse-html">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-259">pull request #259</a>
</p>

<p>
RD gives us a brief tour.
</p>

<ul class="org-ul">
<li>RD: Moved “parsing and serializing” up to a main section
<ul class="org-ul">
<li>… Moved the parse-xml, parse-json, and some related functions into that section</li>
<li>… All of the object parsing and serialization functions are all in the same place</li>
<li>… 15.3.1, there’s an options method for the parsing options</li>
</ul></li>
<li>MK: Records take string keys where traditionally our options have
taken QName keys, especially extensible ones.</li>
</ul>

<p>
Some discussion of whether or not QNames are allowed, they are because
<code>*</code> occurs in the record.
</p>

<ul class="org-ul">
<li>RD: There’s an <code>include-template-content</code> parameter that defines the
behavior for handling the template element in HTML5.
<ul class="org-ul">
<li>… HTML specification says that the content in the template doesn’t
appear in the tree, but specifies different behavior. So it’s a
bit tricky; this option lets you decide if you want them or not.</li>
<li>… Review of the signature</li>
</ul></li>
</ul>

<p>
Some discussion of what “parsing with a known character encoding”
means when the input is a string. Could add a note to clarify.
</p>

<p>
ACTION QT4CG-016-03: RD to add a note clarifying “known character encoding”
</p>

<ul class="org-ul">
<li>RD: Outlines how the encoding is determined in the case of binary.
<ul class="org-ul">
<li>… You can override the encoding.</li>
<li>… Outlines what the various html/version combinations mean.</li>
</ul></li>
</ul>

<p>
Some discussion of what the html/version combination “*”/”*” means.
It’s a wildcard, not a literal value.
</p>

<p>
ACTION QT4CG-016-04: RD to add a note clarifying the “*”/”*” html/version combination
</p>

<ul class="org-ul">
<li>RD: Trying to be quite loose with specifying how these are handled.
<ul class="org-ul">
<li>… An implementation could, for example, use HTML: The Living
Standard for all of the versions.</li>
<li>… A few error conditions are defined.</li>
</ul></li>
</ul>

<p>
Some discussion of the use of keyword arguments in the examples. RD is
assuming that the proposal to build a map from any additional
arguments has been accepted.
</p>

<p>
ACTION QT4CG-016-05: RD to add a “todo” noting the dependency on keyword arguments
</p>

<ul class="org-ul">
<li>RD: The “Conversion from HTML” section is quite complicated</li>
<li>MK: Does the <i>DOM: Living Standard</i> define the mapping?</li>
<li>RD: No, they define the node types, we’re defining the mapping.</li>
</ul>

<p>
ACTION QT4CG-016-06: RD to reword the introduction to mapping to clarify who’s doing the mapping
</p>

<ul class="org-ul">
<li>RD: There are some notes about how processing instructions are handled
<ul class="org-ul">
<li>… Similarly, CDATA sections become text nodes</li>
<li>… The <code>DocumentFragment</code> node doesn’t have a corresponding XDM node.</li>
<li>… It’s used in the <code>ShadowRoot</code> which is limited to JavaScript so we don’t care</li>
<li>… And in <code>template</code> content which we have <code>include-template-content</code> to support.</li>
<li>… The following sections go into more detail about how each of the
node conversions are supported.</li>
</ul></li>
<li>MK: Am I right that DOM attribute nodes don’t have a parent?</li>
<li>RD: The DOM <code>Attr</code> interface does have a parent.</li>
<li>MK: Okay. I thought they’d changed that, maybe I’m thinking of something else.</li>
<li>RD: Continues…
<ul class="org-ul">
<li>… The child nodes have to handle the <code>HTMLTemplateElement</code></li>
<li>… The <code>DocumentType</code> is removed</li>
</ul></li>
</ul>

<p>
Some discussion of how adjacent text nodes are handled.
</p>

<p>
Some discussion of the <code>document-uri</code> accessor. The fact that document
URIs are required to be unique is a problem.
</p>

<p>
ACTION QT4CG-016-07: NW to make an issue about the problems of document-uri uniqueness
</p>

<ul class="org-ul">
<li>RD: Continues…
<ul class="org-ul">
<li>… Observes that the <code>is-id</code> accessor has to be sensitive to the
fact that HTML ID values don’t have to be NCNames.</li>
<li>… Handling namespace nodes requires a special accessor that deals
with “namespace attributes”.</li>
<li>… The tree is traversed to collect the relevant namespaces.</li>
</ul></li>

<li>MK: In point 2a, the comparison has to be defined, it can’t be node identity.</li>
</ul>

<p>
ACTION QT4CG-016-08: RD to clarify how namespace comparisons are performed.
</p>

<ul class="org-ul">
<li>RD: Continues…
<ul class="org-ul">
<li>… The node kind accessor has special handling for namespaces</li>
<li>… The node name accessor is quite tricky because in the HTML
parser the local name can contain the “:”. That needs to be split
and parsed.</li>
</ul></li>
<li>MK: Are there any differences in the value spaces for HTML and XML
names other than the “:”?</li>
<li>RD: No, I don’t think so. And the local-name is always lowercase
with the <i>HTML: The Living Standard</i> parser.</li>
</ul>

<p>
ACTION QT4CG-016-09: RD to add a note stating that the local name should always be lowercase
</p>

<ul class="org-ul">
<li>RD: Continues…
<ul class="org-ul">
<li>… The parent accessor also has to check for the
<code>HTMLTemplateElement</code> case.</li>
<li>… There’s a note that describes conequences of the fact that
templates don’t have a link back into the tree. An implementation
might be able to do better if it has access to the <code>host</code> property.</li>
<li>… The string-value accessor is described. It handles combining
adjacent text and CDATA sections into a single value.</li>
<li>… The type-name accessor is described.</li>
<li>… The typed-value accessor is described.</li>
<li>… The unparsed-entity-public-id and unparsed-entity-system-id are empty.</li>
</ul></li>
</ul>

<p>
ACTION QT4CG-016-10: RD to consider how to clarify <i>parsed</i> entity parsing.
</p>

<ul class="org-ul">
<li>NW: I’d have been happy to leave out all the HTML options and just
doing HTML5</li>
<li>RD: I think they’re necessary because of MK’s comments about how the
conversion would actually work.</li>
<li>MK: I’m worried about whether we’re capable of writing test cases
about this many versions and variants.</li>
<li>RD: Liam Quin mentioned support for XHTML which also introduced versions.</li>
<li>NW: Okay. I wasn’t trying to derail things.</li>

<li>NW: I think the extra options should be in their own option, not
tacked on the end. I created a comment with an example and rational.</li>
<li>SF: Do we need to specify our own algorithm in addition to what <i>HTML</i> defines?</li>
<li>RD: There are complexities that have to be addressed that depend on
the specification, for example the template countent support.
Likewise, namespaces and attributes have to be specified.</li>
<li>SF: I’m trying to make a bridge between the HTML and XML.
<ul class="org-ul">
<li>… You’re doing it by converting into the XML standard.</li>
<li>… It could also be done by changing HTML to accept XML.</li>
</ul></li>
<li>RD: There are a number of places where XML and HTML disagree, for
example, the value space of IDs. And HTML says it willfully ignores
HTML rules for things like the template element.
<ul class="org-ul">
<li>… And because HTML isn’t namespace aware, it doesn’t know how to
handle namespace nodes.</li>
<li>… We’re not bringing in the living standard directly because we need a mapping.</li>
</ul></li>
<li>SF: The mapping is understandable but it implies that you’re not
going to work on HTML itself. You’re going to be importing the DOM,
not operating on the browser DOM. That’s a very significant break
for adoption of this proposal into the HTML standard.</li>
<li>RD: I’ve noted that there are several ways to construct the tree; it
could take the HTML DOM and implement the XDM accessors in terms of
those.</li>
<li>SF: It can but it will be not just a bottleneck but a blocker to
getting this into the browser. We could delegate the creation of the
nodes to the underlying engine. If we give the original document
power to create the nodes, they’ll be able to adopt our XML tree as
their HTML tree.</li>
<li>RD: A browser will parse XML to the HTML DOM and will parse HTML to
the HTML DOM. The issue is if you do things like
<code>element.localName</code>, that can return things like <code>e:bug</code></li>
</ul>

<p>
Some discussion of the various ways that you can do this “conversion”.
It’s a question of how to present the view.
</p>

<ul class="org-ul">
<li>NW: I hate to interrupt, but we’ve run out of time today.</li>
<li>DN: Can we continue with this discussion on the 10th?</li>
<li>NW: Yes, we’ll continue on the 10th.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<p>
Happy holidays, everyone!
</p>
</div>
</div>
</div>
</body>
</html>
