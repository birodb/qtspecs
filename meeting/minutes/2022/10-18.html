<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 007 Minutes 2022-10-18</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 007 Minutes 2022-10-18</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/6]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[9/13]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a></li>
<li><a href="#next-meeting">1.3. Next meeting</a></li>
<li><a href="#approve-minutes">1.4. Approve minutes of the previous meeting</a></li>
<li><a href="#review-of-actions">1.5. Review of open action items <code>[5/6]</code></a></li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#pr-variadic-functions">2.1. Review pull request #197 (was 166; variadic functions)</a></li>
<li><a href="#issue-165">2.2. Issue #165, keyword arguments, “:=” or “:”</a></li>
<li><a href="#pr-items-before">2.3. Review pull request #199 (was 177; items before, etc.)</a></li>
<li><a href="#pr-xsl-match">2.4. Review pull request #200 (was 185; drop xsl:match instruction)</a></li>
<li><a href="#pr-subtyping">2.5. Review pull request #202 (was 196; subtyping)</a></li>
<li><a href="#pr-map-build">2.6. Review pull request #203: Issue 151: map:build</a></li>
<li><a href="#pr-math-atan2">2.7. Review pull request #206: Corrections to math:atan2</a></li>
<li><a href="#issue-170">2.8. Issue #170, XPath “otherwise” operator</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
</ul>
</div>
</div>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/6]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-005-03: RD to review the variadic functions proposal in #197 (formerly #166)</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-008-01: MK to implement the resolution of issue #165 (“:=” and no “$”)</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-008-02: NW to fix or replace #199, it doesn’t reflect the original correctly</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-008-03: NW to make the GitHub PR link to the diffs</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-008-04: RD to review pull request #202</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-008-05: NW to make an issue for Martin’s proposed ammendment to map:build</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[9/13]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
Regrets: BTW, EP
</p>

<ul class="org-ul">
<li class="on"><code>[X]</code> Anthony Bufort (AB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK)</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> John Lumley (JL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="off"><code>[&#xa0;]</code> Ed Porter (EP)</li>
<li class="off"><code>[&#xa0;]</code> Liam Quin (LQ)</li>
<li class="off"><code>[&#xa0;]</code> Adam Retter</li>
<li class="on"><code>[X]</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="off"><code>[&#xa0;]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Chair</i>. <i>Scribe</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2022/10-18.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.3.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting <a href="../../agenda/2022/10-25.html">is scheduled for Tuesday, 25 October</a>. Any regrets?
</p>

<p>
None heard.
</p>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.4.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2022/10-11.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-review-of-actions" class="outline-3">
<h3 id="review-of-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[5/6]</code></h3>
<div class="outline-text-3" id="text-review-of-actions">
<p>
(Items marked [X] are believed to have been closed via email before
this agenda was posted.)
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group
<ul class="org-ul">
<li>Continued</li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-005-03: RD to review the variadic functions proposal in #197 (formerly #166)</li>
<li class="on"><code>[X]</code> QT4CG-006-01: JK to review the variadic functions proposal in #197</li>
<li class="on"><code>[X]</code> QT4CG-006-02: NW to make the changed files heading to be more obviously a link.
<ul class="org-ul">
<li>Changes commited to the <code>gh-pages</code> branch on 11 October 2022</li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-006-03: MK to make a separate proposal for supporting the Unicode operator symbols
<ul class="org-ul">
<li><a href="https://lists.w3.org/Archives/Public/public-xslt-40/2022Oct/0037.html">https://lists.w3.org/Archives/Public/public-xslt-40/2022Oct/0037.html</a></li>
<li><a href="https://github.com/qt4cg/qtspecs/issues/204">https://github.com/qt4cg/qtspecs/issues/204</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-006-04: NW to point to the dashboard links from the agendas.
<ul class="org-ul">
<li>See this agenda, for example :-)</li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-pr-variadic-functions" class="outline-3">
<h3 id="pr-variadic-functions"><span class="section-number-3">2.1.</span> Review pull request #197 (was 166; variadic functions)</h3>
<div class="outline-text-3" id="text-pr-variadic-functions">
<ul class="org-ul">
<li>See <a href="https://qt4cg.org/#pr-197">pull request #197</a> (you’ll find links to formatted versions of the specs at <a href="https://qt4cg.org/">https://qt4cg.org/</a>).</li>
<li>See also the nexus of issues <a href="https://github.com/qt4cg/qtspecs/issues/162">#162</a>, <a href="https://github.com/qt4cg/qtspecs/issues/161">#161</a>, <a href="https://github.com/qt4cg/qtspecs/issues/160">#160</a>, <a href="https://github.com/qt4cg/qtspecs/issues/159">#159</a>, <a href="https://github.com/qt4cg/qtspecs/issues/158">#158</a>, <a href="https://github.com/qt4cg/qtspecs/issues/157">#157</a>, and <a href="https://github.com/qt4cg/qtspecs/issues/155">#155</a>.</li>
<li>See the discussion from <a href="../../minutes/2022/10-11.html#pr-variadic-functions">last week</a>.</li>
</ul>

<p>
Mike summarizes the reviews so far.
</p>

<ul class="org-ul">
<li>MK: There are difficulties with the presentation, many of which
derive from the 3.1 spec. I haven’t seen any comments related to the
technical questions.</li>
<li>RD: JK asked about “=” or “:=”.</li>
<li>MK: Yes, we have a separate issue for that.</li>
<li>MSM: I would like to pose a question, but it will lead to bike shedding.</li>
<li>NW: You have 5 minutes.</li>
<li>MSM: When I was reading it, I became less and less comfortable with
the term “declared function” because we have to explain several
times that it isn’t a function, it’s a function family.</li>
<li>MK: Yes, I’m proposing to change that to “function definition.”</li>
<li>MSM: I thought “function family” might be a possibility.</li>
<li>MK: I tried that. I think it sounds too much like a set of
functions, which it isn’t really because there’s also additional
metadtaa, so I decided not to use that.</li>
<li>MSM: If we allow implementations to search multiple namespaces and
resolve conflicts, is it somehow inconsistent?</li>
<li>MK: It’s unfortuante that tht issue has raised its head here. The
reason is that in my first draft, I proposed changes to function
resolution, partly to make more legitimate what XSLT was doing
with overrides and packages. Some of the chagnes aren’t a
substantive part of the proposal, they’re designed to tidy up text
that should never have been there.</li>
<li>MSM: But if we allow host langeauges to supply conflict
resolution rules for some kinds of conflicts, forbidding it from
resolving arity conflicts seems odd.</li>
<li>MK: Yes, there’s a bit of a tension there because XSLT has always
has its own rules. Those have never been reflected in XPath which is
why I tried to generalize the text.</li>
</ul>

<p>
We’ll come back to this again next week.
</p>
</div>
</div>

<div id="outline-container-issue-165" class="outline-3">
<h3 id="issue-165"><span class="section-number-3">2.2.</span> Issue #165, keyword arguments, “:=” or “:”</h3>
<div class="outline-text-3" id="text-issue-165">
<p>
MK <a href="https://lists.w3.org/Archives/Public/public-xslt-40/2022Oct/0017.html">proposes</a> that <a href="https://github.com/qt4cg/qtspecs/issues/165">this issue</a> may be ready to be decided.
</p>

<ul class="org-ul">
<li>MK: The initial issue was what symbol do we use and then it was
widened to the question of whether we should put a <code>$</code> in front of the
keyword.</li>
<li>RD: Doesn’t that conflict with scripting extensions?</li>
<li>MK: We already have conflicts there, so that doesn’t help me.</li>
<li>DN: I would prefer not to use <code>$</code> because it is more typing and I
have ides for using <code>$</code> or <code>$$</code> for something else in the future.</li>
<li>RD: If we use <code>$</code> in the function call, doesn’t that mean that we
then have a parsing ambiguity that breaks the current convention of
having a two symbol look-ahead to resolve conflicts? Having an
<code>NCName</code> followed by a colon would be a keyword parameter whereas
<code>$NCname</code> could be a parameter being passed to a function call or it
could be defining a name parameter.</li>
<li>MK: I think there are already places where we need two character look-ahead.</li>
<li>RD: But what about more than two?</li>
</ul>

<p>
Some discussion about whether “$” “NCName” “:” is two or three symbol
look-ahead.
</p>

<ul class="org-ul">
<li>CG: I would vote against <code>$</code>, because I think variable references
and declarations would look pretty similar. In NW’s example, there’s
a <code>let</code> keyword in front. One of my proposals was to use a simple
string followed by a colon.</li>
<li>NW: Is that a third propsal, “:” instead of “:=” or “=”</li>
<li>CG: Yes.</li>
<li>MK: I think putting it in quotes has too much of an implication that
you can define the name variably instead of literally.</li>
<li>RD: If we extend this to support map keys, if we don’t allow
strings, don’t we have the restriction that we can’t reference keys
with spaces? So we’d need to support stings. If we only support
strings, we don’t allow QNames. Whereas parameters can be QNames. We
need to support EQNames and if we extend it to map keys, strings.</li>
<li>MK: I think there are two questions, <code>:=</code> or <code>:</code> and the use of <code>$</code>.
I think the impression I got is that the discussion favored <code>:=</code>
because it’s similar to other places where we bind values to
parameter names, like declaring the default in an XQuery function
declaration and it reduces some for ambiguity when you have a QName
there.</li>
</ul>

<p>
Proposal: use “:=”
</p>

<p>
Accepted.
</p>

<ul class="org-ul">
<li>NW: Do we want to resolve the <code>$</code> question now?</li>
<li>MK: It would be nice to resolve it, I think we know everything we
need to know. It’s technically redundant, we’re only doing it
because we use them everywhere else. It draws it out visually. I’m
marginally in favor of including it, but it’s not something I feel
immensely strongly about.</li>
<li>MSM: I agree</li>
<li>RD: I’d be against it because it would be a conflict with the
scripting extension syntax.</li>
<li>DN: From what I hear, I have a feeling the majority is opposed to
the <code>$</code>. I’d like to add one more thing, it’s because <code>$name</code> can
very easily be construed as a reference to a variable and we could
even have <code>$x := $x</code>.</li>
<li>AB: I’ll register my agreement with RD not to do it.</li>
</ul>

<p>
Proposal: No “$”
</p>

<p>
Accepted.
</p>

<p>
ACTION QT4CG-008-01: MK to implement the resolution of issue #165 (“:=” and no “$”)
</p>
</div>
</div>

<div id="outline-container-pr-items-before" class="outline-3">
<h3 id="pr-items-before"><span class="section-number-3">2.3.</span> Review pull request #199 (was 177; items before, etc.)</h3>
<div class="outline-text-3" id="text-pr-items-before">
<ul class="org-ul">
<li>See <a href="https://qt4cg.org/#pr-199">pull request #199</a></li>

<li>MSM: My comment on it came just before the meeting.</li>
</ul>

<p>
In the course of attempting to review the item, we discovered that the PR is malformed.
</p>

<p>
ACTION QT4CG-008-02: NW to fix or replace #199, it doesn’t reflect the original correctly
</p>
</div>
</div>

<div id="outline-container-pr-xsl-match" class="outline-3">
<h3 id="pr-xsl-match"><span class="section-number-3">2.4.</span> Review pull request #200 (was 185; drop xsl:match instruction)</h3>
<div class="outline-text-3" id="text-pr-xsl-match">
<ul class="org-ul">
<li>See <a href="https://qt4cg.org/#pr-200">pull request #200</a></li>

<li>MK: I proposed it a while ago. The intent was to find a way to use
pattern smore flexibly, but I haven’t really found a proposal that
I’m comfortable with. I’m not happy, so I prefer to drop it.</li>
</ul>

<p>
Proposal: Accept PR #200, drop xsl:match
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-subtyping" class="outline-3">
<h3 id="pr-subtyping"><span class="section-number-3">2.5.</span> Review pull request #202 (was 196; subtyping)</h3>
<div class="outline-text-3" id="text-pr-subtyping">
<ul class="org-ul">
<li>See <a href="https://qt4cg.org/#pr-202">pull request #202</a></li>

<li>MK: This is essentially an editorial proosal, though it does fill a
few gaps in the subtyping rules. It’s designed to use a more generous
layout for the rules and a more readable notation. It’s easy to find
the rules you want and the more generous layout offers more room
for examples.</li>
<li>JL: I have a question on procedure. I’m trying to find out where the
information is.</li>
</ul>

<p>
Some discsion of the difficulty in finding the item. The organization
of the qt4cg.org pages, and the relationship to the GitHub pull
request is not as clear as it could be.
</p>

<p>
ACTION: QT4CG-008-03: NW to make the GitHub PR link to the diffs
</p>

<ul class="org-ul">
<li>RD: I’d like to review the proposal.</li>
</ul>

<p>
ACTION: QT4CG-008-04: RD to review pull request #202
</p>
</div>
</div>

<div id="outline-container-pr-map-build" class="outline-3">
<h3 id="pr-map-build"><span class="section-number-3">2.6.</span> Review pull request #203: Issue 151: map:build</h3>
<div class="outline-text-3" id="text-pr-map-build">
<ul class="org-ul">
<li>See <a href="https://qt4cg.org/#pr-203">pull request #203</a></li>
</ul>

<p>
MK walks us through the proposal.
</p>

<ul class="org-ul">
<li>MK: Martin Honnen also raised discussed this <a href="https://lists.w3.org/Archives/Public/public-xslt-40/2022Oct/0035.html">in email</a>.</li>
<li>MK: This was previously described as <code>map:group-by()</code> that was less powerful.
<ul class="org-ul">
<li>They way you do this today is with <code>map:merge()</code> which is unintuitive and clumsy.</li>
<li>The modification that Marin has proposed is that you should be able
to compute more than one key for each item in the input sequence,
all of which will be bound to the same value</li>
<li>That conflicts with the way thtat DN might like to extend it, by
allowing keys to contain multiple atomic values. That would, say,
generate one composite key rather than multiple single keys.</li>
<li>I’m fairly neutral to Martin’s extension; I’d be happy to accept
it but I don’t care strongly.</li>
</ul></li>
<li>MSM: DN, can you clarify something? I can see the utilty of having
the same item reachable thorugh mutliple keys. I can’t describe a use
case off the top of my head, but Martin’s proposal feels intuitive to me.
When I have a compound key, or something that would in other contexts
be called a compound key, I tend to use nested maps. I haven’t felt
any more unhappy with that than I am with maps generally. I’m
wondering, what do we get from allowing a sequence serve as a
key?</li>
<li>DN: There is a separate issue in which this is discussed quite
throughly (scribe believes it is <a href="https://github.com/qt4cg/qtspecs/issues/119">#119</a>). There, I also have an example with nested maps and
as an alternative. But it feels like it is quite challenging, even for
two nested maps. It would practically be impossible for even deeper
maps</li>
<li>MSM: Ok, I’ll look at that issue.</li>
</ul>

<p>
NW asks if we could resolve this issue independently of Martin’s
suggestion. Agreement is we could.
</p>

<p>
ACTION QT4CG-008-05: NW to make an issue for Martin’s proposed ammendment to map:build
</p>

<ul class="org-ul">
<li>DN: Because we just provide the input, I undestand that we can
construct the key and the map is a function from the key to the value.
But the way I first read it, was that the value is a function of the
input, not the key. Maybe the prose could be clarified?</li>
<li>MK: I’ll see if I can construct an example that demonstrates that.</li>
<li>JL: This gives me a mapping that’s normally an identity and we can
do a replacement in parts of that.</li>
<li>MSM: I’ve struggled a bit with <code>map:merge</code>, partly because of
an implementation detail, but my recolleciton is that in map merge,
there’s a kewyord for what to do with duplicates and here it’s a function.</li>
<li>MK: The five options we provide on <code>map:merge</code> can all be implemented
by very simple funtions. And there are lots of other options that
you might want, that you could also do with functions. Providing a
general function instead of a selection of four would be a useful
enhancement.</li>
<li>MSM: Thank you.</li>
</ul>

<p>
Proposal: Accept pull request #203.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-math-atan2" class="outline-3">
<h3 id="pr-math-atan2"><span class="section-number-3">2.7.</span> Review pull request #206: Corrections to math:atan2</h3>
<div class="outline-text-3" id="text-pr-math-atan2">
<ul class="org-ul">
<li>See <a href="https://qt4cg.org/#pr-206">pull request #206</a></li>

<li>RD: I noticed when looking at the way <code>math:atan2</code> was specified was
that it didn’t match the output that it should. So I in my issue I
outlined the issues and MK has fixed them.</li>
</ul>

<p>
Some discussion of the IEEE spec.
</p>

<p>
Proposal: Accept pull request #206.
</p>

<p>
Accepted
</p>
</div>
</div>

<div id="outline-container-issue-170" class="outline-3">
<h3 id="issue-170"><span class="section-number-3">2.8.</span> Issue #170, XPath “otherwise” operator</h3>
<div class="outline-text-3" id="text-issue-170">
<p>
MK <a href="https://lists.w3.org/Archives/Public/public-xslt-40/2022Oct/0017.html">proposes</a> that <a href="https://github.com/qt4cg/qtspecs/issues/170">this issue</a> may be ready to be decided.
</p>

<p>
There’s no PR for this issue because the text is already in the draft.
</p>

<ul class="org-ul">
<li>MSM: If I’m understanding this correctly, in cases where the left
hand argument returns at most one item, this has the same effect as
<code>($a,$b)[1]</code>. This generalizes that to allowing either operator to return
multiple items.</li>
<li>MK: Yes. It has two benefits. One is, the existing notation <code>($a,$b)[1]</code> is
highly obsecure. And the other is that it enables you to let the
left hand operand be a multi-item sequence.</li>
<li>DN: I think everything is clear, but from my practice as a
developer. I think there could be a confusion. What’s proposed is
that if the left hand side (LHS) is the empty sequence, we choose
the right hand side (RHS). Some peple may think this is applicable if the LHS is the
empty string or <code>false()</code>, can we do something about this?</li>
<li>JK: In that spirit, I’d like to propose a synonym, <code>fallback</code> which
may avoid the confusion.</li>
<li>RD: I’d be wary of extending it to things like <code>false()</code> or the empty
string. It could led to confusing behavior like in JavaScript.</li>
<li>MSM: To put it on the table, we could do two things to address the
concern: one is to revise the proposal in the direction of saying if
the effective boolean value (EBV) of the LHS is false then take the RHS. The alternative is
use a different keyword to avoid the mental association with
booleans.</li>
<li>RD: If you have something like <code>$x := false() return $x otherwise 2</code>,
then you would expect it to return <code>$x</code> but if we allow EBV, then it
would return <code>false()</code>. What this is solving is  the case where you have the empty sequence!</li>
<li>DN: From C#, there is a function <code>is-null-or-empty</code> and another other is
<code>is-null-or-whitespace</code>. There’s an operator that does null as well.</li>
<li>JL: I’d favor keeping the current propsoal because what you’re
tryign to do is make it clear what the current practice of using <code>($a,$b)[1]</code> is for!</li>
</ul>

<p>
Time is up. We’ll have to come back to this next week.
</p>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<p>
None heard.
</p>
</div>
</div>
</div>
</body>
</html>
