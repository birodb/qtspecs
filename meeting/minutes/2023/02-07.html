<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 021 Minutes 2023-02-07</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 021 Minutes 2023-02-07</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/6]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[10/14]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a></li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[10/12]</code></a></li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#h-0032B671-656D-4130-A024-3365933EADB6">2.1. Issue #307, parsing and building URIs comments and queries</a></li>
<li><a href="#h-8455483D-D0AF-499A-A74A-552B33A9F395">2.2. PR #320: Issue 98 - add options parameter to fn:deep-equal</a></li>
<li><a href="#h-0BCF3769-7D91-45D1-8D2E-12E48F9E6757">2.3. PR #289: Proposal to add fallback behaviour to map:get and array:get</a></li>
<li><a href="#h-F2F35033-A57A-4FE6-B7ED-CF7A4B15983D">2.4. PR #330: Update fn:parse-html to apply review feedback.</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
</ul>
</div>
</div>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Minutes</h2>
<div class="outline-text-2" id="text-minutes">
<p>
Approved <a href="./02-14.html">at meeting 022</a> on 14 February 2023.
</p>
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/6]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-021-01: NW to raise a PR addressing the points in issue #307</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-021-02: NW to check for deprecated URI features and add options for them in <code>fn:build-uri</code> and <code>fn:parse-uri</code></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-021-03: RD to change <code>must</code> to <code>will</code> in DOM notes about lowercase</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-021-04: RD to revise and move the note about unrecognized entities</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[10/14]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
Regrets: BTW
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Anthony (Tony) Bufort (AB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Sasha Firsov (SF)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK) [:08-]</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> John Lumley (JL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="off"><code>[&#xa0;]</code> Liam Quin (LQ)</li>
<li class="off"><code>[&#xa0;]</code> Adam Retter</li>
<li class="on"><code>[X]</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="off"><code>[&#xa0;]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2023/02-07.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2023/01-31.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting <a href="../../agenda/2023/02-14.html">is scheduled for Tuesday, 14 February 2023</a>.
</p>

<p>
No regrets heard.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[10/12]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="on"><code>[X]</code> QT4CG-016-02: NW to add an ed-note indicating when it was approved.
<ul class="org-ul">
<li><a href="https://lists.w3.org/Archives/Public/public-xslt-40/2023Feb/0005.html">https://lists.w3.org/Archives/Public/public-xslt-40/2023Feb/0005.html</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-016-06: RD to reword the introduction to mapping to clarify who’s doing the mapping</li>
<li class="on"><code>[X]</code> QT4CG-016-07: NW to make an issue about the problems of document-uri uniqueness
<ul class="org-ul">
<li><a href="https://lists.w3.org/Archives/Public/public-xslt-40/2023Feb/0005.html">https://lists.w3.org/Archives/Public/public-xslt-40/2023Feb/0005.html</a></li>
</ul></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="on"><code>[X]</code> QT4CG-016-09: RD to add a note stating that the local name should always be lowercase
<ul class="org-ul">
<li><a href="https://github.com/qt4cg/qtspecs/pull/330">https://github.com/qt4cg/qtspecs/pull/330</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-016-10: RD to consider how to clarify <i>parsed</i> entity parsing.
<ul class="org-ul">
<li><a href="https://github.com/qt4cg/qtspecs/pull/330">https://github.com/qt4cg/qtspecs/pull/330</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-019-01: MK to fix the type of <code>$pattern</code> in <code>fn:tokenize()</code></li>
<li class="on"><code>[X]</code> QT4CG-020-01: MK to check if the default for <code>type-variety</code> is correct.</li>
<li class="on"><code>[X]</code> QT4CG-020-02: MK to review the description of the <code>equal-strings</code> function</li>
<li class="on"><code>[X]</code> QT4CG-020-03: MK to add examples using options.</li>
<li class="on"><code>[X]</code> QT4CG-020-03: MK to add an option to return false instead of raising an error</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-h-0032B671-656D-4130-A024-3365933EADB6" class="outline-3">
<h3 id="h-0032B671-656D-4130-A024-3365933EADB6"><span class="section-number-3">2.1.</span> Issue #307, parsing and building URIs comments and queries</h3>
<div class="outline-text-3" id="text-h-0032B671-656D-4130-A024-3365933EADB6">
<p>
See <a href="https://github.com/qt4cg/qtspecs/issues/307">issue #307</a>.
</p>

<ul class="org-ul">
<li>RD: I have some questions…</li>
<li>NW: I think the issues you raise in 1a/1b are places where I have to
correct the text.</li>
</ul>

<p>
RD shares his screen to review the issue.
</p>

<ul class="org-ul">
<li>RD: Issue 2 is I don’t think the <code>fn:build-uri</code> will work correctly
for IPv6 addresses where there are colons in the host part.</li>
<li>RD: Issue 3 is that <code>user:password</code> are now rejected by browsers. Perhaps it
shouldn’t render the password?</li>
<li>NW: What do you mean by render?</li>
</ul>

<p>
Some discussion. NW remains confused about what render means. The
string has to contain the password or the resulting string isn’t useful.
</p>

<ul class="org-ul">
<li>RD: Maybe we should at least add a note to say that having a
password in the string is a risk.</li>

<li>RD: The last point is that the spec suggest known port numbers be omitted.</li>
<li>NW: I wonder about the implementations knowing the port numbers</li>
<li>SF: In modern browsers, http: isn’t a valid protocol anymore. The same as gopher:.</li>
<li>MK: I think these functions are about generic URI syntax rather than
specific schemes and dereferencing. You might want to construct a
namespace URI, for example, and you could use http: for that or xyz:.</li>
<li>NW: I think that’s right.</li>
<li>DN: I think what MK says is right, but on the other side, one of our
goals is to define the function to be convenient to the user. I
think we should have options. For example, we should have an option
that forbids username:password by default. And also we could forbid
http: by default.</li>
<li>NW: I have reservations about making a user specify an option to do
the thing that the request asks for.</li>
<li>RD: I don’t think we should be adding any additional logic. The
http: to https: mapping is dependent on when you make a request to
the server.
<ul class="org-ul">
<li>… What’s convenient for one application is inconvenient for
another. What works for targeting web browsers might not work when
targeting a different platform.</li>
<li>… I’m in favor of keeping these two functions purely about the RFC.</li>
</ul></li>
<li>DN: I think there is a principle in design that it’s good to make
dangerous things difficult. For the user:password, I think we need
to apply this principle.</li>
<li>NW: Point taken, but it’s not the sort of thing that feels like a
user is going to do it accidentally. And if they need a
username:password, making them specify that <b>and</b> set an option that
says they <b>meant</b> to specify that seems odd.</li>
<li>RD: The RFC specification says that the username/password is deprecated. 
Applications may choose to ignore or reject such data.
<ul class="org-ul">
<li>… I think supporting those different use cases for the
user:password bit makes sense.</li>
</ul></li>
<li>NW: Okay.</li>
<li>MSM: Just for consistency, I think you should generalize that action
to check for anything that’s deprecated.</li>
</ul>

<p>
ACTION QT4CG-021-01: NW to raise a PR addressing the points in issue #307
</p>

<p>
ACTION QT4CG-021-02: NW to check for deprecated URI features and add options for them in <code>fn:build-uri</code> and <code>fn:parse-uri</code>
</p>

<ul class="org-ul">
<li>JK: Perhaps a way to do this is to have another arity that says
“safe mode on” or some such.</li>
<li>MK: Are we just talking about building URIs, or also parsing?</li>
<li>RD: Both, I think.</li>
<li>CG: I think it’s somewhat confusing if passwords are rejected when
using parse-uri.</li>
</ul>
</div>
</div>

<div id="outline-container-h-8455483D-D0AF-499A-A74A-552B33A9F395" class="outline-3">
<h3 id="h-8455483D-D0AF-499A-A74A-552B33A9F395"><span class="section-number-3">2.2.</span> PR #320: Issue 98 - add options parameter to fn:deep-equal</h3>
<div class="outline-text-3" id="text-h-8455483D-D0AF-499A-A74A-552B33A9F395">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-320">pull request #320</a>. We reviewed this last week with an eye towards
getting approval this week.
</p>

<ul class="org-ul">
<li>MK: I’ve done the actions in response to the review, but there’s
also work in progress. I’ve got more than 50 tests and I’m working
on an implementation. That’s revealed places where the spec needs
more detail. I think we should refrain from further review until
I’ve done that.</li>
</ul>
</div>
</div>

<div id="outline-container-h-0BCF3769-7D91-45D1-8D2E-12E48F9E6757" class="outline-3">
<h3 id="h-0BCF3769-7D91-45D1-8D2E-12E48F9E6757"><span class="section-number-3">2.3.</span> PR #289: Proposal to add fallback behaviour to map:get and array:get</h3>
<div class="outline-text-3" id="text-h-0BCF3769-7D91-45D1-8D2E-12E48F9E6757">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-289">pull request #289</a>.
</p>

<p>
MK reviews the PR.
</p>

<ul class="org-ul">
<li>MK: In its current state, it basically effects <code>map:get</code> and <code>array:get</code>.
<ul class="org-ul">
<li>… There’s now a fallback function on <code>map:get</code> that says what the
function should do if the key isn’t present. Default is to return
<code>()</code>.</li>
<li>… And similarly on <code>array:get</code>, but the default is to throw an
error.</li>
</ul></li>

<li>RD: Shouldn’t the namespace of the error be the err: namespace?</li>
<li>MK: Yes, well spotted.</li>
</ul>

<p>
This brings us to the context of defaults, but that’s a different
issue.
</p>

<ul class="org-ul">
<li>DN: I think this seems reasonable. I’m only worried about the
default for maps. It’s perfectly possible that for a given actual
key, the map could actually contain an empty sequence. That would
make it difficult to distinguish these two cases.</li>
<li>MK: But we’ve got to be compatible with the existing capability
which returns an empty sequence.</li>
<li>DN: I thought someone raised an issue that errors were raised and
they wanted forgiving behavior. But maybe that’s something
different.</li>
</ul>

<p>
(Before the end of the call, DN finds the reference and  <a href="https://lists.w3.org/Archives/Public/public-xslt-40/2023Feb/0006.html">sends email</a> about it.)
</p>

<ul class="org-ul">
<li>MK: In 3.1, it returns an empty sequence and there are notes that
say if that’s a problem check first with <code>map:contains</code>.</li>
</ul>

<p>
Some discussion of having an empty map returned so that you can
dereference through the sequence. DN will try to find the use case.
</p>

<p>
Proposal: Accept this PR
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-h-F2F35033-A57A-4FE6-B7ED-CF7A4B15983D" class="outline-3">
<h3 id="h-F2F35033-A57A-4FE6-B7ED-CF7A4B15983D"><span class="section-number-3">2.4.</span> PR #330: Update fn:parse-html to apply review feedback.</h3>
<div class="outline-text-3" id="text-h-F2F35033-A57A-4FE6-B7ED-CF7A4B15983D">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-330">pull request #330</a>.
</p>

<p>
RD reviews changes in PR 330.
</p>

<p>
Some discussion of current build failures. NW thinks rebasing off the
current master will fix it.
</p>

<ul class="org-ul">
<li>RD: I’ve applied all the feedback except for namespaces which I’m
not sure about.</li>
<li>RD: There’s now a note about character encodings.
<ul class="org-ul">
<li>… it attempts to avoid a decode/recode cycle</li>
</ul></li>
</ul>

<p>
Some … discussion … about the fact that WHAT WG defines ISO 8859-1 and
ASCII encodings are aliases for Windows-1252.
</p>

<ul class="org-ul">
<li>MK: I found it simpler when describing something analagous for
serialization to treat it as if you were encoding it into UTF-8 and
then back out again. As a simpler way of specifying it.</li>
</ul>

<p>
Some further discussion about the fact that one of the goals here is
to make it clear that you aren’t doing a decoding/recoding step.
</p>

<ul class="org-ul">
<li>RD: I’ve clarified what <code>*</code> meant in the table.
<ul class="org-ul">
<li>… Updated the section about mapping to XDM from HTML DOM Nodes.</li>
<li>… Reworded the introduction to make that clearer.</li>
<li>… Where that section uses attribute and element local names, I’ve
added a note about the names being lowercase.</li>
</ul></li>

<li>MK: Will the names already be lowercase in the DOM?</li>
<li>RD: If you parse them with the HTML5 parsing algorithm, they will be
lowercase. It’s not clear what the HTML3 or HTML4 specifications say about them.</li>
<li>MSM: I was thinking that the implication of MK’s observation is that
you could change that <code>must</code> to a <code>will</code>. I thought in the introduction we said
it was HTML5 DOM nodes.</li>
<li>RD: I’m happy to change <code>must</code> to <code>will</code>.</li>
</ul>

<p>
ACTION QT4CG-021-03: RD to change <code>must</code> to <code>will</code> in DOM notes about lowercase
</p>

<ul class="org-ul">
<li>RD: I’ve replicated the note wherever localname is referenced.
<ul class="org-ul">
<li>… The note for element localname is slightly different because of
how HTML5 describes the process.</li>
<li>… Added a note saying that the HTML specification does not include
unparsed entity references. The way that the parsing algorithm
works, if the entity is unknown then the entity character data
gets put into the text node as is.</li>
</ul></li>

<li>NW: “Unparsed” has a particular meaning, it might be clearer to say
“unrecognized” or “unknown”</li>
<li>MSM: But in fact, such an entity is expanded, it’s just expanded to
the text of it’s representation!</li>
<li>MK: I think my point is that the headings are wrong: unparsed
entities are something completely different. These notes are about
<b>parsed</b> entities.</li>
<li>RD: So maybe this should be in the text section?</li>
<li>NW: That makes sense.</li>
<li>MSM: And the note should also be revised to avoid the term “unparsed
entity”.</li>
</ul>

<p>
ACTION QT4CG-021-04: RD to revise and move the note about unrecognized entities
</p>

<ul class="org-ul">
<li>RD: The other bit was in terms of namespaces.</li>
<li>MK: The HTML WG has invented a distinction between HTML nodes or XML
nodes and they have different semantics. That roughly worked in
XPath 1.0, where usually all your nodes came from one document.
<ul class="org-ul">
<li>… We have to find a different way to try to achieve those
usability benefits.</li>
<li>… It’s sort of out-of-scope for this PR except to add a note that
says that the data model for HTML and XML nodes are
indistinguishuable and the note about namespace handling in XPath
1.0 can’t apply.</li>
</ul></li>
</ul>

<p>
[Scribe fails to capture some nuance in the discussion of namespace
handling.] Something about special handling for specific namespace
prefixes.
</p>

<ul class="org-ul">
<li>RD: There’s also other handling for putting HTML, MathML, and SVG
elements in their respective namespaces. It’s effectively treating
specific QNames as special indicators and ignoring everything else.
Do we want to follow suit in the construction of the XDM, or do we want
to willfully violate it back into the way XML works.</li>
</ul>

<p>
Proposal: Accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>


<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<ul class="org-ul">
<li>MK: I’d like to make some progress on XSLT things.</li>
</ul>

<p>
Proposal: Hold a meeting explicitly about XSLT features in two weeks.
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>
</body>
</html>
