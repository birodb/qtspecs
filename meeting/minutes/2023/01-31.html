<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 020 Minutes 2023-01-31</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 020 Minutes 2023-01-31</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/12]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[8/14]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a></li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[6/14]</code></a></li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#h-0BCF3769-7D91-45D1-8D2E-12E48F9E6757">2.1. PR #319: Issue 221: op:same-key becomes fn:atomic-equal</a></li>
<li><a href="#h-8455483D-D0AF-499A-A74A-552B33A9F395">2.2. PR #320: Issue 98 - add options parameter to fn:deep-equal</a></li>
<li><a href="#h-C5A6E1C0-5D39-44D5-AEE5-C31BB5386E20">2.3. PR #326: Issue 205: make support for higher-order functions mandatory</a></li>
<li><a href="#h-F2F35033-A57A-4FE6-B7ED-CF7A4B15983D">2.4. PR #324: Proposed syntax and semantics for string templates</a></li>
<li><a href="#h-7C58A4CA-1101-4222-A9D8-4304E75F0B76">2.5. PR #308: Improve the legends in the diagrams</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
</ul>
</div>
</div>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/12]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-02: NW to add an ed-note indicating when it was approved.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-06: RD to reword the introduction to mapping to clarify who’s doing the mapping</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-07: NW to make an issue about the problems of document-uri uniqueness</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-09: RD to add a note stating that the local name should always be lowercase</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-10: RD to consider how to clarify <i>parsed</i> entity parsing.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-019-01: MK to fix the type of <code>$pattern</code> in <code>fn:tokenize()</code></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-020-01: MK to check if the default for <code>type-variety</code> is correct.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-020-02: MK to review the description of the <code>equal-strings</code> function</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-020-03: MK to add examples using options.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-020-03: MK to add an option to return false instead of raising an error</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[8/14]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
Regrets: BTW, JK, EP.
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Anthony (Tony) Bufort (AB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Sasha Firsov (SF)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="off"><code>[&#xa0;]</code> Joel Kalvesmaki (JK) [:12-]</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> John Lumley (JL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="off"><code>[&#xa0;]</code> Ed Porter (EP)</li>
<li class="off"><code>[&#xa0;]</code> Liam Quin (LQ)</li>
<li class="off"><code>[&#xa0;]</code> Adam Retter</li>
<li class="on"><code>[X]</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="off"><code>[&#xa0;]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2023/01-31.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2023/01-24.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>

<p>
The agenda and minutes were not sent by email, chair apologizes.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting <a href="../../agenda/2023/02-07.html">is scheduled for Tuesday, 7 February 2023</a>.
</p>

<p>
No regrets heard.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[6/14]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="on"><code>[X]</code> QT4CG-015-02: NW to improve the width of the diagrams, perhaps multiple views</li>
<li class="on"><code>[X]</code> QT4CG-015-04: NW to investigate of a dynamic presentation is practical</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-02: NW to add an ed-note indicating when it was approved.</li>
<li class="on"><code>[X]</code> QT4CG-016-03: RD to add a note clarifying “known character encoding”
<ul class="org-ul">
<li><a href="https://github.com/qt4cg/qtspecs/pull/330">https://github.com/qt4cg/qtspecs/pull/330</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-016-04: RD to add a note clarifying the “*”/”*” html/version combination
<ul class="org-ul">
<li><a href="https://github.com/qt4cg/qtspecs/pull/330">https://github.com/qt4cg/qtspecs/pull/330</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-016-05: RD to add a “todo” noting the dependency on keyword arguments
<ul class="org-ul">
<li><a href="https://github.com/qt4cg/qtspecs/pull/330">https://github.com/qt4cg/qtspecs/pull/330</a></li>
</ul></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-06: RD to reword the introduction to mapping to clarify who’s doing the mapping</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-07: NW to make an issue about the problems of document-uri uniqueness</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-09: RD to add a note stating that the local name should always be lowercase</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-10: RD to consider how to clarify <i>parsed</i> entity parsing.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-019-01: MK to fix the type of <code>$pattern</code> in <code>fn:tokenize()</code></li>
<li class="on"><code>[X]</code> QT4CG-019-02: NW to revisit the width issue in the type diagrams</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-h-0BCF3769-7D91-45D1-8D2E-12E48F9E6757" class="outline-3">
<h3 id="h-0BCF3769-7D91-45D1-8D2E-12E48F9E6757"><span class="section-number-3">2.1.</span> PR #319: Issue 221: op:same-key becomes fn:atomic-equal</h3>
<div class="outline-text-3" id="text-h-0BCF3769-7D91-45D1-8D2E-12E48F9E6757">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-319">pull request #319</a>. We already have one approval for this PR.
</p>

<p>
MK provides a quick summary of the new <code>fn:atomic-equal()</code> function
and its consequences.
</p>

<ul class="org-ul">
<li>DN: If this is the same as <code>op:same-key()</code>; I see some duplication.</li>
<li>MK: No, the old function <code>op:same-key()</code> no longer exists.</li>
</ul>

<p>
Proposal: accept this pull request
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-h-8455483D-D0AF-499A-A74A-552B33A9F395" class="outline-3">
<h3 id="h-8455483D-D0AF-499A-A74A-552B33A9F395"><span class="section-number-3">2.2.</span> PR #320: Issue 98 - add options parameter to fn:deep-equal</h3>
<div class="outline-text-3" id="text-h-8455483D-D0AF-499A-A74A-552B33A9F395">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-320">pull request #320</a>. Mike asks especially for careful review, this
is not a simple change.
</p>

<p>
MK proposes to introduce and describe the changes.
</p>

<ul class="org-ul">
<li>MK: Add an <code>$options</code> parameter; unfortunately the ~\(collation\)
parameter can’t be merged into it.
<ul class="org-ul">
<li>… The <code>$options</code> defines how the comparisons are made</li>
<li>… The default values are all aligned with the 3.0 verison of the function</li>
</ul></li>
</ul>

<p>
ACTION QT4CG-020-01: MK to check if the default for <code>type-variety</code> is correct.
</p>

<ul class="org-ul">
<li>MK continues
<ul class="org-ul">
<li>… Options are designed so that if you set it to true, you get
stricter comparisions. This explains the name of <code>whitespace-retained</code>.</li>
</ul></li>
<li>RD: Should the unordered comparison option apply to map keys as well?
<ul class="org-ul">
<li>MK: Map entries are always unordered…</li>
</ul></li>
<li>MK: Sequences are deep equal if their items are pair-wise deep-equal</li>
<li>RD: Should we clarify the order in which <code>fn:normalize-unicode</code> and
<code>fn:normalize-space</code> are applied.</li>
</ul>

<p>
ACTION QT4CG-020-02: MK to review the description of the <code>equal-strings</code> function
</p>

<ul class="org-ul">
<li>MK: It’s much the same as before, except where the options come into play.
<ul class="org-ul">
<li>… The <code>unordered-elements</code> option is a bit subtle if you have
mixed content or if there are multiple elements with the same
name.</li>
</ul></li>
<li>JL: So you’re on your own if you have text nodes?</li>
<li>MK: No, just don’t use it if you have text nodes.</li>
<li>CG: Should it sort by node type so that it could work with mixed content?</li>
<li>MK: Could do, but I thought it wasn’t going to be useful for mixed content.
<ul class="org-ul">
<li>… Of course, people do use mixed content in strange ways due to
changes over time.</li>
</ul></li>
<li>MK: Type variety is a little more complex because it has to describe
what’s meant by complex content and simple content.
<ul class="org-ul">
<li>… The logic for how we compare complex and simple content is preserved.</li>
</ul></li>
</ul>

<p>
ACTION QT4CG-020-03: MK to add examples using options.
</p>

<ul class="org-ul">
<li>RD: Would be nice to see examples based on intended usage, like
around comparing two items in a unit test style.</li>
<li>MK: I don’t want to go into enormous detail on use cases.</li>
<li>DN: We have several functions where one of the parameters is a
comparison function. In order to use <code>deep-equal</code> we need an option
to return false instead of raising an error if an error occurs.</li>
<li>MK: The only error condition is if there’s a function item; we
simply don’t have a way of sensibly comparing function items.</li>
<li>DN: Just return false.</li>
<li>MK: But that would make a sequence not-equal to itself.</li>
<li>DN: We can just spell out that it only equals itself if it contains
no function items.</li>
<li>MK: Where we talk about functions being deterministic, we claim
processors can sometimes tell.</li>
<li>DN: I’m not saying <code>deep-equal</code> should never return an error, just
that it should be an option.</li>
</ul>

<p>
ACTION QT4CG-020-03: MK to add an option to return false instead of raising an error
</p>

<ul class="org-ul">
<li>DN: If we don’t return errors for the same conditions, we’re losing
some backwards compatibility</li>
</ul>

<p>
Some discussion of whether or not comparison of typed element content
can raise an error.
</p>

<ul class="org-ul">
<li>DN: I seem to recall that in the old version items were compared
with the “=” value so that times with and without timezones couldn’t
be compared.</li>
<li>MK: I’ll investigate that.</li>

<li>RD: In the context of using this for things like implementing unit
test assertions, one of the things I found useful for diagnostics
was having the location where the failure occurred. Should we have
an option to do that?</li>
<li>MK: My plan was to add an <code>fn:differences</code> function that returns the
differences, rather than just returning true or false.</li>
<li>RD: Tangentially related <code>fn:path</code> only works for nodes. Should we
extend it to maps and arrays?</li>
<li>MK: Maybe,</li>
<li>CG: Do we need the debug option if we have <code>fn:differences</code>?</li>
<li>MK: Let’s wait and see.</li>
<li>DN: In case where there are unordered elements and there are
multiple groups with individuals that are the same, what is the
order of the comparisons?</li>
<li>MK: The current rule is very simple, simplistic even, it says you
sort them by namespace and local name, and then you compare them. If
you have multiple elements with the same name, their order is going
to be significant.</li>
<li>JL: What happens if the child elements themselves are in unordered
sets?</li>
<li>MK: The options are passed down.</li>
<li>DN: I think this is a bit confusing?</li>
<li>MK: Maybe I should change it to do a pure pair-wise set-comparison.</li>
<li>DN: Yes.</li>
<li>DN: Have you considered an implementation that just makes hashes and
compares the hashes?</li>
<li>MK: Yes, that’s the sort of thing. It’s note easy but it can be done.</li>
<li>MSM: Question about the rule that says there’s a mapping, are you
envisioning a 1:1 mapping or just that there is a mapping.</li>
<li>MK: I was phrasing it as there must be a pairing: an ordering of A
and B such that they are pairwise equal.</li>
<li>MSM: So an empty element named E will not match in this comparison a
sequence of 3 empty elements all named E.</li>
<li>MK: No.</li>
</ul>
</div>
</div>

<div id="outline-container-h-C5A6E1C0-5D39-44D5-AEE5-C31BB5386E20" class="outline-3">
<h3 id="h-C5A6E1C0-5D39-44D5-AEE5-C31BB5386E20"><span class="section-number-3">2.3.</span> PR #326: Issue 205: make support for higher-order functions mandatory</h3>
<div class="outline-text-3" id="text-h-C5A6E1C0-5D39-44D5-AEE5-C31BB5386E20">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-326">pull request #326</a>. We already have one approval for this PR.
</p>

<ul class="org-ul">
<li>MK: In the current specs, support for higher order functions is
optional. That’s not really viable anymore. All of the 3.1
implmentations we know about already support it.</li>
<li>JL: Does that mean you have to implement all the HoF?</li>
<li>MK: Yes.</li>
<li>MSM: Is it really true? I thought eXist didn’t.</li>
<li>MK: They don’t claim to be 3.1, do they?</li>
<li>CG: I thought eXist did.</li>
<li>MK: We’re defining so much functionality with HoF that you really
have to implement them.</li>
</ul>

<p>
Some discussion of eXist’s support.
</p>

<ul class="org-ul">
<li>MK: Making a feature mandatory doesn’t mean everyone will implement it!</li>
<li>MSM: True, it just makes comparing conformance easier.</li>
<li>MK: It also means it allows users to use features that they might
not if it was optional.</li>
</ul>

<p>
Proposal: accept this PR
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-h-F2F35033-A57A-4FE6-B7ED-CF7A4B15983D" class="outline-3">
<h3 id="h-F2F35033-A57A-4FE6-B7ED-CF7A4B15983D"><span class="section-number-3">2.4.</span> PR #324: Proposed syntax and semantics for string templates</h3>
<div class="outline-text-3" id="text-h-F2F35033-A57A-4FE6-B7ED-CF7A4B15983D">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-324">pull request #324</a>. We already have one approval for this PR.
</p>

<p>
MK reviews the XQuery version.
</p>

<ul class="org-ul">
<li>MK: I moved string constructors and string concatenation into the
same section.
<ul class="org-ul">
<li>… Proposed syntax is to use backtick delimited strings.</li>
<li>… The fixed part is just what it says, with escaped delimiters unescaped.</li>
<li>… The variable part works like attributes in XQuery (but not
exactly like XSLT, unfortunately)</li>
<li>… That’s it, except for a few complications.</li>
<li>… One complication is that ampersands are treated slightly differently.</li>
<li>… There’s also a tokenization ambiguity: <code>``[1]</code>. It’s resolved in
favor of string constructor on the longest token rule.</li>
</ul></li>
<li>MK: If we didn’t have that rule, then XPath and XQuery would behave
differently.</li>
<li>DN: In other programming languages, this is called “string
interpolation”, maybe we should use the same term.</li>
<li>DN: I think there could be more than one variable part in a string
interpolation, but the prose suggests that there can be only one.</li>
<li>MK: It certainly can be more than one, as the syntax makes clear.</li>
<li>DN: Okay, maybe there should be at least one example with more than
one variable part.</li>
<li>MK: That’s already true!</li>
<li>CG: The name “template” is more familiar to me, it’s like
JavaScript.</li>
<li>MK: Yes, languages have different names for the same thing but
slightly different syntaxes.</li>
<li>RD: The XSLT spec already uses “attribute value templates” and “text
value templates”.</li>
<li>MK: We could call this “string value templates” if we really wanted to.</li>
<li>RD: I think internal consistency is more important than consistency
with other languages.</li>
<li>MK: The thing I always ask myself is, if someone comes across this
term in an error message and hasn’t read the spec, are they going to
guess correctly what it’s referring to.</li>
<li>SF: They’re called “template literals” in JavaScript. In others
they’re called by different names.</li>
<li>MK: I don’t want to cause it a literal because it’s an expression.</li>
<li>DN: I wasn’t trying to force another name, I just thought it would
be useful to mention “string interopolation” in the prose.</li>
<li>SF: We should include “string interpolation” and “template
literals”.</li>
</ul>

<p>
Proposal: accept this PR
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-h-7C58A4CA-1101-4222-A9D8-4304E75F0B76" class="outline-3">
<h3 id="h-7C58A4CA-1101-4222-A9D8-4304E75F0B76"><span class="section-number-3">2.5.</span> PR #308: Improve the legends in the diagrams</h3>
<div class="outline-text-3" id="text-h-7C58A4CA-1101-4222-A9D8-4304E75F0B76">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-308">pull request #308</a>.
</p>

<p>
NW introduces the changes.
</p>

<ul class="org-ul">
<li>NW: Last week, several folks said these should just be lists. So I just made them lists!</li>
<li>RD: Would it be possible to move the legend to the right?</li>
<li>NW: I’ll see what I can do.</li>
</ul>

<p>
Proposal: accept this PR
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<ul class="org-ul">
<li>RD requests issue #307 for the agenda next week.</li>
</ul>
</div>
</div>
</div>
</body>
</html>
