<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 029 Minutes 2023-04-04</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 029 Minutes 2023-04-04</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/14]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[11/13]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a>
<ul>
<li><a href="#h-C1590AE6-AA6D-49E9-A040-5006E92C0784">1.2.1. Status so far…</a></li>
</ul>
</li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[0/7]</code></a></li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#h-F1FFD1AB-0328-4748-8384-BA8AD7A2C576">2.1. PR #411: Remove the note from the parse-html unparsed-entity sections</a></li>
<li><a href="#iss-399">2.2. Issue #399: Using Multilevel Hierarchy and Abstraction…deep-equal</a></li>
<li><a href="#iss-280">2.3. Issue #280: Why is resolve-uri forbidden … a fragment identifier?</a></li>
<li><a href="#iss-293">2.4. Issue #293: Error in fn:doc-available specification</a></li>
<li><a href="#iss-315">2.5. Issue #315: fn:transform inconsistency: initial-mode</a></li>
<li><a href="#iss-367">2.6. Issue #367: Focus for RHS of thin arrow expressions</a></li>
<li><a href="#iss-397">2.7. Issue #397: Type names</a></li>
</ul>
</li>
<li><a href="#adjourned">3. Adjourned</a></li>
</ul>
</div>
</div>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/14]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-023-01: NW to review the stylesheets for functions across XPath and XSLT</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-025-03: MK to revise and expand technical detail in PR #375</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-026-01: MK to write a summary paper that outlines the decisions we need to make on “value sequences”</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-027-01: MK to update the text for next-match wrt type() matching</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-028-01: MK to summarize the options available wrt deep equal and errors</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-01: RD+DN to draft spec prose for the “divide and conquer” approach outlined in issue #399</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-02: NW to check how Java and JavaScript behave when resolving a relative URI against a base URI that has a fragment identifier.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-03: NW to draft a PR that resolves issue #280</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-04: CG to draft a PR that resolves issue #293</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-05: NW to draft a PR that resolves issue #315</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-06: NW to put a review of the thin arrow operator on the agenda (with links to the relevant issues)</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-07: NW to open the next discussion of #397 with a demo from DN</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[11/13]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Anthony (Tony) Bufort (AB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Sasha Firsov (SF)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK) [0:10-]</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> John Lumley (JL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="on"><code>[X]</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="off"><code>[&#xa0;]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
<li class="on"><code>[X]</code> Mohamed Zergaoui</li>
</ul>

<p>
SF announces <a href="https://github.com/WICG/webcomponents/issues/997">his proposal</a> for templating using XSLT in the webcomments group!
</p>
</div>
</div>


<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2023/04-04.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>

<div id="outline-container-h-C1590AE6-AA6D-49E9-A040-5006E92C0784" class="outline-4">
<h4 id="h-C1590AE6-AA6D-49E9-A040-5006E92C0784"><span class="section-number-4">1.2.1.</span> Status so far…</h4>
<div class="outline-text-4" id="text-h-C1590AE6-AA6D-49E9-A040-5006E92C0784">

<div id="org454960e" class="figure">
<p><img src="./issues-open-2023-04-03.png" alt="issues-open-2023-04-03.png" />
</p>
<p><span class="figure-number">Figure 1: </span>“Burn down” chart on open issues</p>
</div>


<div id="org601135f" class="figure">
<p><img src="./issues-by-spec-2023-04-03.png" alt="issues-by-spec-2023-04-03.png" />
</p>
<p><span class="figure-number">Figure 2: </span>Open issues by specification</p>
</div>


<div id="orgd91a59a" class="figure">
<p><img src="./issues-by-type-2023-04-03.png" alt="issues-by-type-2023-04-03.png" />
</p>
<p><span class="figure-number">Figure 3: </span>“Burn down” chart on open issues</p>
</div>
</div>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2023/03-28.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting <a href="../../agenda/2023/04-11.html">is scheduled for Tuesday, 11 April 2023</a>.
</p>

<p>
No regrets heard.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[0/7]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-023-01: NW to review the stylesheets for functions across XPath and XSLT</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-025-03: MK to revise and expand technical detail in PR #375</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-026-01: MK to write a summary paper that outlines the decisions we need to make on “value sequences”</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-027-01: MK to update the text for next-match wrt type() matching</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-028-01: MK to summarize the options available wrt deep equal and errors</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
<p>
In response to feedback from last week, this agenda includes more
issues and fewer PRs. MSM and I reviewed the issues list and selected
a group of issues that (a) looked like they would benefit from
discussion and (b) were not marked Feature or Enhancement. (We
obviously need to discuss enhancements and features too, but focusing
on bugs and errors seemed like a good initial strategy.)
</p>

<p>
I propose an initial 15 minute time box on each issue. If, after 10
minutes, if we aren’t closing in on a resolution, let’s work out what
we need to do to improve our chances of being able to resolve it next
time. 
</p>
</div>

<div id="outline-container-h-F1FFD1AB-0328-4748-8384-BA8AD7A2C576" class="outline-3">
<h3 id="h-F1FFD1AB-0328-4748-8384-BA8AD7A2C576"><span class="section-number-3">2.1.</span> PR #411: Remove the note from the parse-html unparsed-entity sections</h3>
<div class="outline-text-3" id="text-h-F1FFD1AB-0328-4748-8384-BA8AD7A2C576">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-411">issue #411</a>
</p>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-iss-399" class="outline-3">
<h3 id="iss-399"><span class="section-number-3">2.2.</span> Issue #399: Using Multilevel Hierarchy and Abstraction…deep-equal</h3>
<div class="outline-text-3" id="text-iss-399">
<p>
See <a href="https://github.com/qt4cg/qtspecs/issues/399">issue #399</a>
</p>

<p>
DN outlines his proposal in issue #399. The strategy we should employ
is “divide and conquer.”
</p>

<p>
DN walks through the expanding list in the issue: deep-equal,
deep-equal-sequence, etc. There are functions for sequences, atomic
values, maps, arrays, nodes, elements, etc.
</p>

<ul class="org-ul">
<li>DN: As you can see on the screen, this decomposes the problem into
smaller, easier to understand pieces.</li>
<li>JL: Is it my understanding that things that are normalizations
happen at the level when you’ve got a set of things, before they
then get compared?</li>
<li>DN: Yes, I think so. And I forgot: maybe implicitly in the current
specification, there is such division. But it is not explicitly
stated. Some people may not even notice this aspect of the specification.</li>
<li>JL: I’m still confused. Are there any of these functions where there
are normalization checks that have some influence up and down the
hierarchy?</li>
<li>MSM: What do you mean by normalization?</li>
<li>JL: Well, you might want to ignore whitespace nodes, for example.</li>
<li>DN: This is the issue that RD raised, we will still need to have
some kind of options or configurations that tells us what to do in
each case. What I thought we could do in each case is to make a
nested map that has the configuration data for each level. We can
provide this as a system function. When ever someone needs to
provide different options, they can use some sort of put operation
only on the level they need.</li>
<li>RD: Looking at the current definition of deep equals, the rules
section has four groups, one dealing with atomics, then maps, then
arrays, then nodes. This is essentially the decomposition strategy.
So my question is, are you talking about splitting those into
separate subsections, or making them specific functions?</li>
<li>DN: I believe that the quality of our documentation would benefit
from splitting larger problems into smaller. Making different
sections and referring to them explicilty. I think we could have
different functions explicitly, but maybe we don’t need to expose
them all at the user level.</li>
<li>RD: So if this is purely an organization and presentation thing,
would it make more sense to have a top-level heading, something like
“deep equals” or “comparison” and then have a section for the record
definition, one for the function, and then one for each of the four
sections we already have. Would organizing that way make sense?
We have similar precedents in the casting rules, for example?</li>
<li>DN: I’m not sure I understand clearly what the difference is between
that proposal and what we have here.</li>
<li>RD: We’d need to make something that was a “table of contents”
section similar to the way that we do the casting rules. Then we can
move rules into their own subsections. And move the record type
definition out.</li>
<li>SF: DN says we need to use feature flags for different deep-equal
subfeatures. I’d like to elevete this to something that’s available
at the system level on every subtree.</li>
<li>NW: There’s the question of the “configuration map” that I think
isn’t spelled out clearly enough for me.</li>
<li>MK: I’d like to see someone experiment with different ways of
presenting it. The one thing I don’t want to be here is defensive.</li>
<li>RD: I could go have a go at it.</li>
</ul>

<p>
ACTION QT4CG-029-01: RD+DN to draft spec prose for the “divide and conquer” approach outlined in issue #399
</p>

<ul class="org-ul">
<li>DN: I’d like to make sure that the minutes record the idea of having
a map to be used for configuration options. In any case we can have
preference provided as a system function.</li>
<li>NW: I’ve done my best, but that configuration map is one of the
things I’m confused bout.</li>
</ul>
</div>
</div>


<div id="outline-container-iss-280" class="outline-3">
<h3 id="iss-280"><span class="section-number-3">2.3.</span> Issue #280: Why is resolve-uri forbidden … a fragment identifier?</h3>
<div class="outline-text-3" id="text-iss-280">
<p>
See <a href="https://github.com/qt4cg/qtspecs/issues/280">issue 280</a>.
</p>

<ul class="org-ul">
<li>NW outlines the issue.</li>
</ul>

<p>
General agreement.
</p>

<ul class="org-ul">
<li>MSM: Can we make it clear that strictly speaking, in at least one
reading of the RFC, this is a little more relaxed.</li>
<li>RD: Is this a change in behavior with how Java and JavaScript work?</li>
</ul>

<p>
ACTION QT4CG-029-02: NW to check how Java and JavaScript behave when resolving a relative URI against a base URI that has a fragment identifier.
ACTION QT4CG-029-03: NW to draft a PR that resolves issue #280
</p>
</div>
</div>

<div id="outline-container-iss-293" class="outline-3">
<h3 id="iss-293"><span class="section-number-3">2.4.</span> Issue #293: Error in fn:doc-available specification</h3>
<div class="outline-text-3" id="text-iss-293">
<p>
See <a href="https://github.com/qt4cg/qtspecs/issues/293">issue 293</a>.
</p>

<ul class="org-ul">
<li>CG: There’s a difference here between what the normative prose says
and what the note says. MK outlines the solution in a comment.</li>
<li>MK: I have a vague memory of this issue. It looks like the main
prose was updated but the error code wasn’t.</li>
<li>JL: The same thing happens for unparsed-text-available()</li>
</ul>

<p>
ACTION QT4CG-029-04: CG to draft a PR that resolves issue #293
</p>
</div>
</div>


<div id="outline-container-iss-315" class="outline-3">
<h3 id="iss-315"><span class="section-number-3">2.5.</span> Issue #315: fn:transform inconsistency: initial-mode</h3>
<div class="outline-text-3" id="text-iss-315">
<p>
See <a href="https://github.com/qt4cg/qtspecs/issues/315">issue 315</a>.
</p>

<p>
MK explains the issue.
</p>

<ul class="org-ul">
<li>MK: This is technically a breaking change, but it</li>

<li>DN: What is the difference between the unnamed mode and the default mode?</li>
<li>MK: You can declare that a mode other than the unnamed mode is the default.</li>
</ul>

<p>
ACTION QT4CG-029-05: NW to draft a PR that resolves issue #315
</p>
</div>
</div>

<div id="outline-container-iss-367" class="outline-3">
<h3 id="iss-367"><span class="section-number-3">2.6.</span> Issue #367: Focus for RHS of thin arrow expressions</h3>
<div class="outline-text-3" id="text-iss-367">
<p>
See <a href="https://github.com/qt4cg/qtspecs/issues/367">issue 367</a>.
</p>

<p>
MK explains the issue.
</p>

<ul class="org-ul">
<li>MK: I think describing the <code>-&gt;</code> in terms of the <code>!</code> operator was
done without considering the fact that doing so changes the context
for the other arguments.
<ul class="org-ul">
<li>… This makes <code>-&gt;</code> and <code>=&gt;</code> different in a subtle way.</li>
<li>… This proposal is to define <code>-&gt;</code> in terms of a <code>for</code> expression.</li>
</ul></li>
<li>DN: I’m not ready to vote either way because I don’t think I’ve seen
this before.</li>
<li>MK: Can I suggest an action then to put on the agenda a review of
the thin arrow operator?</li>
<li>RD: There are also a couple of issues that folks have raised around
those. It would be good to include those as well.</li>
</ul>

<p>
ACTION QT4CG-029-06: NW to put a review of the thin arrow operator on the agenda (with links to the relevant issues)
</p>
</div>
</div>

<div id="outline-container-iss-397" class="outline-3">
<h3 id="iss-397"><span class="section-number-3">2.7.</span> Issue #397: Type names</h3>
<div class="outline-text-3" id="text-iss-397">
<p>
See <a href="https://github.com/qt4cg/qtspecs/issues/397">issue 397</a>.
</p>

<ul class="org-ul">
<li>MK: This went into the initial draft I produced, but there are some
inconsistency in the presentation there and it generally needs
review.
<ul class="org-ul">
<li>… Background here is that I started writing stylesheets using
record types and that turned out to be pretty unweildy. Having to
repeat the record type definition everywhere is too cumbersome.
(h/t to John Snelson for the original idea.)</li>
<li>… The proposal here is that you can declare a name that maps to an
item type and then in place of the item type you can use that type
name.</li>
<li>… MK walks through some of the details of the proposal.</li>
</ul></li>
<li>MK: I think I’ve been persuaded that they should be in the same
symbol space works better. When you declare an item type, it’s not
allowed to conflict with an item type that you’ve imported from a
schema. You could do that at the namespace level or the individual
name level. I’d go for at the level of the individual name.</li>
<li>DN: I think this is a very good idea. 
<ul class="org-ul">
<li>… DN discusses his objection raised in his first comment on the issue</li>
<li>… Why isn’t this in XPath? It means that the user has to
redundantly make the definition in both XQuery and XSLT. It would
be much better to have it in XPath. I’m convinced that this is
inferior to have the decision to have it in XPath.</li>
</ul></li>
<li>MK: I think the problem with doing it at the XPath level is knowing
how to do it. In many cases, languages that use XPath have different
expressions in many different places and no one expression can
change the static context for any other expression. If you’re
calling XPath from JavaScript, how can you do this?</li>
<li>DN: I can answer that, you can have a function library that’s
written purely in XPath that declares the types and you can import
them.</li>
<li>RD: The type names operate in the prologue that defines the static
context. If you disallow it in the context, then you’d be
disallowing global variables and all sorts of other things. It makes
sense for this to be part of the prologue so that it applies to the
entire XQuery module that you can then import into other modules.
<ul class="org-ul">
<li>… The reason it has an XQuery and XSLT declaration is the same way
that you have xsl:variable and xsl:function in XSLT and declare
variable and declare function in XQuery: you’re defining parts of
the global context.</li>
</ul></li>
<li>DN: I never said that having type names defined in the prologue
should be forbidden, I think that you could define them there and it
doesn’t forbid having them in XPath.</li>
<li>MK: How is this useful though, the scope of XPath is an expression.</li>
<li>DN: But you can import libraries into XPath.</li>
<li>RD: If I understand what you’re proposing, it’s that we have and
keep the global item types, but we also have a local version kind of
like let expressions that can appear in XPath.</li>
<li>DN: I care very little about the global level of XQuery and XSLT,
but I care a lot about XPath. I’ve pointed out the redundancy
problem that follows from this.</li>
<li>RD: I think we can have all three: a global XSLT syntax, a global
XQuery one like define variable, and an expression-scope specific
syntax like the let expression.</li>
<li>DN: Yes, and it’s not unfamiliar. The map data type was first
defined in XPath and then later that got added to XSLT, for example.
It would be extermely inconvenient, unusual, and unjustified to only
be able to define maps in XQuery and XSLT but not XPath and this
problem is exactly the same.</li>
<li>MK: But the use case for this is about reusing types that are in
your function library.</li>
<li>DN: Yes, and there are global function libraries that can be
imported.</li>
<li>MK: Not in our specifications, we don’t. There’s no import mechanism
in XPath. People can implement it, but it’s not part of our
language!</li>
<li>DN: But that doesn’t mean that people don’t do this!</li>
<li>MK: But if you can extend beyond our specifications to a global
function library, then you can extend it to a global type library as
well.</li>
<li>RD: As a way forward here, if we just consider the global scope in
this proposal, we can have a separate proposal for a local scope
proposal.</li>
<li>DN: I don’t think there is a need for a special proposal, it’s just
this proposal but remove the references to XSLT and XQuery.</li>
<li>RD outlines some ideas about how it might be possible to build on
this proposal in the future to have local scopes.</li>
<li>RD: Not everyone uses the approach of allowing a global function
library in XPath.</li>
<li>DN: Not everyone uses xsl:map, some people just use XPath!</li>
<li>RD: The analagous things here are functions and variables. It makes
sense to have both mechanisms and let the user choose.</li>
</ul>

<p>
We’ve reached the end of the hour without resolving this issue.
</p>

<ul class="org-ul">
<li>NW: What next?</li>
<li>MK: If DN has a concept of loading global libraries into XPath, we
need to understand that better.</li>
</ul>

<p>
ACTION QT4CG-029-07: NW to open the next discussion of #397 with a demo from DN
</p>
</div>
</div>
</div>

<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">3.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
<p>
None heard.
</p>
</div>
</div>
</div>
</body>
</html>