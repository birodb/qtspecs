<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 030 Minutes 2023-04-11</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 030 Minutes 2023-04-11</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/14]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[10/13]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a>
<ul>
<li><a href="#h-C1590AE6-AA6D-49E9-A040-5006E92C0784">1.2.1. Status so far…</a></li>
</ul>
</li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[0/7]</code></a></li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#h-36640F80-52CF-4E9B-B441-66F9020FD99F">2.1. Review of the thin arrow operator</a></li>
<li><a href="#pr-415">2.2. PR #415: Revise parse/build URI functions for UNC names</a></li>
</ul>
</li>
<li><a href="#adjourned">3. Adjourned</a></li>
</ul>
</div>
</div>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Minutes</h2>
<div class="outline-text-2" id="text-minutes">
<p>
Approved <a href="./04-18.html">at meeting 031</a> on 18 April 2023.
</p>
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/14]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-023-01: NW to review the stylesheets for functions across XPath and XSLT
<ul class="org-ul">
<li>Stylesheets for formatting functions in F&amp;O and XSLT are out-of-sync</li>
<li>We’re not handling default values for parameters on the XSLT side</li>
</ul></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-025-03: MK to revise and expand technical detail in PR #375</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-026-01: MK to write a summary paper that outlines the decisions we need to make on “value sequences”</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-027-01: MK to update the text for next-match wrt type() matching</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-028-01: MK to summarize the options available wrt deep equal and errors</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-01: RD+DN to draft spec prose for the “divide and conquer” approach outlined in issue #399</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-07: NW to open the next discussion of #397 with a demo from DN</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-030-01: RD to create issues that identify more clearly the various aspects of <code>!</code>, <code>=&gt;</code>, <code>-&gt;</code>, and inline function definitions.</li>
</ul>
</div>
</div>


<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[10/13]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Anthony (Tony) Bufort (AB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Sasha Firsov (SF)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK) [0:10-]</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> John Lumley (JL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="on"><code>[X]</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="off"><code>[&#xa0;]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
<li class="off"><code>[&#xa0;]</code> Mohamed Zergaoui</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2023/04-11.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>

<div id="outline-container-h-C1590AE6-AA6D-49E9-A040-5006E92C0784" class="outline-4">
<h4 id="h-C1590AE6-AA6D-49E9-A040-5006E92C0784"><span class="section-number-4">1.2.1.</span> Status so far…</h4>
<div class="outline-text-4" id="text-h-C1590AE6-AA6D-49E9-A040-5006E92C0784">

<div id="org416e9b2" class="figure">
<p><img src="./issues-open-2023-04-11.png" alt="issues-open-2023-04-11.png" />
</p>
<p><span class="figure-number">Figure 1: </span>“Burn down” chart on open issues</p>
</div>


<div id="orgbeb6f46" class="figure">
<p><img src="./issues-by-spec-2023-04-11.png" alt="issues-by-spec-2023-04-11.png" />
</p>
<p><span class="figure-number">Figure 2: </span>Open issues by specification</p>
</div>


<div id="org05c8db9" class="figure">
<p><img src="./issues-by-type-2023-04-11.png" alt="issues-by-type-2023-04-11.png" />
</p>
<p><span class="figure-number">Figure 3: </span>“Burn down” chart on open issues</p>
</div>
</div>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2023/04-04.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting <a href="../../agenda/2023/04-18.html">is scheduled for Tuesday, 18 April 2023</a>.
</p>

<p>
No regrets heard.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[0/7]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-023-01: NW to review the stylesheets for functions across XPath and XSLT
<ul class="org-ul">
<li>Stylesheets for formatting functions in F&amp;O and XSLT are out-of-sync</li>
<li>We’re not handling default values for parameters on the XSLT side</li>
</ul></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-025-03: MK to revise and expand technical detail in PR #375</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-026-01: MK to write a summary paper that outlines the decisions we need to make on “value sequences”</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-027-01: MK to update the text for next-match wrt type() matching</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-028-01: MK to summarize the options available wrt deep equal and errors</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-01: RD+DN to draft spec prose for the “divide and conquer” approach outlined in issue #399</li>
<li class="on"><code>[X]</code> QT4CG-029-02: NW to check how Java and JavaScript behave when resolving a relative URI against a base URI that has a fragment identifier.
<ul class="org-ul">
<li><a href="https://lists.w3.org/Archives/Public/public-xslt-40/2023Apr/0003.html">They don’t care.</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-029-03: NW to draft a PR that resolves issue #280
<ul class="org-ul">
<li><a href="https://github.com/qt4cg/qtspecs/pull/426">PR #426</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-029-04: CG to draft a PR that resolves issue #293
<ul class="org-ul">
<li><a href="https://github.com/qt4cg/qtspecs/pull/430">PR #430</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-029-05: NW to draft a PR that resolves issue #315
<ul class="org-ul">
<li><a href="https://github.com/qt4cg/qtspecs/pull/427">PR #427</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-029-06: NW to put a review of the thin arrow operator on the agenda (with links to the relevant issues)</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-07: NW to open the next discussion of #397 with a demo from DN</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-h-36640F80-52CF-4E9B-B441-66F9020FD99F" class="outline-3">
<h3 id="h-36640F80-52CF-4E9B-B441-66F9020FD99F"><span class="section-number-3">2.1.</span> Review of the thin arrow operator</h3>
<div class="outline-text-3" id="text-h-36640F80-52CF-4E9B-B441-66F9020FD99F">
<p>
See <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#id-arrow-operator">§4.20 Arrow Expressions</a>.
</p>

<p>
MK reviews the XPath version of the simple arrow operator.
</p>

<ul class="org-ul">
<li>MK: The “fat arrow” operator is in 3.1 and proved very successful,
but it didn’t do what some people expected: to apply the function on
the left hand side to hand item on the right hand side. The thin
arrow operator is a variant that does that.
<ul class="org-ul">
<li>… There was another bit of functionality added; as well as having
a function and argument list on the right hand side, you could
have an enclosed expression on the RHS. And that’s applied to each
item on the left.</li>
<li>… We have an issue about how arrow works when it applies to an
ArrowStaticFunction. Rather than look at that point on its own, we
decided to review the operator in context first.</li>
</ul></li>
<li>DN: Are we abandoning the ! operator, and what’s the difference
between <code>!</code> and <code>-&gt;</code>? It looks like it’s the same thing.
<ul class="org-ul">
<li>… We appear to be overloading our operators with too many things.</li>
</ul></li>
<li>MK: I think that’s an excellent question. Does this add enough
functionality to justify the complexity?</li>
</ul>

<p>
Some attempt to recall who originally proposed <code>-&gt;</code>. It’s not clear to
us now.
</p>

<ul class="org-ul">
<li>CG: But it is an often requested feature from users of BaseX?</li>
<li>RD: Didn’t this come out of changes to simplifying inline functions?
<ul class="org-ul">
<li>… If you can bind a variable to an inline function expression
using <code>-&gt;</code>, then how do you do that in chaining within the arrow operator?
So I assume that’s where it came about.</li>
<li>… And once you have <code>-&gt; {enclosedexpr}</code>, it follows that the other
things should be supported because those are what are supported on <code>=&gt;</code></li>
</ul></li>
<li>JL: Is it effectively the question of the default context item in the case of <code>=&gt;</code> and <code>!</code>?</li>
<li>MK: I think that’s the question of what the exact equivalence should
be. But DN’s point is more about whether we should have this at all.
<ul class="org-ul">
<li>… I think a lot of this is based on the fact that <code>=&gt;</code> didn’t do
what some people wanted.</li>
<li>… I think the other argument that came in was to do with
precedence. If you’re trying to chain, like <code>$x -&gt; f() -&gt; {.+1}</code>, the precedence of the <code>!</code> 
operator is wrong, you need extra parentheses.</li>
</ul></li>
<li>DN: I don’t think this is justified at all</li>
<li>RD: Can we look at 4.4.2.4 Inline Function Expressions? Here the
<code>-&gt;</code> operator has been introduced as an alias for <code>function</code> as a
way of simplifying the definition of inline function expressions. If
you look through the issue history, you’ll find further proposals.
The main thing is the use of the <code>-&gt;</code> operator as an inline function.
<ul class="org-ul">
<li>… E.g, <code>fn:for-each-pair($A, $B, -&gt;($a, $b) {$a + $b})</code></li>
<li>… Now if we go back to the arrow operator…4.20:</li>
<li>… The <code>=&gt;</code> variant here takes a dynamic function call as well as a
static one. With the <code>-&gt;</code> syntax, in addition to those, you can
also use the <code>-&gt;</code> definition to instead use an inline function.
Then the question is, do we just want to use the <code>-&gt;</code> here as a
thing that works like the <code>=&gt;</code> but instead of a dynamic function
call it’s an inline function call, or do we want to extend it out.</li>
<li>… I think that’s the question.</li>
</ul></li>
<li>CG: I really like the examples that are shown in this section. The
code gets pretty unreadable if you can only use <code>=&gt;</code>. They start
with <code>=&gt;</code> and then when it gets more complicated, they have to
switch to FLOWR expressions.</li>
<li>MK: How does it look if you instead use a <code>=&gt;</code> and feed it into a <code>for each</code>.</li>
<li>CG: That works too, but most folks aren’t that familiar with it.</li>
<li>SF: The chaining of operations in the <code>-&gt;</code> and <code>=&gt;</code> is what really seems most significant?</li>
<li>MK: Yes, I think that’s the case.
<ul class="org-ul">
<li>… A good exmaple is: <code>(1 to 5) -&gt; xs:double() -&gt; math:sqrt() -&gt; {.+1} =&gt; sum()</code></li>
</ul></li>
<li>SF: Data functions do get used to data functions and chaining
operators. It’s more about alignment with a generic developer
pattern.</li>
<li>JL: I think we’ve now got a small problem. I like the <code>-&gt;</code> with
respect to <code>=&gt;</code> but when we use it as a synonym for <code>function</code>, we
have a problem. In one case the <code>-&gt;</code> is followed by a bracketed set
and a braced set and in the other it’s just followed by a braced set
or some other function call. I’m not sure that’s the easiest thing!</li>
<li>MK: Are you worried about technical ambiguity?</li>
<li>JL: No, I’m worried about user confusion.</li>
<li>DN: I count three different meanings of <code>-&gt;</code>: 1. To replace <code>!</code>, 2.
a lexical replacement for <code>function</code>, and 3. chaining. Chaining is
most convincing, but given the other two, this makes it difficult
and hard to understand. Maybe we can use some other symbol for
chaining. Or I’ve always argued that we need a function for doing
multiple-function composition.</li>
<li>RD: I think it’s useful having different ways to accomplish the same
task. Otherwise, you could say everything is equivalent to a FLOWR
statement so that’s all we’re going to get. It’s good to support
different people and different authoring styles. If someone is more
used to the chaining style in function oriented languages, then this
syntax would be more natural. I think can be useful in that context.</li>
<li>CG: I completely agree with RD. I remember when <code>=&gt;</code> was introduced.
I was hesitant if it was really needed because you could do
everything with nested functions. But now I see lots of people using
it and I think the <code>-&gt;</code> would also be useful.</li>
<li>MK: MSM, can you offer any thoughts?</li>
<li>MSM: I was thinking that I’m kind of torn. I like having things that
are easy to read and understand. CG’s observation that a lot of
people find chaining helpful and idiomatic is useful. That seems
like a reasonably powerful argument in favor. On the other hand, I
have to admit that in my own use of XQuery and XSLT, I tend to stick
with very simple things. I write almost everything as FLOWR
expressions because I find them easy to read and understand and use.
So getting away from them has no particular appeal to me.
<ul class="org-ul">
<li>… In the same way, I think I’ve saved a lot of mental energy for
other things by never trying to remember the operator priorities.
I use parentheses because they save me brain cells.</li>
<li>… I like the convenience and I think we can have a mneumonic that
<code>=&gt;</code> pass a group of things and <code>-&gt;</code> passes a single thing. But
the subtlety troubles me. If you have that many operators that are
so similar, it seems problematic.</li>
</ul></li>
<li>RD: If we split out the inline function variant by introducing a
different mechanism to specify inline functions. There have been
various iterations on the proposal. Then that would keep the <code>-&gt;</code>
operator mirroring the way that the <code>=&gt;</code> operator works. In that
sense, it would be overloaded. And then if we allow inline function
definitions to put inside both of these, to allow the use case where
you want to do something simple. (The use case above.)</li>
<li>MK: I’m not sure exactly what you’re proposing.</li>
<li>RD: Looking at where <code>=&gt;</code> and <code>-&gt;</code> are defined, I’m proposing to
remove arrow followed by enclose expression. (The third bullet in the second list.)
<ul class="org-ul">
<li>… That would reduce the differences between them. The only
semantic difference is then whether it applies to one item or all
items. We could then change the syntax for the condensed form of inline function expressions.
Let’s say we replaced that with <code>fun</code>, what we could then do in the third bullet would be
apply that to both <code>-&gt;</code> and <code>=&gt;</code> to both by allowing <code>fun { expr }</code>. In the <code>=&gt;</code> case, the
anonymous argument would be the sequence of all the items contained within it and in the 
<code>-&gt;</code> it would be the single item.</li>
</ul></li>
<li>DN: I still have trouble following. I’d like RD to write a proposal. I still think I’d be
a little bit confused in an expression where we have both <code>-&gt;</code> and <code>=&gt;</code>. We don’t have
an <code>apply</code> operator and we don’t have multiple composition functions. I think we should
focus and emphasis our attention on those issues first.
<ul class="org-ul">
<li>… I’ve always tried to be a user advocate and I’m saying that if <code>-&gt;</code> is accepted,
it would really be very painful to try to understand what is going on.</li>
</ul></li>
<li>MK: I take the view that this is an operator that may be loved by experts who know exactly
what it means, but it will be bewildering to users.</li>
<li>NW: I find the overlapping combination of <code>!</code> and <code>-&gt;</code> and <code>=&gt;</code> is confusing.</li>
<li>MK: I think we should take this as a proposal that’s been made, not
as the status quo. We should be looking at it on that basis, rather
than as something that is in the spec. If you took that perspective,
what would your approach be to accepting it.</li>
<li>CG: I think we can look at inline function definitions and <code>-&gt;</code> as a chaining operator
seperately. That will help.</li>
<li>RD: We’ve got several overlapping things going on here. I can try to
create issues to cover them.</li>
</ul>

<p>
ACTION: RD to create issues that identify more clearly the various aspects of <code>!</code>, <code>=&gt;</code>, <code>-&gt;</code>, and inline function definitions.
</p>

<ul class="org-ul">
<li>MK: Maybe a straw poll?</li>
</ul>

<p>
Some discussion about what the question should be.
</p>

<p>
Straw poll: Are you: 1. in favor of keeping <code>-&gt;</code> as a chaining operator, opposed to it, or undecided?
</p>

<p>
Group consent that the poll is understood.
</p>

<ul class="org-ul">
<li>In favor: 5</li>
<li>Opposed: 0</li>
<li>Undecided: 5</li>
</ul>

<p>
Typical results, really. 🙂
</p>

<ul class="org-ul">
<li>RD: Just checking one code base I’m working on and <code>!</code> occurs 82
times and <code>=&gt;</code> occurs 10 times.</li>
<li>DN: That’s a kind of user straw poll!</li>
<li>DN: I have a complementary proposal: I think that we should name
whatever graphical representation we choose for this operator, the
“apply” operator. We need a better function application operator and
we need better functional composition in the language.</li>
</ul>
</div>
</div>

<div id="outline-container-pr-415" class="outline-3">
<h3 id="pr-415"><span class="section-number-3">2.2.</span> PR #415: Revise parse/build URI functions for UNC names</h3>
<div class="outline-text-3" id="text-pr-415">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-415">#415</a>
</p>

<p>
NW walks through it briefly.
</p>

<ul class="org-ul">
<li>MSM: What’s a UNC path?</li>
<li>NW: On Windows, a UCN path identifies a file on another host. See
<a href="https://en.wikipedia.org/wiki/Path_(computing)#UNC">Universal Naming Convention</a> on Wikipedia, for example.</li>
</ul>

<p>
Proposal: Accept this PR?
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>

<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">3.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
<p>
None heard.
</p>
</div>
</div>
</div>
</body>
</html>