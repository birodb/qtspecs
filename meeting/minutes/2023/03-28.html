<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 028 Minutes 2023-03-28</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 028 Minutes 2023-03-28</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/7]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[8/12]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a></li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[1/7]</code></a></li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#pr-408">2.1. PR #408: Fix issue #398 (clash with constructor functions)</a></li>
<li><a href="#pr-406">2.2. PR #406: Revise xsl:array instruction and examples</a></li>
<li><a href="#pr-404">2.3. PR #404: Rework changes from action-qt4cg-019-01 to resolve persistent conflicts.</a></li>
<li><a href="#pr-375">2.4. PR #375: Context for default parameter values</a></li>
<li><a href="#pr-396">2.5. PR #396: Deep-equal, no failure when comparing functions</a></li>
<li><a href="#pr-368">2.6. PR #368: Issue 129 - Context item generalized to context value</a></li>
</ul>
</li>
<li><a href="#adjourned">3. Adjourned</a></li>
</ul>
</div>
</div>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Minutes</h2>
<div class="outline-text-2" id="text-minutes">
<p>
Approved <a href="./04-04.html">at meeting 029</a> on 4 April 2023.
</p>
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/7]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-023-01: NW to review the stylesheets for functions across XPath and XSLT</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-025-03: MK to revise and expand technical detail in PR #375</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-026-01: MK to write a summary paper that outlines the decisions we need to make on “value sequences”</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-027-01: MK to update the text for next-match wrt type() matching</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-028-01: MK to summarize the options available wrt deep equal and errors</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[8/12]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
Regrets: EP 
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Anthony (Tony) Bufort (AB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Sasha Firsov (SF) [0:15-]</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK) [0:25-]</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> John Lumley (JL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="off"><code>[&#xa0;]</code> Ed Porter (EP)</li>
<li class="off"><code>[&#xa0;]</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="off"><code>[&#xa0;]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2023/03-28.html">the agenda</a>.
</p>

<p>
Accepted.
</p>

<ul class="org-ul">
<li>MK: Maybe put issues on the list, not just PRs.</li>
</ul>

<p>
Perhaps the composite language for path language for next week? Issue
350?
</p>

<ul class="org-ul">
<li>JL: Keep track of how many issues and PRs are open/closed.</li>
<li>DN: Maybe also mix them, so that we don’t discuss all the proposals
from the same person.</li>
</ul>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2023/03-21.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting <a href="../../agenda/2023/04-04.html">is scheduled for Tuesday, 4 April 2023</a>.
</p>

<p>
No regrets heard.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[1/7]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-023-01: NW to review the stylesheets for functions across XPath and XSLT</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-025-03: MK to revise and expand technical detail in PR #375</li>
<li class="on"><code>[X]</code> QT4CG-025-04: RD to remove the note in 15.5.15 of functions and operators.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-026-01: MK to write a summary paper that outlines the decisions we need to make on “value sequences”</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-027-01: MK to update the text for next-match wrt type() matching</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-pr-408" class="outline-3">
<h3 id="pr-408"><span class="section-number-3">2.1.</span> PR #408: Fix issue #398 (clash with constructor functions)</h3>
<div class="outline-text-3" id="text-pr-408">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-408">pull request #408</a>
</p>

<ul class="org-ul">
<li>MK: Makes explciit that you can’t have two fucntion siwht the sam ename</li>
<li>RD: Do we need to handle special handling for XSD 1.1.
<ul class="org-ul">
<li>… You could have the case where you’re declaring a name that clashes with 1.1</li>
</ul></li>
<li>MK: The XML Schema namespace is reserved anyway.</li>
<li>DN: Maybe we could have predefined namespaces where users cannot
declare their own functions.</li>
<li>MK: That would be backwards incompatible; we already allow you to
use the same namespace for types and functions.</li>
<li>DN: Maybe we could define a convention for this.</li>
<li>MK: We do have reserved namespaces; this is question of whether
users can use the same namespace for types and functions.</li>
</ul>

<p>
Some discussion of the scope of this error. This is about user defined
types and functions, not system ones.
</p>

<ul class="org-ul">
<li>CG: Will it be possible to use keyword argument syntax with type
constructor functions?
<ul class="org-ul">
<li>… Can you use the keyword argument syntax?</li>
</ul></li>
<li>MK: We already have the rule that you can’t have two functions with
the same name and arity, this proposal is just clarifying that case.</li>
</ul>

<p>
Some discussion of keyword argument syntax. The name of the argument
to constructor functions is defined to be <code>value</code>.
</p>

<ul class="org-ul">
<li>DN: What namespace are the constructor functions in?</li>
<li>MK: They’re in the namespace of the types.</li>
</ul>

<p>
Some further discussion of the practicality of reserving namespaces to
prevent users from defining types or functions.
</p>

<p>
Proposal: Accept the PR
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-406" class="outline-3">
<h3 id="pr-406"><span class="section-number-3">2.2.</span> PR #406: Revise xsl:array instruction and examples</h3>
<div class="outline-text-3" id="text-pr-406">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-406">pull request #406</a>
</p>

<ul class="org-ul">
<li>MK: The spec includes a draft for an <code>xsl:array</code> instruction in
XSLT. The complication is that with <code>xsl:array</code> you want to be able
to define any array including ones where you can have empty
sequences or other sequences, and this isn’t very compatible with
sequence constructors.</li>
</ul>

<p>
MK reviews <code>xsl:array</code>, section 22.1 of the XSLT spec.
</p>

<ul class="org-ul">
<li>MK: The <code>use</code> attribute lets you do construction and deconstruction
in a way similar to the array functions. This seems like a much more
suitable way to construct arrays in XSLT.</li>
<li>JL: In the map case, we have <code>xsl:map-entry</code>, why doesn’t
<code>xsl:array-entry</code> work?</li>
<li>MK: You could do that, but you’d lose the ability to build arrays
using any kind of values. This makes the construction conventions a
matter of code style rather than baking them into the language.</li>
<li>RD: Would it make sense to introduce parity on both sides? Have
<code>xsl:array-entry</code> for arrays and a <code>use</code> attribute on maps?</li>
<li>MK: The most common use case by far is that the array consists of a
sequence of single items.</li>
</ul>

<p>
Some discussion of how the behavior of the construct shouldn’t depend
on its content because you might want to, for example, refactor the
content into an <code>xsl:apply-templates</code>.
</p>

<ul class="org-ul">
<li>RD: With <code>array:members</code>, you get a sequence of singleton maps.</li>
</ul>

<p>
Further discussion of how <code>xsl:array-member</code> wouldn’t actually
encapsulate the result because you can’t distinguish them by type.
</p>

<ul class="org-ul">
<li>DN: Let’s say I want to use <code>xsl:array</code>, is there anything I can do
that I can’t do in pure XPath?</li>
<li>MK: In the use cases I’ve done, I’ve found it very awkward to mix
the XPath approach with apply templates.</li>
<li>DN: It would be valuable to post that use case. Couldn’t we do this
by making a map with sequential integer keys and then have a cast
instruction of some sort?</li>
<li>MK: Well, you don’t want to have to allocate the numbers by hand.
Consider the first example, you wouldn’t want to allocate numbers
for each string. Consider the second example, it answers both of
these questions.</li>
<li>JK: On the bandwagon about parity with <code>xsl:map</code> and
<code>xsl:map-entry</code>. Can you apply-templates with an array instruction
to populate it with members in other templates?</li>
<li>MK: It’s supposed to make that possible; those were the use cases I
had in mind.</li>
</ul>

<p>
Proposal: Accept the PR
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-404" class="outline-3">
<h3 id="pr-404"><span class="section-number-3">2.3.</span> PR #404: Rework changes from action-qt4cg-019-01 to resolve persistent conflicts.</h3>
<div class="outline-text-3" id="text-pr-404">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-404">pull request #404</a>
</p>

<ul class="org-ul">
<li>MK: This entirely editorial. It fixes a trivial error in
<code>fn:tokenize</code> and updates the change history.</li>
</ul>

<p>
Proposal: Accept the PR
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-375" class="outline-3">
<h3 id="pr-375"><span class="section-number-3">2.4.</span> PR #375: Context for default parameter values</h3>
<div class="outline-text-3" id="text-pr-375">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-375">pull request #375</a>
</p>

<ul class="org-ul">
<li>MK: I have an open action; we can’t progress this right now.</li>
</ul>
</div>
</div>

<div id="outline-container-pr-396" class="outline-3">
<h3 id="pr-396"><span class="section-number-3">2.5.</span> PR #396: Deep-equal, no failure when comparing functions</h3>
<div class="outline-text-3" id="text-pr-396">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-396">pull request #396</a>
</p>

<p>
Mike describes his attempt to address no failure use cases for deep-equal.
</p>

<ul class="org-ul">
<li>MK: If you have two function items that aren’t arrays or maps, then
you use the existing rules for determinism. This relies on prose
already in the 3.1 spec.
<ul class="org-ul">
<li>… One of the preconditions is that the processor is able to
determine that they’re the same and that’s implementation defined.</li>
<li>… You can always return false, but the note outlines some of the
cases where it might make sense to return true.</li>
</ul></li>
<li>RD: If I understand correctly, if you have the example that the
processor knows that you’re referring to the arity 1 version of
<code>fn:name</code> in both cases, then it must or might return true?</li>
<li>MK: It’s not required. It’s quite difficult to codify. Partial
function application and context come into play.</li>
<li>RD: I’m not suggesting this for the case of partial function
application. That’s a special intermediate function. I mean in the
case where you know you have the arity 1 <code>fn:name</code> in both cases.</li>
<li>MK: Even if it’s the identical expression, you have to make sure
that the context is the same. You might have the same variable
reference but the static context is different in one case.</li>
<li>DN: I really respect the effort here, but all these debates can be
avoided and they show that trying to define these things is hard.
This could be much easier; just assert that all functions (except
maps and arrays) are the same or different (as we did for NaN or
INF). I don’t care, I don’t think these use cases occur in practice
often enough to worry about.</li>
<li>MK: Part of the problem is that we use <code>fn:deep-equal</code> in other
contexts. For example, suppose that you use it for sorting or
grouping. Then if it doesn’t have clean semantics, for example if
every item is equal to itself, then it isn’t appropriate for some of
those cases.</li>
<li>DN: Then we need a new function <code>fn:error-free-comparitor</code> that has
the semantics we need.</li>
<li>MK: That’s what this is trying to do.</li>
<li>DN: I would be happier with just a new function.</li>
<li>MK: Wouldn’t that just move the problem to that new function?</li>
</ul>

<p>
Some continued discussion of how this could work.
</p>

<ul class="org-ul">
<li>SF: When we’re talking about function comparison, what is different
in the different use cases? One comaprison of functions is about
casting values. Another case might be trying to decide which
function to call. So those are different use cases. In JS there’s an
analogy between “==” and “===”.</li>
<li>MK: We’re not using doing this because there’s a use case for
comparing functions, but there’s a use ase for having a function
that compares anything without failing and has nice properties like
reflexivity and transitivity.</li>
<li>SF: That’s just going to raise the issue later with caching, etc.</li>
<li>JL: I like this; it’s going to be to some extent implementation
dependent. The early things are easy to compare, but later on it
gets harder and you can just return false.</li>
<li>DN: I think JL and I are in complete agreement.</li>
<li>JL: I’m not actually sure I am agreeing; this looks pretty good, we
don’t need to go any deeper than the first few items on the list.
This doesn’t raise errors and it’s pretty easy to implement. You can
stop whenever it gets too deep.</li>
<li>DN: That’s what we agree on, we shouldn’t go deeper. I think we
don’t need to go deeper at all. We need a use case where precise
comparisons really matter. I’m not convinced there are any.</li>
<li>JL: I thought that NaN was the one thing that isn’t equal to itself.</li>
<li>MK: In deep equal it is.</li>
<li>DN: Exactly. Everyone knows that NaN != NaN, but we decided that it
would be equal in deep equal. So we can make the same arbitrary
decision about functions.</li>
</ul>

<p>
Some discussion of what does or doesn’t constitute the property of NaN
vs the property of functions.
</p>

<p>
Some discussion of how we can minimize surprise to users. Not all
languages follow IEEE specifications for comparing things like NaNs
and infinities.
</p>

<ul class="org-ul">
<li>RD: On the one hand it is arbitrary, but on the other we aren’t just
making things up. Saying that two function references that you know
are different are in fact equal goes against a users expectation.</li>
<li>DN: But the same is true of NaN!</li>
</ul>
</div>
</div>

<div id="outline-container-pr-368" class="outline-3">
<h3 id="pr-368"><span class="section-number-3">2.6.</span> PR #368: Issue 129 - Context item generalized to context value</h3>
<div class="outline-text-3" id="text-pr-368">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-368">pull request #368</a>
</p>

<ul class="org-ul">
<li>MK: I have an open action; we can’t progress this right now.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">3.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
<p>
None heard.
</p>
</div>
</div>
</div>
</body>
</html>