<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 024 Minutes 2023-02-28</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 024 Minutes 2023-02-28</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/10]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[10/12]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a></li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[6/10]</code></a></li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#closure">2.1. Issues recommended for closure</a></li>
<li><a href="#pr320">2.2. PR #320: Issue 98 - add options parameter to fn:deep-equal</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
</ul>
</div>
</div>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/10]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-023-01: NW to review the stylesheets for functions across XPath and XSLT</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-023-05: NW to put record types on an agenda.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-024-01: MK to add namespace-uri-for-prefix argument changes to the compatibility appendix</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-024-02: DN to develop an alternative proposal for deep-action.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-024-03: NW to create issues for improving fn:deep-equal</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[10/12]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
Regrets: BTW
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Anthony (Tony) Bufort (AB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Sasha Firsov (SF)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK) [:10-]</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> John Lumley (JL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="on"><code>[X]</code> C. M. Sperberg-McQueen (MSM) [:06-]</li>
<li class="off"><code>[&#xa0;]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2023/02-28.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2023/02-21.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting <a href="../../agenda/2023/03-07.html">is scheduled for Tuesday, 7 March 2023</a>.
</p>

<p>
No regrets heard.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[6/10]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="on"><code>[X]</code> QT4CG-021-03: RD to change <code>must</code> to <code>will</code> in DOM notes about lowercase</li>
<li class="on"><code>[X]</code> QT4CG-021-04: RD to revise and move the note about unrecognized entities</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-023-01: NW to review the stylesheets for functions across XPath and XSLT</li>
<li class="on"><code>[X]</code> QT4CG-023-02: MK to write a PR to drop <code>xsl:function-library</code> from the spec.</li>
<li class="on"><code>[X]</code> QT4CG-023-03: MK to start a new thread for discussion function namespace flexibility</li>
<li class="on"><code>[X]</code> QT4CG-023-04: MK to review and develop a proposal for separating element and type default namespaces</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-023-05: NW to put record types on an agenda.</li>
<li class="on"><code>[X]</code> QT4CG-023-06: MK to revisit and make a PR for an <code>as</code> attribute on <code>xsl:mode</code></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-closure" class="outline-3">
<h3 id="closure"><span class="section-number-3">2.1.</span> Issues recommended for closure</h3>
<div class="outline-text-3" id="text-closure">
<p>
An <a href="https://lists.w3.org/Archives/Public/public-xslt-40/2023Feb/0020.html">email proposal</a> from MK. 
</p>

<p>
Mike walks us through the email.
</p>

<ul class="org-ul">
<li>MK: Are any of these non-contentious?
<ul class="org-ul">
<li><a href="https://github.com/qt4cg/qtspecs/issues/45">#45</a>, you can always write your own vendor-defined version</li>
<li><a href="https://github.com/qt4cg/qtspecs/issues/60">#60</a>, the function assumes you can downcase strings, so there’s no
issue except perhaps the previous error code</li>
<li><a href="https://github.com/qt4cg/qtspecs/issues/112">#112</a>, leave open for now</li>
<li><a href="https://github.com/qt4cg/qtspecs/issues/147">#147</a>, no concrete proposal, close</li>
<li><a href="https://github.com/qt4cg/qtspecs/issues/260">#260</a>, essentially indistinguishable from array:index-where
<ul class="org-ul">
<li>DN: I think it’s confusing to have functions with different names in this area.
<ul class="org-ul">
<li>… I think we should also have array:deep-index-of, I will propose that</li>
<li>… Please keep this one open.</li>
</ul></li>
</ul></li>
</ul></li>
</ul>

<p>
ACTION QT4CG-024-01: MK to add namespace-uri-for-prefix argument changes to the compatibility appendix
</p>
</div>
</div>

<div id="outline-container-pr320" class="outline-3">
<h3 id="pr320"><span class="section-number-3">2.2.</span> PR #320: Issue 98 - add options parameter to fn:deep-equal</h3>
<div class="outline-text-3" id="text-pr320">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-320">pull request #320</a>. We ran out of time while <a href="https://qt4cg.org/meeting/minutes/2023/02-14.html#h-8455483D-D0AF-499A-A74A-552B33A9F395">discussing this in meeting 22</a>.
</p>

<ul class="org-ul">
<li>CG: Let’s look at the comments in the PR</li>
<li>NW: Good idea.</li>
</ul>

<p>
We turn our attention to <a href="https://github.com/qt4cg/qtspecs/pull/320">PR #320 comments</a>.
</p>

<ul class="org-ul">
<li>CG: I think we should consider <code>unordered-children</code> as a better name.</li>
<li>MK: The property is a set of element names that has the semantics
that there is no ordering among any of the children of those elements.</li>
<li>CG: My idea was we could ignore the order of nodes generally and not
consider comments or elements; I think we could avoid looking at element names.</li>
<li>MK: All children of all elements? That seems unlikely to me</li>
<li>RD: I think one case where the generalization could be useful is in
unordered content of key values. Possibly. But I don’t see any other
cases where that would apply.</li>
<li>MSM: In general, I’m a fan of anything that’s a generalization, but
I don’t understand. Does anything have children other than an element?</li>
<li>CG: A comment could occur before or after an element.</li>
<li>RD: Deep equal also applies to sequences of items.</li>
<li>MSM: But do any of the items have anything that our specs call “children”</li>
<li>MK: Should we look at what the proposed spec actually says?</li>
<li>MSM: Yes, but calling it <code>unordered-elements</code> does make me wonder if
users might think they should name the elements whose order doesn’t matter!</li>
<li>RD: Should we have separate issues for generlizing this?</li>
<li>CG: It might make sense to have a use case that clarifies the
usefulness of unordered comparisons.</li>
</ul>

<p>
MK brings up the specification prose.
</p>

<ul class="org-ul">
<li>MK reads clause J.IV.
<ul class="org-ul">
<li>… It is about the order of all of the children of <b>selected</b> elements.</li>
</ul></li>
<li>MSM: Can I specify ‘*’ as an option?</li>
<li>MK: Not at the moment, but we could add that.</li>
<li>JL: Is there a case for this to allowed to be wildcarded in the
namespace or the local name?</li>
<li>MK: It just makes the API more complex.</li>
</ul>

<p>
General agreement that there might be use-cases for both of those
</p>

<ul class="org-ul">
<li>CG: Would it be possible to write the test for permutations in XQuery?</li>
<li>MK: Yes, perhaps, but it’s not easy.</li>
</ul>

<p>
MK describes the implementation he’s got which uses a hashcode for
each child and then compares the hashcode in an N^2 comparison.
</p>

<ul class="org-ul">
<li>RD: You could do something similar in XQuery if you had a version of
deep-equals that returned the hash</li>
<li>MK: I’d like to say we’re not completely happy with
<code>unordered-elements</code>, so take it out and reopen it as a new issue.</li>
<li>MSM: I’d be happy to accept the proposal with the current treatment
for unordered elements and consider adding wildcards as a new issue.</li>
<li>JL: I’d agree with that.</li>
<li>DN: It seems to me that this function is extremely complicated. I
think we should break this into simpler problems. We could have a
function deep-equal and then have different functions for each case:
documents-equal, elements-equal, atomic-values-equal, etc.</li>
<li>RD: In terms of this function, the complexity in the implementation
already exists. Effetively all this proposal is doing is allowing
certain of the deep-equal features to be optional. Well, mostly. A
lot of the complexity is already there. If you have a complicated
structure where you have a map of elements or a map of arrays of
elements, you’ll have to pass through the options. I don’t think you
can separate out the different behaviors that this function is
doing.</li>
<li>MK: DN has come up with an interesting alternative idea, can we ask
him to expand on that so we can compare them.</li>
<li>DN: What is the task?</li>
<li>MK: Rather than these boolean options, propose an alternative design.</li>
</ul>

<p>
ACTION QT4CG-024-02: DN to develop an alternative proposal for deep-action.
</p>

<ul class="org-ul">
<li>DN: I have very strong objection to not making treat-errors-as-false
the default.</li>
<li>MK: I’m very reluctant to have a situation where something is not
equal to itself by default.</li>
</ul>

<p>
Some discussion of the NaN problem; the assertion is that these are
exceptional cases.
</p>

<ul class="org-ul">
<li>RD: Different languages can specify different comparison behaviors.
JavaScript and Java specify different behavior on things like NaN. I
think one of the difficulties with trying to fit rigerous
mathematical descriptions of numeric types is that you run into
issues like the numbers are fixed, limited value. While 300 is a
valid integer, it’s not in the set of unsigned bytes. If you add two
unsigned bytes you can…</li>
<li>MK: I’d like to observer that this is a change to how deep-equal
handles node trees, not numbers. Can we do that separately?</li>
<li>DN: We need a comparison function in lots of places and it should
always return a value. The only thing we don’t agree on is what to
do when there are two function items. We can just consider them
unequal unless there’s some way to show that they’re equal. I don’t
like that a set of one function item would not be equal to itself.
But that’s just a special case.</li>
<li>NW: This is just about the default? (Yes.)</li>
<li>CG: I think those (NaN, INF, etc.) are separate issues like MK and
RD said.</li>
<li>JK: I support the proposal; but we only got half way down through
the issues…</li>
<li>JK: The two-whitespace options appear to have overlapping domains.</li>
<li>MK: Yes, I wish there was a better way.</li>
<li>JK: I think you need to specify what happens in the overlapping
cases, and to make the defaults such that there isn’t any overlap.
I vote for normalizing true and stripping false.</li>
<li>MK: I think the rules are all there; I think I tried to clarify the
description on the basis of these comments.</li>
<li>RD: In XQuery there’s a boundary-space property…</li>
<li>MK: The first thing to do is factor out what the options are.
Normalizing whitespace where there’s a mixture of text nodes on the
one hand, stripping indentation on another.</li>
<li>JK: I think there are probably three levels of stripping.</li>
<li>MK: Yes, probably.</li>
<li>MSM: Can someone describe the three options?</li>
<li>MK: The “ruthless” option is that you remove all text nodes that are
whitespace only and you also normalize space in text nodes that
contain a mixture of whitespace and non-whitespace characters.
<ul class="org-ul">
<li>… The next option is that you ignore “layout whitespace”, but you
treat whitespace in other nodes as significant.</li>
</ul></li>
<li>MSM: Every memory I have of phrases like “layout whitespace” is painful.
<ul class="org-ul">
<li>… I think there are three levels in XSD but I don’t think they
have the same kind of “black pit” quality.</li>
<li>… The middle ground is that adjacent whitespace characters are
replaced with a single blank.</li>
</ul></li>
<li>RD: We’ve got “not preserved” and “not normalized” and “not
preserved” and “normalized” which are the same thing. 
… RD describes the other options in the state table…
<ul class="org-ul">
<li>… So I think all the options make some kind of sense.</li>
</ul></li>
<li>MK: The note in the spec now attempts to present the synthesis of
the options.</li>
</ul>

<p>
Proposal: accept this PR, with three new issues:
</p>
<ol class="org-ol">
<li>What should the default be for the issue of errors</li>
<li>Can whitespace handling be improved?</li>
<li>Can the specification of unordered be improved?</li>
</ol>

<p>
ACTION QT4CG-024-03: NW to create issues for improving fn:deep-equal
</p>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<ul class="org-ul">
<li>MK: There are a lot of open PRs.</li>
<li>NW: I’m happy to put small things at the top next week</li>
<li>RD: Can we also go through the features added prior to the formation
of the WG? Can we get to the point where all of those are agreed.</li>
</ul>

<p>
NW observes that if there aren’t bugs for some of those, then the
easiest way forward is to create bugs. That helps organize the agendas.
</p>

<ul class="org-ul">
<li>CG: Spend one minute to look at the existing PRs?</li>
</ul>

<p>
MK walks through them: 375 is a bug so that should have high priority,
368 is large, 364 is small, 363 is small, 355 is almost editorial.
</p>

<p>
NW to try to put some low hanging fruit on the agenda for next week.
</p>

<p>
NW: Suggestions for low hanging fruit and proposals to resolve issues
in email most eagerly accepted!
</p>
</div>
</div>
</div>
</body>
</html>
