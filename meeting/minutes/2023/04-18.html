<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 031 Minutes 2023-04-18</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 031 Minutes 2023-04-18</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/14]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[10/13]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a>
<ul>
<li><a href="#h-C1590AE6-AA6D-49E9-A040-5006E92C0784">1.2.1. Status so far…</a></li>
</ul>
</li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[5/10]</code></a></li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#h-F52E9A89-F26C-41A9-A287-E7EED5D8FD35">2.1. Issue #53: Allow function keyword inline functions without parameters</a></li>
<li><a href="#pr-420">2.2. PR #420: Issue 357 Map composition and decomposition</a></li>
<li><a href="#iss-410">2.3. Issue #410: Converting doubles to decimals, fractional digits</a></li>
</ul>
</li>
<li><a href="#adjourned">3. Adjourned</a></li>
</ul>
</div>
</div>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Minutes</h2>
<div class="outline-text-2" id="text-minutes">
<p>
Approved <a href="./04-25.html">at meeting 032</a> on 18 April 2023.
</p>
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/14]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-026-01: MK to write a summary paper that outlines the decisions we need to make on “value sequences”
<ul class="org-ul">
<li>This is related to PR #368: Issue 129 - Context item generalized to context value and
subsequent discussion.</li>
</ul></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-01: RD+DN to draft spec prose for the “divide and conquer” approach outlined in issue #399</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-07: NW to open the next discussion of #397 with a demo from DN</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-031-01: MK to update <code>map:of</code> to have more complete examples</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-031-02: MK to make the map options into definitions.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-031-03: CG to draft a PR to address issue #410</li>
</ul>
</div>
</div>


<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[10/13]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Anthony (Tony) Bufort (AB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Sasha Firsov (SF)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK) [0:6-]</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> John Lumley (JL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="on"><code>[X]</code> C. M. Sperberg-McQueen (MSM)</li>
<li class="off"><code>[&#xa0;]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
<li class="off"><code>[&#xa0;]</code> Mohamed Zergaoui</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2023/04-18.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>

<div id="outline-container-h-C1590AE6-AA6D-49E9-A040-5006E92C0784" class="outline-4">
<h4 id="h-C1590AE6-AA6D-49E9-A040-5006E92C0784"><span class="section-number-4">1.2.1.</span> Status so far…</h4>
<div class="outline-text-4" id="text-h-C1590AE6-AA6D-49E9-A040-5006E92C0784">

<div id="org1341557" class="figure">
<p><img src="./issues-open-2023-04-18.png" alt="issues-open-2023-04-18.png" />
</p>
<p><span class="figure-number">Figure 1: </span>“Burn down” chart on open issues</p>
</div>


<div id="orgf2959ec" class="figure">
<p><img src="./issues-by-spec-2023-04-18.png" alt="issues-by-spec-2023-04-18.png" />
</p>
<p><span class="figure-number">Figure 2: </span>Open issues by specification</p>
</div>


<div id="org6c3f692" class="figure">
<p><img src="./issues-by-type-2023-04-18.png" alt="issues-by-type-2023-04-18.png" />
</p>
<p><span class="figure-number">Figure 3: </span>“Burn down” chart on open issues</p>
</div>
</div>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2023/04-11.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting <a href="../../agenda/2023/04-25.html">is scheduled for Tuesday, 25 April 2023</a>.
</p>

<p>
No regrets heard.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[5/10]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="on"><code>[X]</code> QT4CG-023-01: NW to review the stylesheets for functions across XPath and XSLT
<ul class="org-ul">
<li>Stylesheets for formatting functions in F&amp;O and XSLT are out-of-sync</li>
<li>We’re not handling default values for parameters on the XSLT side</li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-025-03: MK to revise and expand technical detail in PR #375
<ul class="org-ul">
<li>See commit <a href="https://github.com/qt4cg/qtspecs/pull/375/commits/d8d0a77f3f6e43baf145ed7f96a2a61f362673df">d8d0a77f</a></li>
</ul></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-026-01: MK to write a summary paper that outlines the decisions we need to make on “value sequences”
<ul class="org-ul">
<li>This is related to PR #368: Issue 129 - Context item generalized to context value and
subsequent discussion.</li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-027-01: MK to update the text for next-match wrt type() matching
<ul class="org-ul">
<li>See PR <a href="https://qt4cg.org/dashboard/#pr-412">#412</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-028-01: MK to summarize the options available wrt deep equal and errors
<ul class="org-ul">
<li>See six options proposed in <a href="https://github.com/qt4cg/qtspecs/pull/396">https://github.com/qt4cg/qtspecs/pull/396</a></li>
</ul></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-01: RD+DN to draft spec prose for the “divide and conquer” approach outlined in issue #399</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-029-07: NW to open the next discussion of #397 with a demo from DN</li>
<li class="on"><code>[X]</code> QT4CG-030-01: RD to create issues that identify more clearly the various aspects of <code>!</code>, <code>=&gt;</code>, <code>-&gt;</code>, and inline function definitions.
<ul class="org-ul">
<li>See <a href="https://github.com/qt4cg/qtspecs/issues/435">#435</a> and <a href="https://github.com/qt4cg/qtspecs/issues/436">#436</a></li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
<p>
This week’s agenda mostly continues where we left off last week.
</p>
</div>

<div id="outline-container-h-F52E9A89-F26C-41A9-A287-E7EED5D8FD35" class="outline-3">
<h3 id="h-F52E9A89-F26C-41A9-A287-E7EED5D8FD35"><span class="section-number-3">2.1.</span> Issue #53: Allow function keyword inline functions without parameters</h3>
<div class="outline-text-3" id="text-h-F52E9A89-F26C-41A9-A287-E7EED5D8FD35">
<p>
See Issue <a href="https://github.com/qt4cg/qtspecs/issues/53">#53</a>
</p>

<ul class="org-ul">
<li>NW <a href="https://github.com/qt4cg/qtspecs/issues/53#issuecomment-1513183377">summarizes</a>.</li>
</ul>

<p>
Some discussion of the flavors of lambda expressions in Java and C#
with respect to expressions and statements.
</p>

<ul class="org-ul">
<li>SF: My objection is that XPath is a niche language and it should
support the primary features of this niche. Having things inline is
part of XSLT expectations.</li>
<li>MK: In the earlier versions of the language, we used custom syntax
for higher order constructs: axis steps, the bang operator, etc.
We’ve been moving towards using higher order functions and lambda
expressions are the right way forward, and we have to make them as
usable as possible.</li>
<li>SF: But should it treat XSLT as the language for inline use?</li>
<li>MK: I’m not sure what you mean by inline use.</li>
<li>SF: For XSLT, conditions and selectors are inline.</li>
<li>MK: It’s an embedded language. Yes, I think that’s the typical
scenario for XPath: within a host language such as XSLT, XSD, or…
XPath expressions are often short, but users can pack more into them.
<ul class="org-ul">
<li>… The same applies to XQuery of course.</li>
</ul></li>
<li>Some discussion of whether or not the curly braces are dependent on
the host language.</li>
<li>RD: From a syntax point of view, we should be able to support both.
Either an <code>Expr</code> or an <code>EnclosedExpr</code> on the right hand side.</li>
<li>CG: My personal impression is that it was a mistake not to enforce
curly braces for more constructors. This came up in XQUery Update
and in the if/then/else case. It may be harder in the future to add
things to the language if we allow them to be omitted.</li>
<li>MK: Yes, a little bit of redundancy can help.</li>
<li>JL: I’m still slightly worried about the overloading of the <code>-&gt;</code>
operator. If we’re trying to get the chaining operations, you could
end up with multiple <code>-&gt;</code> operators in the same chain and it could have
completely different meanings at different points in the chain.</li>
<li>MK: Yes, I think if we use <code>-&gt;</code> for lambda expressions, we need
something else for chaining.</li>
<li>DN: I didn’t see the last few messages on the comment thread. If
we’re going to make a decision, we need to have all the information
at hand. I would like to summarize. Everything starts with mixing
too many things together, they’re good on their own, but mixed
together they make a different picture. First there’s the <code>-&gt;</code> that
almost duplicates <code>!</code> and why is this necessary. Then there’s
function chaining. And then there’s the context value. And finally
introducing lambda expressions. I want to express the opinion that
this is analogous to high speed driving: it’s dangerous. There was
evidence from experts on Python and C++ against the misuse of lambda
expressions. The obvious problem of lambda expressions is that they
interfere with readability, understandability, and maintainability.
We’re spending a lot of time to support a certain writing style and
not other features. Both Liam and I have written training courses
and we don’t think these are easy to explain. I don’t think this is
the best use of our resources in this group. We need to decide for
ourselves and we should move on to more useful work.</li>
<li>RD: We’ve already got inline function expressions, so using higher
order functions already provides lambda expressions. We’re just
talking about making those things more concise and easy to use. We
could also describe records and other features and packages and
streaming are all things that you might describe as too confusing.</li>
<li>DN: Do you think lambda expressions are already in the language in
XPath 3.0?</li>
<li>RD: Yes, the inline function expression. What we’re discussing in
that thread is a more concise expression.</li>
<li>DN: We don’t need this in the language, so we don’t have to do it.</li>
</ul>

<p>
Chair calls time on this conversation. Please move it back to the
comment thread and email. I’ll put it back on the agenda when it seems
like we might be closer to a resolution.
</p>
</div>
</div>


<div id="outline-container-pr-420" class="outline-3">
<h3 id="pr-420"><span class="section-number-3">2.2.</span> PR #420: Issue 357 Map composition and decomposition</h3>
<div class="outline-text-3" id="text-pr-420">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-420">#420</a>
</p>

<p>
MK walks us through the PR.
</p>

<ul class="org-ul">
<li>MK: If we look at the map functions, section 18…
<ul class="org-ul">
<li>… We start with some discussion of how maps can be decomposed and
the fact that we have two different dcompositions.</li>
<li>… Singleton maps are what you want for map merge and the other is
key-value records.</li>
</ul></li>
<li>RD: Do we want to include an example?</li>
<li>MK: Yes, that’s in the following table.
<ul class="org-ul">
<li>… The new functions are <code>map:of</code> a set of key-value pairs and
<code>map:key-value-pairs</code> to do the decomposition.</li>
<li>… Could that function name be simplified to <code>map:key-pairs</code>? Yes, probably.</li>
</ul></li>
<li>MK describes <code>map:of</code>
<ul class="org-ul">
<li>… There should be more examples of the various options.</li>
</ul></li>
</ul>

<p>
ACTION: QT4CG-031-01: MK to update <code>map:of</code> to have more complete examples
</p>

<ul class="org-ul">
<li>DN: I don’t think there’s a formal definition of key-value pairs.
And it isn’t clear what’s different between key-value pairs and
map:entry.</li>
<li>MK: No, there is a difference. You might sometimes prefer one over the other.</li>
<li>DN: What is the difference?</li>
<li>MK: There are two ways of decomposing a map: into a sequence of maps
each of which contains one pair, or you can decompose it into a set of maps where
the map always contains <code>key</code> and <code>value</code> entries.
<ul class="org-ul">
<li>… There’s nothing new here in terms of primitives.</li>
</ul></li>
<li>DN: This is confusing and the difference is so minor I can’t see it.</li>
<li>MK: I’m just explaining that there are two different ways of doing
things and they’re already supported by some functions.</li>
<li>DN: Maybe it deserves a section explaining the difference.</li>
</ul>

<p>
Some discussion of how this could be more clearly explained. DN
suggests that the section should precede the functions that use them.
</p>

<ul class="org-ul">
<li>CG: I like the description and the table. And I think <code>map:pairs</code> would be enough.
<ul class="org-ul">
<li>… I added a table in a comment on the issue and I added functions
in issue #29. I could make a PR for that.</li>
</ul></li>
<li>MK: I can revise the proposal to add those.</li>
<li>RD: Does it make sense where you’re describing what the different
forms are if you make that a proper definition with the square
bracket markup that is then a linkable reference.</li>
</ul>

<p>
ACTION: QT4CG-031-02: MK to make the map options into definitions.
</p>

<ul class="org-ul">
<li>JK: I agree with DN that some definitions are needed. They’re
already in some of the function descriptions, they should be pulled
out. The use of <code>record</code> suggests it’s something completely
different, so maybe a different name that includes the word map
would be better.</li>
<li>MK: I chose the term partly to match up with what we say about
arrays, you get “value records” when decomposing an array.</li>
<li>RD: Would it make sense to say something like the key-value pair map
is a record test…and a record test links to a record test definition?</li>
<li>DN: No, this is once again mixing too many things.</li>
</ul>

<p>
Some additional discussion of whether <code>record</code> was easier to
understand in previous conversations.
</p>

<ul class="org-ul">
<li>MK: I’d like to look at the XSLT side as well.
<ul class="org-ul">
<li>… The only impact is on examples and notes.</li>
</ul></li>
</ul>

<p>
Proposal: accept the PR with action on MK to improve some things
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-iss-410" class="outline-3">
<h3 id="iss-410"><span class="section-number-3">2.3.</span> Issue #410: Converting doubles to decimals, fractional digits</h3>
<div class="outline-text-3" id="text-iss-410">
<p>
See Issue <a href="https://github.com/qt4cg/qtspecs/issues/410">#410</a>
</p>

<ul class="org-ul">
<li>CG: The semantics of conversion have been changed and I think this
revision has caused some new issues. Now if you convert decimals,
you get a representation that differs from the string.
<ul class="org-ul">
<li>… See <a href="https://github.com/qt4cg/qtspecs/issues/410#issuecomment-1497447112">examples</a>.</li>
<li>… I think the current revision makes it even more complicated.</li>
</ul></li>
<li>MK: What’s the difference between result 1 and result 2 in the table?</li>
<li>CG: There are three results…there’s a scroll bar
<ul class="org-ul">
<li>… See also <a href="https://github.com/qt4cg/qtspecs/issues/410#issuecomment-1485004218">this example</a>.</li>
</ul></li>
<li>MK: I think there are two things here. One is a problem that exists
in XPath 3.1 in that the rules for double to string and double to
decimal are inconsistent. The second point is that the change we
made to equality matching will have adverse consequences for some
queries and stylesheets.
<ul class="org-ul">
<li>… They’re related because I think the second shows that any change
in this area is likely to have unexpected side effects.</li>
<li>… I’m inclined to leave the double to string and double to decimal
conversion alone: it’s just too hairy.</li>
<li>… Maybe we can use a different equality operator here.</li>
</ul></li>
<li>CG: That sounds good to me.</li>
<li>NW: I agree that we shouldn’t touch the conversions. I’m not sure about the operator.</li>
<li>CG: It would be a minor change in distinct values.</li>
<li>MK: How does the semantics of XQuery grouping work? Is that the same
operator as distinct values?</li>
<li>DN: It seems to me that this is the inevitable reality of floating
point calculations. If we want such values to be equal, maybe we
could introduce a new option to the comparison, perhaps ε. Or it
could maybe be in the static context.</li>
<li>RD: So are we talking about going back to the 3.1 spec and then fixing distinct values?</li>
<li>MK: For distinct values and other places.</li>
</ul>

<p>
Revert to the 3.1 semantics and address comparison for distinct vlaues anod toer thing in a new way.
</p>

<p>
ACTION: QT4CG-031-03: CG to draft a PR to address issue #410
</p>
</div>
</div>
</div>

<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">3.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
<p>
None heard.
</p>
</div>
</div>
</div>
</body>
</html>