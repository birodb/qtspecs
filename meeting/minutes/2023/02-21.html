<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 023 Minutes 2023-02-21</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 023 Minutes 2023-02-21</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/10]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[7/14]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a></li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[2/6]</code></a></li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical Agenda</a>
<ul>
<li><a href="#h-CDF49238-C878-4CCF-9564-28BBF18FC841">2.1. Open PRs related to XSLT</a>
<ul>
<li><a href="#h-9FF1A5C4-828E-4F85-A640-BFB1D40FA70C">2.1.1. PR #362, Drop obsolete note in XSLT regarding for-each-group/@array</a></li>
<li><a href="#h-B43832BD-DBDE-4459-B5C6-EE9BE57906A2">2.1.2. PR #354, Combine multiple signatures of XSLT functions to use defaults</a></li>
<li><a href="#h-3C80588B-6B82-4EC0-95FE-7756A2EC5DCB">2.1.3. PR #353, issue #109 xsl note</a></li>
</ul>
</li>
<li><a href="#h-5ACE0622-A613-4026-9074-C7492E84CC15">2.2. Review of appendixes J.1.1 and J.1.2.</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
</ul>
</div>
</div>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/10]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-021-03: RD to change <code>must</code> to <code>will</code> in DOM notes about lowercase</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-021-04: RD to revise and move the note about unrecognized entities</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-023-01: NW to review the stylesheets for functions across XPath and XSLT</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-023-02: MK to write a PR to drop <code>xsl:function-library</code> from the spec.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-023-03: MK to start a new thread for discussion function namespace flexibility</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-023-04: MK to review and develop a proposal for separating element and type default namespaces</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-023-05: NW to put record types on an agenda.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-023-06: MK to revisit and make a PR for a <code>sequence-type</code> attribute on <code>xsl:mode</code></li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[7/14]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
Regrets: BTW, CG, EP
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Anthony (Tony) Bufort (AB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Sasha Firsov (SF)</li>
<li class="off"><code>[&#xa0;]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK) [:13-]</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> John Lumley (JL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="off"><code>[&#xa0;]</code> Ed Porter (EP)</li>
<li class="off"><code>[&#xa0;]</code> Liam Quin (LQ)</li>
<li class="off"><code>[&#xa0;]</code> Adam Retter</li>
<li class="off"><code>[&#xa0;]</code> C. M. Sperberg-McQueen (MSM) [:06-]</li>
<li class="off"><code>[&#xa0;]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW). <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
MK proposes specifically to review PRs 362, 353, and 354.
</p>

<p>
Proposal: Accept <a href="../../agenda/2023/02-21.html">the agenda</a> as amended.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2023/02-14.html">the minutes of the previous meeting</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting <a href="../../agenda/2023/02-28.html">is scheduled for Tuesday, 28 February 2023</a>.
</p>

<p>
No regrets heard.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[2/6]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-002-10: BTW to coordinate some ideas about improving diversity in the group</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-016-08: RD to clarify how namespace comparisons are performed.</li>
<li class="on"><code>[X]</code> QT4CG-021-01: NW to raise a PR addressing the points in issue #307
<ul class="org-ul">
<li><a href="https://qt4cg.org/dashboard/#pr-347">https://qt4cg.org/dashboard/#pr-347</a></li>
</ul></li>
<li class="on"><code>[X]</code> QT4CG-021-02: NW to check for deprecated URI features and add options for them in <code>fn:build-uri</code> and <code>fn:parse-uri</code>
<ul class="org-ul">
<li><a href="https://qt4cg.org/dashboard/#pr-347">https://qt4cg.org/dashboard/#pr-347</a></li>
</ul></li>
<li class="off"><code>[&#xa0;]</code> QT4CG-021-03: RD to change <code>must</code> to <code>will</code> in DOM notes about lowercase</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-021-04: RD to revise and move the note about unrecognized entities</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical Agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-h-CDF49238-C878-4CCF-9564-28BBF18FC841" class="outline-3">
<h3 id="h-CDF49238-C878-4CCF-9564-28BBF18FC841"><span class="section-number-3">2.1.</span> Open PRs related to XSLT</h3>
<div class="outline-text-3" id="text-h-CDF49238-C878-4CCF-9564-28BBF18FC841">
</div>

<div id="outline-container-h-9FF1A5C4-828E-4F85-A640-BFB1D40FA70C" class="outline-4">
<h4 id="h-9FF1A5C4-828E-4F85-A640-BFB1D40FA70C"><span class="section-number-4">2.1.1.</span> PR #362, Drop obsolete note in XSLT regarding for-each-group/@array</h4>
<div class="outline-text-4" id="text-h-9FF1A5C4-828E-4F85-A640-BFB1D40FA70C">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-362">pull request #362</a>.
</p>

<p>
MK leads discussion.
</p>

<ul class="org-ul">
<li>MK: A trivial note that’s no longer applicable.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-h-B43832BD-DBDE-4459-B5C6-EE9BE57906A2" class="outline-4">
<h4 id="h-B43832BD-DBDE-4459-B5C6-EE9BE57906A2"><span class="section-number-4">2.1.2.</span> PR #354, Combine multiple signatures of XSLT functions to use defaults</h4>
<div class="outline-text-4" id="text-h-B43832BD-DBDE-4459-B5C6-EE9BE57906A2">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-354">pull request #354</a>.
</p>

<p>
MK leads discussion.
</p>

<ul class="org-ul">
<li>MK: We did a pass over the standard XPath functions to combine
signatures. I did the same to the XSLT functions.</li>
</ul>

<p>
ACTION QT4CG-023-01: NW to review the stylesheets for functions across XPath and XSLT
</p>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-h-3C80588B-6B82-4EC0-95FE-7756A2EC5DCB" class="outline-4">
<h4 id="h-3C80588B-6B82-4EC0-95FE-7756A2EC5DCB"><span class="section-number-4">2.1.3.</span> PR #353, issue #109 xsl note</h4>
<div class="outline-text-4" id="text-h-3C80588B-6B82-4EC0-95FE-7756A2EC5DCB">
<p>
See <a href="https://qt4cg.org/dashboard/#pr-353">pull request #353</a> and <a href="https://github.com/qt4cg/qtspecs/issues/109">issue #109</a>.
</p>

<p>
MK leads discussion.
</p>

<ul class="org-ul">
<li>MK: My preferred solution is <code>xsl:note</code>, stripped out at the same time
as comments and PIs.
<ul class="org-ul">
<li>… There’s also a change here for a main-module attribute to document
the location of the main module,</li>
</ul></li>
<li>JL: If the module is reusable, that could be wrong</li>
<li>MK: Yes.</li>
<li>MK: The whitespace stripping code has been restructured a bit.
<ul class="org-ul">
<li>… It was in the wrong place.</li>
</ul></li>
<li>JL: When preprocessing, is there still a mechanism to get to the original stylesheet?</li>
<li>MK: Using the document function with a same-document reference has
always been a bit weird. I think there’s room for implementors to do both.</li>
<li>DN: I think this is good.</li>
<li>JL: Is there an argument for an attribute version of this one?
<ul class="org-ul">
<li>… I tend to put an attribute on a param, for example, to document an element.</li>
</ul></li>
<li>NW: I’d put an <code>xsl:note</code> inside the parameter</li>
<li>SF: Lots of languages have documentation capabilities. We should create a namespace
for documentation and add it to the language.</li>
<li>MK: We could do that.</li>
<li>DN: Maybe we can go too deeply, but we should think about what we
could document.</li>
<li>NW: These are XML documents. If you want to build a comprehensive documentation
system on tp of them you can.</li>
<li>MK: If we wanted to go further, we’d start by looking at third party vocabularies.</li>
<li>JK: Oxygen has one, I have one.</li>
<li>SF: That would be a reference implementation.</li>
<li>NW: What about calling it <code>xsl:documentation</code> as a parallel with XML Schema and XProc?</li>
<li>MK: I prefer shorter names.</li>
<li>NW: Okay.</li>
</ul>

<p>
Proposal: Accept this PR?
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>

<div id="outline-container-h-5ACE0622-A613-4026-9074-C7492E84CC15" class="outline-3">
<h3 id="h-5ACE0622-A613-4026-9074-C7492E84CC15"><span class="section-number-3">2.2.</span> Review of appendixes J.1.1 and J.1.2.</h3>
<div class="outline-text-3" id="text-h-5ACE0622-A613-4026-9074-C7492E84CC15">
<p>
See <a href="https://qt4cg.org/specifications/xslt-40/Overview.html#changes-since-3.0">J Changes since XSLT 3.0</a>.
</p>

<p>
We’ll review the items in J.1.1. and J.1.2. with an eye towards
categorizing them as:
</p>

<ol class="org-ol">
<li>already agreed by the CG</li>
<li>needs discussion and agreement</li>
<li>OK to rubber-stamp without detailed review</li>
<li>probably best withdrawn for reconsideration.</li>
</ol>

<p>
MK leads the review of J.1.1 and J.1.2 based on his <a href="https://lists.w3.org/Archives/Public/public-xslt-40/2023Feb/0018.html">email</a>.
</p>

<ol class="org-ol">
<li>Errata agreed against XSLT 3.0 have been applied.</li>
</ol>

<blockquote>
<p>
These were agreed by the old WG before it disbanded and should not need further review
</p>
</blockquote>

<ol class="org-ol">
<li value="2">Support for XPath 4.0 and Functions and Operators 4.0 is
required. This notably means that support for XDM arrays is now
required.</li>
</ol>

<blockquote>
<p>
Hopefully uncontroversial.
</p>
</blockquote>

<ol class="org-ol">
<li value="3">The <code>xsl:if</code> instruction acquires attributes then and else.</li>
</ol>

<blockquote>
<p>
Accepted 8 Nov 2022 subject to action ACTION QT4CG-010-02
</p>
</blockquote>

<ol class="org-ol">
<li value="4">The <code>xsl:when</code> and <code>xsl:otherwise</code> elements can be evaluated
using a select expression rather than a contained sequence
constructor.</li>
</ol>

<blockquote>
<p>
Accepted 8 Nov 2022
</p>
</blockquote>

<ol class="org-ol">
<li value="5">A new <code>xsl:switch</code> instruction is introduced.</li>
</ol>

<blockquote>
<p>
Accepted 8 Nov 2022
</p>
</blockquote>

<ol class="org-ol">
<li value="6">The <code>xsl:item-type</code> declaration allows names to be given to item
types, which can then be referenced by name. This is particularly
useful with record types, introduced in XPath 4.0.</li>
</ol>

<blockquote>
<p>
Needs WG review; affects XQuery and XPath also
</p>
</blockquote>

<ul class="org-ul">
<li>MK: repeating the types all the time is tedious
<ul class="org-ul">
<li>… Should it be purely a macro, or does it have some semantics such
as self-reference: how far should we go?</li>
<li>… What are the scope rules? It should be another component that
you can use and export, etc.</li>
</ul></li>
<li>JL: At any level?</li>
<li>MK: I’ve only put at the top level.
<ul class="org-ul">
<li>… Shouldn’t be subject to import precedence.</li>
</ul></li>
<li>NW: I think this is a really good idea, but what about XPath?</li>
<li>RD: There’s an equivalent declare-item-type in XQuery
<ul class="org-ul">
<li>… Issues: self-referencing, some grammar irregularities with item-type(name)</li>
</ul></li>
<li>MK: There are lots of loose ends.</li>
<li>DN: I have mentioned elsewhere, this is a step forward, but it’s just a lexical
convention. We could go further and make types into real objects in the language.
Maybe we should do this, but also continue to think about making a type object.</li>
<li>MK: It would be nice if types were objects were types in the
language, but it’s not going to be easy to do.</li>
</ul>

<p>
General agreement to continue this work.
</p>

<ol class="org-ol">
<li value="7">A new <code>xsl:function-library</code> declaration is introduced,
allowing functions from multiple different namespaces to be called
without using a namespace prefix.</li>
</ol>

<blockquote>
<p>
MK proposes to withdraw this, the complexity probably exceeds the benefit
</p>
</blockquote>

<ul class="org-ul">
<li>MK: I don’t think this proposal is very satisfying.
<ul class="org-ul">
<li>… One thing we can’t do is an object-oriented approach. That’s too
big a change.</li>
</ul></li>
<li>RD: One of the suggestions I made in one of DN’s propsals was when importing
to be able to override the definitipn. So if you have conflicts, you can make the
imported function a new function and then you have to fix it with <code>typeswitch</code>
yourself.</li>
<li>MK: Yes, something like that would help.</li>
<li>JL: Like <code>xsl:original</code>?</li>
<li>MK: Maybe.</li>
<li>DN: I think there was a good proposal near the beginning of the
issue. I think CG is becoming more convinced that it’s useful. If we
introduce types as an object, that’s where we can store the information.
Sorry if I overreacted to the question about closing some issues. The problem
still exists even if you close the issue</li>
<li>MK: Yes. I think I wanted to close the threads so we can start
fresh. Plus, the default is always the status quo. If there isn’t a
proposal that stands a good chance of getting approval, then we
always fall back in the status quo,</li>
</ul>

<p>
ACTION QT4CG-023-02: MK to write a PR to drop <code>xsl:function-library</code> from the spec.
</p>

<p>
ACTION QT4CG-023-03: MK to start a new thread for discussion function namespace flexibility
</p>

<ol class="org-ol">
<li value="8">The default namespace for element names and the default
namespace for types can now be different, allowing built-in types
to be referenced in unprefixed form ( <code>as="integer"</code> ).</li>
</ol>

<blockquote>
<p>
Needs WG
review. The main motivation was to allow more flexibility for
unprefixed names in paths, e.g. matching by local name only.
</p>
</blockquote>

<ul class="org-ul">
<li>MK: Splitting these makes it possible to have more flexibility in
matching from source documents. If most stylesheets aren’t schema-aware, why
not let users drop the <code>xs:</code> prefix.</li>
<li>RD: I’ve applied this change to my XQuery plugin and I’m happy with this change.</li>
<li>JL: Is there a possibility when you do <code>as="integer"</code>, what would
happen if you had a record type named <code>integer</code></li>
<li>MK: We could, maybe should, reserve bare names for atomic types.
<ul class="org-ul">
<li>… The other thing in this area that I’ve found attractive is allowing the option
of an unprefixed name to match only the local name.</li>
<li>… A practical reality is that you find different namespaces with
the same local names.</li>
</ul></li>
<li>RD: HTML allows something like this. I’ve made some proposals along
these lines for similar reasons.</li>
</ul>

<p>
ACTION QT4CG-023-04: MK to review and develop a proposal for separating element and type default namespaces
</p>

<ol class="org-ol">
<li value="9">New instructions <code>xsl:array</code> and <code>xsl:array-member</code> allow the
construction of arrays.</li>
</ol>

<blockquote>
<p>
Needs WG review (and probably revision).
</p>
</blockquote>

<ul class="org-ul">
<li>MK: Need more infrastructure work in XPath before we can do this.
There are separate proposals for wider group review.</li>

<li id="10">The instructions <code>xsl:for-each</code>, <code>xsl:iterate</code>, and
<code>xsl:for-each-group</code> have attributes <code>array</code> and <code>map</code> which can be
used in place of the select attribute to allow iteration over
arrays or maps rather than sequences.</li>
</ul>

<blockquote>
<p>
We've already dropped this (see below). But it remains an issue.
</p>
</blockquote>

<p>
Same disposition as item 9.
</p>

<ol class="org-ol">
<li value="11">New pattern syntax (type(T), record(N, M, N)) allows
matching of items by item type. Needs WG review.</li>
</ol>

<p>
ACTION QT4CG-023-05: NW to put record types on an agenda.
</p>

<ol class="org-ol">
<li value="12">The <code>xsl:mode</code> declaration acquires an attribute
<code>as="sequence-type"</code> which declares the return type of all template
rules in that mode.</li>
</ol>

<blockquote>
<p>
Discussed 8 Nov 2022, no conclusion recorded.
</p>
</blockquote>

<p>
ACTION QT4CG-023-06: MK to revisit and make a PR for a <code>sequence-type</code> attribute on <code>xsl:mode</code>
</p>

<p>
[ We were running out of time at this point, switching more broadly to next steps. ]
</p>

<ul class="org-ul">
<li>MK: I think we should agree that what’s in the spec is accepted
unless an issue is raised.</li>
</ul>

<p>
No disagreement heard.
</p>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<p>
None heard.
</p>
</div>
</div>
</div>
</body>
</html>
