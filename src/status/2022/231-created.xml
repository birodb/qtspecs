<item>
   <title>Issue #231 created</title>
   <pubDate>2022-11-05T18:42:56Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/231</link>
   <guid>https://qt4cg.org/@qt4cg/2022/#created-231</guid>
   <description>&lt;div&gt;&lt;p&gt;for expression: "at" keyword&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;In a the &lt;strong&gt;&lt;em&gt;&lt;a href="https://github.com/qt4cg/qtspecs/issues/181#issuecomment-1304604772"&gt;comment thread&lt;/a&gt;&lt;/em&gt;&lt;/strong&gt; to #181 it was noticed that to be in line with that proposal, we also need to be able to access the index of any member variable within a &lt;strong&gt;&lt;em&gt;&lt;a href="https://qt4cg.org/pr/230/xquery-40/xpath-40-autodiff.html#id-for-expressions"&gt;"for expression"&lt;/a&gt;&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;This can be done in various ways, such as with an &lt;strong&gt;&lt;em&gt;&lt;code&gt;index()&lt;/code&gt;&lt;/em&gt;&lt;/strong&gt; function, as in the code example below:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xq"&gt;for $x in (1,  3, 5, 7, 9, 11),
    $y in (1,  3, 5, 7, 9, 11)
 return
     if(index($x) le index($y)) then [$x, $y]
       else ()
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;But fortunately, in XQuery there is already the &lt;strong&gt;&lt;em&gt;&lt;a href="https://qt4cg.org/pr/230/xquery-40/xpath-40-autodiff.html#id-for-expressions"&gt;"at"&lt;/a&gt;&lt;/em&gt;&lt;/strong&gt; keyword serving exactly the same purpose. Thus the above expression can be written as:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xq"&gt;for $x at $ind-x in (1,  3, 5, 7, 9, 11),
    $y at $ind-y in (1,  3, 5, 7, 9, 11)
 return
     if($ind-x le $ind-y) then [$x, $y]
       else ()
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Thus, I am proposing just to allow the &lt;strong&gt;"at"&lt;/strong&gt; keyword in XPath &lt;strong&gt;&lt;em&gt;&lt;a href="https://qt4cg.org/pr/230/xquery-40/xpath-40-autodiff.html#id-for-expressions"&gt;for-expressions&lt;/a&gt;&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
