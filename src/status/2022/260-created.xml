<item>
   <title>Issue #260 created</title>
   <pubDate>2022-11-19T23:54:43Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/260</link>
   <guid>https://qt4cg.org/@qt4cg/2022/#created-260</guid>
   <description>&lt;div&gt;&lt;p&gt;[FO] array:index-of&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;Seems we are missing the corresponding array function to the standard (on sequences) &lt;strong&gt;&lt;em&gt;fn:index-of(&lt;/em&gt;&lt;/strong&gt;).&lt;/p&gt;
&lt;h3&gt;Summary&lt;/h3&gt;
&lt;p&gt;Returns a sequence of positive integers giving the positions within the array &lt;code&gt;$input&lt;/code&gt; of items that are equal to the &lt;code&gt;$search-member&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;Signature&lt;/h3&gt;
&lt;pre&gt;&lt;code class="language-xq"&gt;array:index-of(
               $input  as array(*),	
               $searched-member as item()*,
               $compare($x as item()*, $y as item()*) as xs:boolean := fn:deep-equal#2
                 ) as xs:integer*
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;Properties&lt;/h3&gt;
&lt;p&gt;This function is deterministic, context-independent, and focus-independent&lt;/p&gt;
&lt;h3&gt;Rules&lt;/h3&gt;
&lt;p&gt;The result of the function is a sequence of integers, in monotonic ascending order, representing the &lt;code&gt;1&lt;/code&gt;-based positions in the input array of those members &lt;code&gt;$mem&lt;/code&gt; for whom &lt;code&gt;$compare($mem, $searched-member)&lt;/code&gt; is &lt;code&gt;true()&lt;/code&gt; .&lt;/p&gt;
&lt;p&gt;More formally, the function returns the result of the XPath expression:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xq"&gt;  (1 to array:size($input)) ! (-&amp;gt; {  .[$compare($input(.), $searched-member)] }) (.)
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;Examples&lt;/h3&gt;
&lt;p&gt;&lt;img src="https://user-images.githubusercontent.com/10605892/202876246-0256f0e7-c736-48b5-b862-7ebbe142d9ce.png" alt="image"/&gt;&lt;/p&gt;
&lt;p&gt;And also this:&lt;/p&gt;
&lt;p&gt;&lt;img src="https://user-images.githubusercontent.com/10605892/202876368-9dd18c8c-888f-41e2-991d-b0779bc6dcd9.png" alt="image"/&gt;&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
