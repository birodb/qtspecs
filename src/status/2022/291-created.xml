<item>
   <title>Issue #291 created</title>
   <pubDate>2022-12-19T11:31:43Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/291</link>
   <guid>https://qt4cg.org/@qt4cg/2022/#created-291</guid>
   <description>&lt;div&gt;&lt;p&gt;DTD validity of F&amp;amp;O spec&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;Despite PR #228, I'm still seeing a lot of validation errors when (using Oxygen) I apply DTD validation to build/expanded/xpath-functions-40/xpath-functions-40.xml&lt;/p&gt;
&lt;p&gt;Many of these relate to style attributes not being allowed on table, td, and code elements.&lt;/p&gt;
&lt;p&gt;The merge-function-specs.xsl explicitly creates elements with these attributes:&lt;/p&gt;
&lt;p&gt;See&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;xsl:template match="fos:options"&amp;gt;&lt;/code&gt; line 382&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;xsl:template match="fos:option"&amp;gt;&lt;/code&gt; line 408&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;xsl:template match="processing-instruction('local-function-index')"&amp;gt;&lt;/code&gt; line 347&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It all works because xmlspec-2016.xsl handles these attributes even though the DTD doesn't allow them: see &lt;code&gt;&amp;lt;xsl:template name="style-attributes"&amp;gt;&lt;/code&gt; at line 2096.&lt;/p&gt;
&lt;p&gt;There seem to be three possible options:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Extend the DTD to allow these attributes&lt;/li&gt;
&lt;li&gt;Change merge-function-specs.xsl to not generate these attributes, instead perhaps generating a role attribute which gets picked up in the final styling&lt;/li&gt;
&lt;li&gt;Sweep the issue under the carpet; avoid validating the intermediate file.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The main problem with the third approach is that it allows other errors to go unnoticed, for example putting text directly within an &lt;code&gt;&amp;lt;item&amp;gt;&lt;/code&gt; without a containing &lt;code&gt;&amp;lt;p&amp;gt;&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
