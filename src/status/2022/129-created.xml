<item>
   <title>Issue #129 created</title>
   <pubDate>2022-08-18T16:59:16Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/129</link>
   <guid>https://qt4cg.org/@qt4cg/2022/#created-129</guid>
   <description>&lt;div&gt;&lt;p&gt;Context item → Context value?&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;This has already been discussed before at various places, I’d like to raise it again: What about generalizing the context item and allowing it to reference sequences? Are there definitive showstoppers?&lt;/p&gt;
&lt;p&gt;The following use cases would then be conceivable, among others:&lt;/p&gt;
&lt;h4&gt;1. Bind collections globally&lt;/h4&gt;
&lt;pre&gt;&lt;code class="language-xquery"&gt;declare context value := collection('flowers');
//flower[name = 'Tigridia']
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Sequences could also be bound by the external environment. Currently, that’s only possible for single documents/items, which is particularly restrictive in the database context.&lt;/p&gt;
&lt;h4&gt;2. Use fat arrow operator to bind sequences&lt;/h4&gt;
&lt;pre&gt;&lt;code class="language-xquery"&gt;//flower[name = 'Psychotria']
=&amp;gt; { count(.) || ' flowers found'}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;3. Use fat arrow as inline function operator (if grammar permits)&lt;/h4&gt;
&lt;pre&gt;&lt;code class="language-xquery"&gt;let $flowers := array:join(
  for $flower in //flower
  group by $_ := $flower/name
  return [ $flower ]
)
(: some $p in petals satisfies $p gt 4 :)
return array:filter($flowers, =&amp;gt; { petals &amp;gt; 4 })
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
