<item>
   <title>Issue #212 created</title>
   <pubDate>2022-10-16T18:25:36Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/212</link>
   <guid>https://qt4cg.org/@qt4cg/2022/#created-212</guid>
   <description>&lt;div&gt;&lt;p&gt;Loss of OS-specific line breaks&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;When an XML document is parsed, &lt;code&gt;CR&lt;/code&gt; is discarded and replaced by &lt;code&gt;LF&lt;/code&gt;. The serialized result wonâ€™t have &lt;code&gt;CR&lt;/code&gt; either:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xquery"&gt;let $CR := '&amp;amp;#xd;', $LF := '&amp;amp;#xa;'
let $input := '&amp;lt;a&amp;gt;' || $CR || '&amp;lt;/a&amp;gt;'
let $xml := parse-xml($input)
let $output := serialize($xml)
return (
  contains($xml, $CR), contains($output, $CR),
  contains($xml, $LF), contains($output, $LF)
)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This is no proposal, but something we should keep in mind when discussing #101 and #121: Do we want to pursue and motivate an asymmetric approach by focusing on the processed and output data (i.e. insertion of &lt;code&gt;CR&lt;/code&gt; characters in strings; new serialization parameter for custom newline strings), or should we rather strive for a solultion that also takes care of the input/import? Which could be:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Provide newline parameters for &lt;code&gt;fn:parse-xml&lt;/code&gt;, &lt;code&gt;fn:doc&lt;/code&gt;, &lt;code&gt;fn:collection&lt;/code&gt;, possibly others; or&lt;/li&gt;
&lt;li&gt;Use OS-specific newline strings&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Interestingly, &lt;code&gt;CR&lt;/code&gt; is preserved if &lt;code&gt;fn:unparsed-text&lt;/code&gt; is used.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
