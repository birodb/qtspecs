<item>
   <title>Issue #285 created</title>
   <pubDate>2022-12-08T11:34:57Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/285</link>
   <guid>https://qt4cg.org/@qt4cg/2022/#created-285</guid>
   <description>&lt;div&gt;&lt;p&gt;Stability of collections&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;The specification for fn:collection says:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;By default, this function is [路deterministic路]. This means that repeated calls on the function with the same argument will return the same result. However, for performance reasons, implementations may provide a user option to evaluate the function without a guarantee of determinism. The manner in which any such option is provided is [路implementation-defined路]. If the user has not selected such an option, a call to this function must either return a deterministic result or must raise a dynamic error [[err:FODC0003].&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I think this is unrealistic. The cost of making fn:collection deterministic is disproportionate to the benefits. It's very rare in practice for a query or stylesheet to process the same collection more than once, and retaining the information needed to deliver the identical results on these rare occasions is expensive (typically it means holding a long-term lock on the data, or keeping a copy of the entire collection in memory). It also inhibits techniques such as multi-threaded evaluation.&lt;/p&gt;
&lt;p&gt;I would like to relax this requirement.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
