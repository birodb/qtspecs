<item>
   <title>Issue #255 created</title>
   <pubDate>2022-11-18T12:01:42Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/255</link>
   <guid>https://qt4cg.org/@qt4cg/2022/#created-255</guid>
   <description>&lt;div&gt;&lt;p&gt;Build error running gradlew publish on Windows&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;When running &lt;code&gt;./gradlew publish&lt;/code&gt; in Windows (via Git Bash) or running the publish gradle task in an IntelliJ Run/Debug configuration, I get the following error:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;gt; Task :xquery_assemble_xpath
Transforming specifications/xquery-40/src/xpath.xml...
Error at char 9 in expression in xsl:variable/@select on line 168 column 60 of assemble-spec.xsl:
  FODC0005  Invalid URI
  file:/D:/Projects/xquery-xslt/qtspecs/build/xquery-40/src/xpath-preprocessed.xml/../D:\Projects\xquery-xslt\qtspecs\build/xquery-40/temp-xpath-grammar.xml. Caused by java.net.URISyntaxException: Illegal character in opaque part at index 2: D:\Projects\xquery-xslt\qtspecs\build/xquery-40/temp-xpath-grammar.xml
  In template rule with match="prodrecap" on line 152 of assemble-spec.xsl
     invoked by xsl:apply-templates at file:/D:/Projects/xquery-xslt/qtspecs/style/assemble-spec.xsl#51
  In template rule with match="node()[fn:empty(...)]" on line 48 of assemble-spec.xsl
     invoked by xsl:apply-templates at file:/D:/Projects/xquery-xslt/qtspecs/style/assemble-spec.xsl#51
  In template rule with match="node()[fn:empty(...)]" on line 48 of assemble-spec.xsl
     invoked by xsl:apply-templates at file:/D:/Projects/xquery-xslt/qtspecs/style/assemble-spec.xsl#51
  In template rule with match="node()[fn:empty(...)]" on line 48 of assemble-spec.xsl
     invoked by xsl:apply-templates at file:/D:/Projects/xquery-xslt/qtspecs/style/assemble-spec.xsl#51
  In template rule with match="node()[fn:empty(...)]" on line 48 of assemble-spec.xsl
     invoked by xsl:apply-templates at file:/D:/Projects/xquery-xslt/qtspecs/specifications/xquery-40/style/assemble-xquery.xsl#26
  In template rule with match="/" on line 13 of assemble-xquery.xsl
Invalid URI file:/D:/Projects/xquery-xslt/qtspecs/build/xquery-40/src/xpath-preprocessed.xml/../D:\Projects\xquery-xslt\qtspecs\build/xquery-40/temp-xpath-grammar.xml
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I've tracked this down to the &lt;code&gt;grammar-file&lt;/code&gt; option passed to the XSLT in the &lt;code&gt;build.gradle&lt;/code&gt; file, but I'm not currently sure what the fix should be.&lt;/p&gt;
&lt;p&gt;Note: running this within Linux via WSL works, so the issue looks like it is due to handling Windows paths as file URIs.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
