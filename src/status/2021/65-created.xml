<item>
   <title>Issue #65 created</title>
   <pubDate>2021-03-29T17:13:45Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/65</link>
   <guid>https://qt4cg.org/@qt4cg/2021/#created-65</guid>
   <description>&lt;div&gt;&lt;p&gt;[XQuery] Support using different input/output element namespaces&lt;/p&gt;&lt;div class="markup"&gt;&lt;h2&gt;Use Case&lt;/h2&gt;
&lt;p&gt;There have been requests for specifying the output namespace in XQuery akin to the &lt;code&gt;@xpath-default-namespace&lt;/code&gt; element in XSLT. With the element and type namespaces now being able to be set independently, it would be a good idea to make this change as well, splitting the input and output default XML namespaces.&lt;/p&gt;
&lt;h2&gt;Grammar&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;DefaultNamespaceDecl ::= "declare"  "default"  ((("input" | "output")? "element")  |  "type"  |  "function")
                         "namespace"  URILiteral
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;New Semantics&lt;/h2&gt;
&lt;p&gt;The &lt;em&gt;default element namespace&lt;/em&gt; static context item is split into a &lt;em&gt;default input element namespace&lt;/em&gt; that applies to input element contexts (e.g. path steps), and a &lt;em&gt;default output element namespace&lt;/em&gt; that applies to output element contexts (e.g. direct/constructed elements).&lt;/p&gt;
&lt;p&gt;The &lt;em&gt;scope&lt;/em&gt; of the default namespace declaration is the &lt;code&gt;element&lt;/code&gt;, &lt;code&gt;function&lt;/code&gt;, &lt;code&gt;input element&lt;/code&gt;, &lt;code&gt;output element&lt;/code&gt;, or &lt;code&gt;type&lt;/code&gt; namespace specified in the declaration.&lt;/p&gt;
&lt;p&gt;A default namespace declaration with the &lt;em&gt;element&lt;/em&gt; scope will set any of the &lt;em&gt;input element&lt;/em&gt;, &lt;em&gt;output element&lt;/em&gt;, and &lt;em&gt;type&lt;/em&gt; namespaces that have not been set by a corresponding &lt;em&gt;input element&lt;/em&gt;, &lt;em&gt;output element&lt;/em&gt;, or &lt;em&gt;type&lt;/em&gt; scoped default namespace declaration.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;p&gt;Given &lt;code&gt;declare default input element namespace "A"; declare default element namespace "B";&lt;/code&gt;, the &lt;em&gt;output element&lt;/em&gt; and &lt;em&gt;type&lt;/em&gt; namespaces will be specified by the &lt;em&gt;element&lt;/em&gt; scope default namespace declaration "B", and the &lt;em&gt;input element&lt;/em&gt; namespace will be specified by the &lt;em&gt;input element&lt;/em&gt; scope default namespace declaration "A".&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;TODO&lt;/h2&gt;
&lt;p&gt;Map all element symbols/contexts as using either the &lt;em&gt;input element&lt;/em&gt; or &lt;em&gt;output element&lt;/em&gt; default namespace for NCName EQNames.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
