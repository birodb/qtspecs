<item>
   <title>Issue #93 created</title>
   <pubDate>2021-11-20T16:10:04Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/93</link>
   <guid>https://qt4cg.org/@qt4cg/2021/#created-93</guid>
   <description>&lt;div&gt;&lt;p&gt;[XQuery] Support order by ascending/descending from a string value.&lt;/p&gt;&lt;div class="markup"&gt;&lt;h3&gt;Use Case&lt;/h3&gt;
&lt;p&gt;It is a common pattern to have a sort key and direction on requests that support listing or searching an object (e.g. authors).&lt;/p&gt;
&lt;p&gt;Currently, in order to switch between ascending/descending in a FLWOR expression two separate expressions need to be written. For example:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;if ($sort-order eq "ascending") then
    for $name in $authors order by $name ascending return $name
else
    for $name in $authors order by $name descending return $name
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It would be cleaner if this could be rewritten as:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;for $name in $authors
order by $name in $sort-order order
return $name
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;Syntax&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;OrderModifier ::= ("ascending"  |  "descending"  |  OrderDirection)?
                  ("empty"  ("greatest"  |  "least"))?
                  ("collation" URILiteral)?
OrderDirection ::= "in" ExprSingle "order"
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;Semantics&lt;/h3&gt;
&lt;p&gt;If OrderDirection is used, the expression is evaluated.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;If the expression is not a single atomic value, an XQST#### error is raised.&lt;/li&gt;
&lt;li&gt;If the expression evaluates to the string "ascending", this is the same as using the &lt;code&gt;ascending&lt;/code&gt; keyword.&lt;/li&gt;
&lt;li&gt;If the expression evaluates to the string "descending", this is the same as using the &lt;code&gt;descending&lt;/code&gt; keyword.&lt;/li&gt;
&lt;li&gt;Otherwise, an XQST#### error is raised.&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
