<item>
   <title>Issue #96 created</title>
   <pubDate>2021-11-22T15:56:45Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/96</link>
   <guid>https://qt4cg.org/@qt4cg/2021/#created-96</guid>
   <description>&lt;div&gt;&lt;p&gt;[XPath] Functions that determine if a given sequence starts with another sequence or ends with another sequence&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;It is surprising that we are at version 4 and still are missing:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xq"&gt;(1) fn:starts-with-sequence($container as item()*, $maybe-start as item()*, 
                            $compare as function(item(), item()) as xs:boolean := deep-equal)
                            ) as xs:boolean
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xq"&gt;(2) fn:ends-with-sequence($container as item()*, $maybe-end as item()*, 
                          $compare as function(item(), item()) as xs:boolean := deep-equal)
                          ) as xs:boolean
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;(2) above is a shorthand for:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xq"&gt;fn:starts-with-sequence(reverse($container), reverse($maybe-end)) 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Examples&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;fn:starts-with-sequence(('a', 'b', 'c', 'd'), ('a', 'b'))&lt;/code&gt;   returns &lt;code&gt;true()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;fn:starts-with-sequence(('a', 'b', 'c', 'd'), ('a', 'c'))&lt;/code&gt;   returns &lt;code&gt;false()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;fn:ends-with-sequence(('a', 'b', 'c', 'd'), ('c', 'd'))&lt;/code&gt;   returns &lt;code&gt;true()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;fn:ends-with-sequence(('a', 'b', 'c', 'd'), ('b', 'd'))&lt;/code&gt;   returns &lt;code&gt;false()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;('a', 'b', 'c', 'd') =&amp;gt; starts-with-sequence(('a', 'b'))&lt;/code&gt; returns &lt;code&gt;true()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;('a', 'b', 'c', 'd') =&amp;gt; starts-with-sequence(('a', 'c'))&lt;/code&gt; returns &lt;code&gt;false()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;('a', 'b', 'c', 'd') =&amp;gt; ends-with-sequence(('c', 'd'))&lt;/code&gt; returns &lt;code&gt;true()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;('a', 'b', 'c', 'd') =&amp;gt; ends-with-sequence(('b', 'd'))&lt;/code&gt; returns &lt;code&gt;false()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;One possible implementation&lt;/strong&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xq"&gt;let $starts-with-sequence := function($seq1 as item()*, $seq2 as item()*, $self as function(*))
{
   empty($seq2)
  or
   head($seq1) eq head($seq2) and $self(subsequence($seq1, 2), subsequence($seq2, 2), $self)
}
  return
    $starts-with-sequence(('a', 'b', 'c', 'd'), ('a', 'b', 'c'), $starts-with-sequence)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
