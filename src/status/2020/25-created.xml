<item>
   <title>Issue #25 created</title>
   <pubDate>2020-12-17T05:13:25Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/25</link>
   <guid>https://qt4cg.org/@qt4cg/2020/#created-25</guid>
   <description>&lt;div&gt;&lt;p&gt;[XPath] `%variadic("sequence")` does not allow specifying some argument values in the variadic sequence, and in one case even not the variadic sequence itself&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;&lt;strong&gt;The current specification for sequence variadic functions (at: https://qt4cg.org/branch/master/xquery-40/xpath-40-diff.html#id-static-functions) has the following issues&lt;/strong&gt;:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;An empty sequence cannot be specified into the sequence of variadic arguments&lt;/li&gt;
&lt;li&gt;Even the last (sequence) argument that is supposed to contain the variadic arguments "disappears" when no variadic argument is specified on the function call&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;This results in difficulties to describe, explain and implement such sequence-variadic functions, and in inability to provide any argument value (like the empty sequence) within the last, sequence argument.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Proposed improvement&lt;/strong&gt;, which doesn't have the above problems:&lt;/p&gt;
&lt;p&gt;Use &lt;strong&gt;&lt;em&gt;array-variadic&lt;/em&gt;&lt;/strong&gt; functions instead of sequence-variadic:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;%variadic("array")&lt;/code&gt; indicates that the function is &lt;em&gt;array-variadic&lt;/em&gt;. An &lt;em&gt;array-variadic&lt;/em&gt; function declares one or more parameters, of which the last must be an array. If the declaration includes N parameters, then a call on the function may supply N-1 or more arguments. However, the effective call always consists of N arguments, the first N-1 of which are the values for the positional parameters of the function, and the Nth argument is an array that contains all provided variadic arguments.&lt;/p&gt;
&lt;p&gt;Why an &lt;em&gt;array-variadic&lt;/em&gt; function doesn't have the problems 1 and 2 above?&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;An empty sequence can be specified in the last argument, for example: [1, (), 2]. For example:
&lt;code&gt;myFun($posArg1, $posArg2, ..., $posArgN_minus_1, [1, (), 2])&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;When no variadic arguments are supplied, the last argument of the effective function call is still supplied -- it is the empty array. For example:  &lt;code&gt;myFun($posArg1, $posArg2, ..., $posArgN_minus_1, [])&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
