<item>
   <title>Issue #340 created</title>
   <pubDate>2023-02-07T22:02:07Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/340</link>
   <guid>https://qt4cg.org/@qt4cg/2023/#created-340</guid>
   <description>&lt;div&gt;&lt;p&gt;fn:format-number: Specifying decimal format&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;It would be nice if the decimal format for &lt;code&gt;fn:format-number&lt;/code&gt; could also be supplied via an additional argument. The current syntax is:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xquery"&gt;(: result: 12.345,67 :)
declare decimal-format de decimal-separator = ',' grouping-separator = '.';

format-number(
  value := 12345.67,
  picture := '#.##0,00',
  decimal-format-name := 'de'
)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The syntax could be enhanced as follows:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xquery"&gt;format-number(
  value := 12345.67,
  picture := '#.##0,00',
  format := map { 'decimal-separator': ',', 'grouping-separator': '.' }
)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If both &lt;code&gt;decimal-format-name&lt;/code&gt; and &lt;code&gt;format&lt;/code&gt; are supplied, an error should be raised.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Edit 2023-05-02, adopted from a comment further below:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Next, language-specific default settings would be sensible. The existing syntax could be used:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xquery"&gt;format-number(12345.67, '#.##0,00', 'de')
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;As known from the other functions for formatting numbers and dates, it could be up to the implementation to decide which languages are supported. The defaults could be overwritten by custom decimal-format declarations in the prolog to ensure that a setting is applied, even if an implementation does not support it.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
